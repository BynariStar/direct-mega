!function(){"use strict";var t="undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global,e=[],n=[],i="undefined"==typeof Uint8Array?Array:Uint8Array,a=!1;function r(){a=!0;for(var t=0;t<64;++t)e[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[t],n["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(t)]=t;n[45]=62,n[95]=63}function o(t){return e[63&t>>18]+e[63&t>>12]+e[63&t>>6]+e[63&t]}function s(t,e,n){for(var i,a=[],r=e;r<n;r+=3)i=(t[r]<<16)+(t[r+1]<<8)+t[r+2],a.push(o(i));return a.join("")}function p(t){a||r();for(var n,i=t.length,o=i%3,p="",c=[],l=0,d=i-o;l<d;l+=16383)c.push(s(t,l,l+16383>d?d:l+16383));return 1==o?(n=t[i-1],p+=e[n>>2],p+=e[63&n<<4],p+="=="):2==o&&(n=(t[i-2]<<8)+t[i-1],p+=e[n>>10],p+=e[63&n>>4],p+=e[63&n<<2],p+="="),c.push(p),c.join("")}function c(t,e,n,i,a){var r,o,s=Math.pow,p=8*a-i-1,c=(1<<p)-1,l=c>>1,d=-7,u=n?a-1:0,h=n?-1:1,f=t[e+u];for(u+=h,r=f&(1<<-d)-1,f>>=-d,d+=p;0<d;r=256*r+t[e+u],u+=h,d-=8);for(o=r&(1<<-d)-1,r>>=-d,d+=i;0<d;o=256*o+t[e+u],u+=h,d-=8);if(0===r)r=1-l;else{if(r===c)return o?NaN:1/0*(f?-1:1);o+=s(2,i),r-=l}return(f?-1:1)*o*s(2,r-i)}function l(t,e,n,i,a,r){var o,s,p,c=Math.pow,l=8*r-a-1,d=(1<<l)-1,u=d>>1,h=23===a?5.960464477539062e-8:0,f=i?0:r-1,m=i?1:-1;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,o=d):(1>e*(p=c(2,-(o=Math.floor(Math.log(e)/Math.LN2))))&&(o--,p*=2),2<=(e+=1<=o+u?h/p:h*c(2,1-u))*p&&(o++,p/=2),o+u>=d?(s=0,o=d):1<=o+u?(s=(e*p-1)*c(2,a),o+=u):(s=e*c(2,u-1)*c(2,a),o=0));8<=a;t[n+f]=255&s,f+=m,s/=256,a-=8);for(o=o<<a|s,l+=a;0<l;t[n+f]=255&o,f+=m,o/=256,l-=8);t[n+f-m]|=0}var d={}.toString,u=Array.isArray||function(t){return"[object Array]"==d.call(t)};function h(){return m.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(t,e){if(h()<e)throw new RangeError("Invalid typed array length");return m.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=m.prototype:(null===t&&(t=new m(e)),t.length=e),t}function m(t,e,n){if(!(m.TYPED_ARRAY_SUPPORT||this instanceof m))return new m(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return x(this,t)}return v(this,t,e,n)}function v(t,e,n,i){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,0>n||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),m.TYPED_ARRAY_SUPPORT?(t=e).__proto__=m.prototype:t=y(t,e),t}(t,e,n,i):"string"==typeof e?function(t,e,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!m.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|k(e,n),a=(t=f(t,i)).write(e,n);return a!==i&&(t=t.slice(0,a)),t}(t,e,n):function(t,e){if(w(e)){var n=0|b(e.length);return 0===(t=f(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?f(t,0):y(t,e);if("Buffer"===e.type&&u(e.data))return y(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function g(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(0>t)throw new RangeError('"size" argument must not be negative')}function x(t,e){if(g(e),t=f(t,0>e?0:0|b(e)),!m.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function y(t,e){var n=0>e.length?0:0|b(e.length);t=f(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function b(t){if(t>=h())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h().toString(16)+" bytes");return 0|t}function w(t){return!(null==t||!t._isBuffer)}function k(t,e){if(w(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return J(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(i)return J(t).length;e=(""+e).toLowerCase(),i=!0}}function E(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function _(t,e,n,i,a){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):2147483647<n?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:t.length-1),0>n&&(n=t.length+n),n>=t.length){if(a)return-1;n=t.length-1}else if(0>n){if(!a)return-1;n=0}if("string"==typeof e&&(e=m.from(e,i)),w(e))return 0===e.length?-1:S(t,e,n,i,a);if("number"==typeof e)return e&=255,m.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):S(t,[e],n,i,a);throw new TypeError("val must be string, number or Buffer")}function S(t,e,n,i,a){function r(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}var o,s=1,p=t.length,c=e.length;if(void 0!==i&&("ucs2"===(i=(i+"").toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(2>t.length||2>e.length)return-1;s=2,p/=2,c/=2,n/=2}if(a){var l=-1;for(o=n;o<p;o++)if(r(t,o)!==r(e,-1==l?0:o-l))-1!=l&&(o-=o-l),l=-1;else if(-1==l&&(l=o),o-l+1===c)return l*s}else for(n+c>p&&(n=p-c),o=n;0<=o;o--){for(var d=!0,u=0;u<c;u++)if(r(t,o+u)!==r(e,u)){d=!1;break}if(d)return o}return-1}function R(t,e,n,i){n=+n||0;var a=t.length-n;i?(i=+i)>a&&(i=a):i=a;var r=e.length;if(0!=r%2)throw new TypeError("Invalid hex string");i>r/2&&(i=r/2);for(var o,s=0;s<i;++s){if(o=parseInt(e.substr(2*s,2),16),isNaN(o))return s;t[n+s]=o}return s}function j(t,e,n,i){return K(J(e,t.length-n),t,n,i)}function A(t,e,n,i){return K(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function z(t,e,n,i){return A(t,e,n,i)}function C(t,e,n,i){return K(H(e),t,n,i)}function T(t,e,n,i){return K(function(t,e){for(var n,i,a,r=[],o=0;o<t.length&&!(0>(e-=2));++o)n=t.charCodeAt(o),i=n>>8,a=n%256,r.push(a),r.push(i);return r}(e,t.length-n),t,n,i)}function L(t,e,n){return 0===e&&n===t.length?p(t):p(t.slice(e,n))}function I(t,e,n){n=Math.min(t.length,n);for(var i=[],a=e;a<n;){var r,o,s,p,c=t[a],l=null,d=239<c?4:223<c?3:191<c?2:1;if(a+d<=n)1==d?128>c&&(l=c):2==d?128==(192&(r=t[a+1]))&&(127<(p=(31&c)<<6|63&r)&&(l=p)):3==d?(r=t[a+1],o=t[a+2],128==(192&r)&&128==(192&o)&&(2047<(p=(15&c)<<12|(63&r)<<6|63&o)&&(55296>p||57343<p)&&(l=p))):4==d&&(r=t[a+1],o=t[a+2],s=t[a+3],128==(192&r)&&128==(192&o)&&128==(192&s)&&(65535<(p=(15&c)<<18|(63&r)<<12|(63&o)<<6|63&s)&&1114112>p&&(l=p)));null===l?(l=65533,d=1):65535<l&&(l-=65536,i.push(55296|1023&l>>>10),l=56320|1023&l),i.push(l),a+=d}return function(t){var e=String.fromCharCode,n=t.length;if(n<=4096)return e.apply(String,t);for(var i="",a=0;a<n;)i+=e.apply(String,t.slice(a,a+=4096));return i}(i)}function q(t,e,n){var i="";n=Math.min(t.length,n);for(var a=e;a<n;++a)i+=String.fromCharCode(127&t[a]);return i}function O(t,e,n){var i="";n=Math.min(t.length,n);for(var a=e;a<n;++a)i+=String.fromCharCode(t[a]);return i}function M(t,e,n){var i=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>i)&&(n=i);for(var a="",r=e;r<n;++r)a+=G(t[r]);return a}function B(t,e,n){for(var i=t.slice(e,n),a="",r=0;r<i.length;r+=2)a+=String.fromCharCode(i[r]+256*i[r+1]);return a}function U(t,e,n){if(0!=t%1||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,i,a,r){if(!w(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>a||e<r)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function P(t,e,n,i){0>e&&(e=65535+e+1);for(var a=0,r=Math.min(t.length-n,2);a<r;++a)t[n+a]=(e&255<<8*(i?a:1-a))>>>8*(i?a:1-a)}function N(t,e,n,i){0>e&&(e=4294967295+e+1);for(var a=0,r=Math.min(t.length-n,4);a<r;++a)t[n+a]=255&e>>>8*(i?a:3-a)}function Y(t,e,n,i){if(n+i>t.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function F(t,e,n,i,a){return a||Y(t,0,n,4),l(t,e,n,i,23,4),n+4}function $(t,e,n,i,a){return a||Y(t,0,n,8),l(t,e,n,i,52,8),n+8}m.TYPED_ARRAY_SUPPORT=!(void 0!==t.TYPED_ARRAY_SUPPORT)||t.TYPED_ARRAY_SUPPORT,m.poolSize=8192,m._augment=function(t){return t.__proto__=m.prototype,t},m.from=function(t,e,n){return v(null,t,e,n)},m.TYPED_ARRAY_SUPPORT&&(m.prototype.__proto__=Uint8Array.prototype,m.__proto__=Uint8Array),m.alloc=function(t,e,n){return function(t,e,n,i){return g(e),0>=e?f(t,e):void 0===n?f(t,e):"string"==typeof i?f(t,e).fill(n,i):f(t,e).fill(n)}(null,t,e,n)},m.allocUnsafe=function(t){return x(null,t)},m.allocUnsafeSlow=function(t){return x(null,t)},m.isBuffer=V,m.compare=function(t,e){if(!w(t)||!w(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,a=0,r=Math.min(n,i);a<r;++a)if(t[a]!==e[a]){n=t[a],i=e[a];break}return n<i?-1:i<n?1:0},m.isEncoding=function(t){switch((t+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function(t,e){if(!u(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return m.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=m.allocUnsafe(e),a=0;for(n=0;n<t.length;++n){var r=t[n];if(!w(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(i,a),a+=r.length}return i},m.byteLength=k,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var t=this.length;if(0!=t%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)E(this,e,e+1);return this},m.prototype.swap32=function(){var t=this.length;if(0!=t%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)E(this,e,e+3),E(this,e+1,e+2);return this},m.prototype.swap64=function(){var t=this.length;if(0!=t%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)E(this,e,e+7),E(this,e+1,e+6),E(this,e+2,e+5),E(this,e+3,e+4);return this},m.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?I(this,0,t):function(t,e,n){var i=!1;if((void 0===e||0>e)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return M(this,e,n);case"utf8":case"utf-8":return I(this,e,n);case"ascii":return q(this,e,n);case"latin1":case"binary":return O(this,e,n);case"base64":return L(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}.apply(this,arguments)},m.prototype.equals=function(t){if(!w(t))throw new TypeError("Argument must be a Buffer");return this===t||0===m.compare(this,t)},m.prototype.inspect=function(){var t="";return 0<this.length&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),50<this.length&&(t+=" ... ")),"<Buffer "+t+">"},m.prototype.compare=function(t,e,n,i,a){if(!w(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===a&&(a=this.length),0>e||n>t.length||0>i||a>this.length)throw new RangeError("out of range index");if(i>=a&&e>=n)return 0;if(i>=a)return-1;if(e>=n)return 1;if(this===t)return 0;for(var r=(a>>>=0)-(i>>>=0),o=(n>>>=0)-(e>>>=0),s=Math.min(r,o),p=this.slice(i,a),c=t.slice(e,n),l=0;l<s;++l)if(p[l]!==c[l]){r=p[l],o=c[l];break}return r<o?-1:o<r?1:0},m.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},m.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},m.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},m.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var a=this.length-e;if((void 0===n||n>a)&&(n=a),0<t.length&&(0>n||0>e)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var r=!1;;)switch(i){case"hex":return R(this,t,e,n);case"utf8":case"utf-8":return j(this,t,e,n);case"ascii":return A(this,t,e,n);case"latin1":case"binary":return z(this,t,e,n);case"base64":return C(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,t,e,n);default:if(r)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),r=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},m.prototype.slice=function(t,e){var n,i=this.length;if(0>(t=~~t)?0>(t+=i)&&(t=0):t>i&&(t=i),0>(e=void 0===e?i:~~e)?0>(e+=i)&&(e=0):e>i&&(e=i),e<t&&(e=t),m.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=m.prototype;else{var a=e-t;n=new m(a,void 0);for(var r=0;r<a;++r)n[r]=this[r+t]}return n},m.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var i=this[t],a=1,r=0;++r<e&&(a*=256);)i+=this[t+r]*a;return i},m.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var i=this[t+--e],a=1;0<e&&(a*=256);)i+=this[t+--e]*a;return i},m.prototype.readUInt8=function(t,e){return e||U(t,1,this.length),this[t]},m.prototype.readUInt16LE=function(t,e){return e||U(t,2,this.length),this[t]|this[t+1]<<8},m.prototype.readUInt16BE=function(t,e){return e||U(t,2,this.length),this[t]<<8|this[t+1]},m.prototype.readUInt32LE=function(t,e){return e||U(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},m.prototype.readUInt32BE=function(t,e){return e||U(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},m.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var i=this[t],a=1,r=0;++r<e&&(a*=256);)i+=this[t+r]*a;return i>=(a*=128)&&(i-=Math.pow(2,8*e)),i},m.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||U(t,e,this.length);for(var i=e,a=1,r=this[t+--i];0<i&&(a*=256);)r+=this[t+--i]*a;return r>=(a*=128)&&(r-=Math.pow(2,8*e)),r},m.prototype.readInt8=function(t,e){return e||U(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},m.prototype.readInt16LE=function(t,e){e||U(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},m.prototype.readInt16BE=function(t,e){e||U(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},m.prototype.readInt32LE=function(t,e){return e||U(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},m.prototype.readInt32BE=function(t,e){return e||U(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},m.prototype.readFloatLE=function(t,e){return e||U(t,4,this.length),c(this,t,!0,23,4)},m.prototype.readFloatBE=function(t,e){return e||U(t,4,this.length),c(this,t,!1,23,4)},m.prototype.readDoubleLE=function(t,e){return e||U(t,8,this.length),c(this,t,!0,52,8)},m.prototype.readDoubleBE=function(t,e){return e||U(t,8,this.length),c(this,t,!1,52,8)},m.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var a=1,r=0;for(this[e]=255&t;++r<n&&(a*=256);)this[e+r]=255&t/a;return e+n},m.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||D(this,t,e,n,Math.pow(2,8*n)-1,0);var a=n-1,r=1;for(this[e+a]=255&t;0<=--a&&(r*=256);)this[e+a]=255&t/r;return e+n},m.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),m.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},m.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),m.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},m.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),m.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},m.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),m.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):N(this,t,e,!0),e+4},m.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),m.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},m.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var a=Math.pow(2,8*n-1);D(this,t,e,n,a-1,-a)}var r=0,o=1,s=0;for(this[e]=255&t;++r<n&&(o*=256);)0>t&&0==s&&0!==this[e+r-1]&&(s=1),this[e+r]=255&(t/o>>0)-s;return e+n},m.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var a=Math.pow(2,8*n-1);D(this,t,e,n,a-1,-a)}var r=n-1,o=1,s=0;for(this[e+r]=255&t;0<=--r&&(o*=256);)0>t&&0==s&&0!==this[e+r+1]&&(s=1),this[e+r]=255&(t/o>>0)-s;return e+n},m.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),m.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=255&t,e+1},m.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),m.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},m.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),m.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},m.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),m.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):N(this,t,e,!0),e+4},m.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),m.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):N(this,t,e,!1),e+4},m.prototype.writeFloatLE=function(t,e,n){return F(this,t,e,!0,n)},m.prototype.writeFloatBE=function(t,e,n){return F(this,t,e,!1,n)},m.prototype.writeDoubleLE=function(t,e,n){return $(this,t,e,!0,n)},m.prototype.writeDoubleBE=function(t,e,n){return $(this,t,e,!1,n)},m.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),0<i&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var a,r=i-n;if(this===t&&n<e&&e<i)for(a=r-1;0<=a;--a)t[a+e]=this[a+n];else if(1e3>r||!m.TYPED_ARRAY_SUPPORT)for(a=0;a<r;++a)t[a+e]=this[a+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+r),e);return r},m.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),1===t.length){var a=t.charCodeAt(0);256>a&&(t=a)}if(void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!m.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"==typeof t&&(t&=255);if(0>e||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var r;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(r=e;r<n;++r)this[r]=t;else{var o=w(t)?t:J(new m(t,i).toString()),s=o.length;for(r=0;r<n-e;++r)this[r+e]=o[r%s]}return this};var W=/[^+\/0-9A-Za-z-_]/g;function G(t){return 16>t?"0"+t.toString(16):t.toString(16)}function J(t,e){e=e||1/0;for(var n,i=t.length,a=null,r=[],o=0;o<i;++o){if(55295<(n=t.charCodeAt(o))&&57344>n){if(!a){if(56319<n){-1<(e-=3)&&r.push(239,191,189);continue}if(o+1===i){-1<(e-=3)&&r.push(239,191,189);continue}a=n;continue}if(56320>n){-1<(e-=3)&&r.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&-1<(e-=3)&&r.push(239,191,189);if(a=null,128>n){if(0>(e-=1))break;r.push(n)}else if(2048>n){if(0>(e-=2))break;r.push(192|n>>6,128|63&n)}else if(65536>n){if(0>(e-=3))break;r.push(224|n>>12,128|63&n>>6,128|63&n)}else{if(!(1114112>n))throw new Error("Invalid code point");if(0>(e-=4))break;r.push(240|n>>18,128|63&n>>12,128|63&n>>6,128|63&n)}}return r}function H(t){return function(t){a||r();var e,o,s,p,c,l,d=t.length;if(0<d%4)throw new Error("Invalid string. Length must be a multiple of 4");c="="===t[d-2]?2:"="===t[d-1]?1:0,l=new i(3*d/4-c),s=0<c?d-4:d;var u=0;for(e=0,o=0;e<s;e+=4,o+=3)p=n[t.charCodeAt(e)]<<18|n[t.charCodeAt(e+1)]<<12|n[t.charCodeAt(e+2)]<<6|n[t.charCodeAt(e+3)],l[u++]=255&p>>16,l[u++]=255&p>>8,l[u++]=255&p;return 2===c?(p=n[t.charCodeAt(e)]<<2|n[t.charCodeAt(e+1)]>>4,l[u++]=255&p):1==c&&(p=n[t.charCodeAt(e)]<<10|n[t.charCodeAt(e+1)]<<4|n[t.charCodeAt(e+2)]>>2,l[u++]=255&p>>8,l[u++]=255&p),l}(function(t){if(2>(t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(W,"")).length)return"";for(;0!=t.length%4;)t+="=";return t}(t))}function K(t,e,n,i){for(var a=0;a<i&&!(a+n>=e.length||a>=t.length);++a)e[a+n]=t[a];return a}function V(t){return null!=t&&(!!t._isBuffer||X(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&X(t.slice(0,0))}(t))}function X(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function Z(){throw new Error("setTimeout has not been defined")}function Q(){throw new Error("clearTimeout has not been defined")}var tt,et=Z,nt=Q;function it(t){if(et===setTimeout)return setTimeout(t,0);if((et===Z||!et)&&setTimeout)return et=setTimeout,setTimeout(t,0);try{return et(t,0)}catch(e){try{return et.call(null,t,0)}catch(e){return et.call(this,t,0)}}}"function"==typeof t.setTimeout&&(et=setTimeout),"function"==typeof t.clearTimeout&&(nt=clearTimeout);var at=[],rt=!1,ot=-1;function st(){rt&&tt&&(rt=!1,tt.length?at=tt.concat(at):ot=-1,at.length&&pt())}function pt(){if(!rt){var t=it(st);rt=!0;for(var e=at.length;e;){for(tt=at,at=[];++ot<e;)tt&&tt[ot].run();ot=-1,e=at.length}tt=null,rt=!1,function(t){if(nt===clearTimeout)return clearTimeout(t);if((nt===Q||!nt)&&clearTimeout)return nt=clearTimeout,clearTimeout(t);try{nt(t)}catch(e){try{return nt.call(null,t)}catch(e){return nt.call(this,t)}}}(t)}}function ct(t){var e=Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];at.push(new lt(t,e)),1!==at.length||rt||it(pt)}function lt(t,e){this.fun=t,this.array=e}lt.prototype.run=function(){this.fun.apply(null,this.array)};function dt(){}var ut=dt,ht=dt,ft=dt,mt=dt,vt=dt,gt=dt,xt=dt;var yt=t.performance||{},bt=yt.now||yt.mozNow||yt.msNow||yt.oNow||yt.webkitNow||function(){return(new Date).getTime()};var wt=new Date;var kt,Et={nextTick:ct,title:"browser",browser:!0,env:{},argv:[],version:"",versions:{},on:ut,addListener:ht,once:ft,off:mt,removeListener:vt,removeAllListeners:gt,emit:xt,binding:function(){throw new Error("process.binding is not supported")},cwd:function(){return"/"},chdir:function(){throw new Error("process.chdir is not supported")},umask:function(){return 0},hrtime:function(t){var e=Math.floor,n=.001*bt.call(yt),i=e(n),a=e(n%1*1e9);return t&&(i-=t[0],0>(a-=t[1])&&(i--,a+=1e9)),[i,a]},platform:"browser",release:{},config:{},uptime:function(){return(new Date-wt)/1e3}},_t="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window;function St(t,e){return t(e={exports:{}},e.exports),e.exports}function Rt(){}function jt(){jt.init.call(this)}function At(t){return void 0===t._maxListeners?jt.defaultMaxListeners:t._maxListeners}function zt(t,e,n,i){var a,r,o;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((r=t._events)?(r.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),r=t._events),o=r[e]):(r=t._events=new Rt,t._eventsCount=0),o){if("function"==typeof o?o=r[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),!o.warned&&((a=At(t))&&0<a&&o.length>a)){o.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+e+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=o.length,function(t){"function"==typeof console.warn?console.warn(t):console.log(t)}(s)}}else o=r[e]=n,++t._eventsCount;return t}function Ct(t,e,n){function i(){t.removeListener(e,i),a||(a=!0,n.apply(t,arguments))}var a=!1;return i.listener=n,i}function Tt(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function Lt(t,e){for(var n=Array(e);e--;)n[e]=t[e];return n}Rt.prototype=Object.create(null),jt.EventEmitter=jt,jt.usingDomains=!1,jt.prototype.domain=void 0,jt.prototype._events=void 0,jt.prototype._maxListeners=void 0,jt.defaultMaxListeners=10,jt.init=function(){this.domain=null,jt.usingDomains&&kt.active&&!(this instanceof kt.Domain)&&(this.domain=kt.active),this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=new Rt,this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},jt.prototype.setMaxListeners=function(t){if("number"!=typeof t||0>t||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},jt.prototype.getMaxListeners=function(){return At(this)},jt.prototype.emit=function(t){var e,n,i,a,r,o,s,p="error"===t;if(o=this._events)p=p&&null==o.error;else if(!p)return!1;if(s=this.domain,p){if(e=arguments[1],!s){if(e instanceof Error)throw e;var c=new Error('Uncaught, unspecified "error" event. ('+e+")");throw c.context=e,c}return e||(e=new Error('Uncaught, unspecified "error" event')),e.domainEmitter=this,e.domain=s,e.domainThrown=!1,s.emit("error",e),!1}if(!(n=o[t]))return!1;var l="function"==typeof n;switch(i=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var i=t.length,a=Lt(t,i),r=0;r<i;++r)a[r].call(n)}(n,l,this);break;case 2:!function(t,e,n,i){if(e)t.call(n,i);else for(var a=t.length,r=Lt(t,a),o=0;o<a;++o)r[o].call(n,i)}(n,l,this,arguments[1]);break;case 3:!function(t,e,n,i,a){if(e)t.call(n,i,a);else for(var r=t.length,o=Lt(t,r),s=0;s<r;++s)o[s].call(n,i,a)}(n,l,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,i,a,r){if(e)t.call(n,i,a,r);else for(var o=t.length,s=Lt(t,o),p=0;p<o;++p)s[p].call(n,i,a,r)}(n,l,this,arguments[1],arguments[2],arguments[3]);break;default:for(a=Array(i-1),r=1;r<i;r++)a[r-1]=arguments[r];!function(t,e,n,i){if(e)t.apply(n,i);else for(var a=t.length,r=Lt(t,a),o=0;o<a;++o)r[o].apply(n,i)}(n,l,this,a)}return!0},jt.prototype.addListener=function(t,e){return zt(this,t,e,!1)},jt.prototype.on=jt.prototype.addListener,jt.prototype.prependListener=function(t,e){return zt(this,t,e,!0)},jt.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,Ct(this,t,e)),this},jt.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,Ct(this,t,e)),this},jt.prototype.removeListener=function(t,e){var n,i,a,r,o;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[t]))return this;if(n===e||n.listener&&n.listener===e)0==--this._eventsCount?this._events=new Rt:(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(a=-1,r=n.length;0<r--;)if(n[r]===e||n[r].listener&&n[r].listener===e){o=n[r].listener,a=r;break}if(0>a)return this;if(1===n.length){if(n[0]=void 0,0==--this._eventsCount)return this._events=new Rt,this;delete i[t]}else!function(t,e){for(var n=e,i=n+1,a=t.length;i<a;n+=1,i+=1)t[n]=t[i];t.pop()}(n,a);i.removeListener&&this.emit("removeListener",t,o||e)}return this},jt.prototype.removeAllListeners=function(t){var e,n;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=new Rt,this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=new Rt:delete n[t]),this;if(0===arguments.length){for(var i,a=Object.keys(n),r=0;r<a.length;++r)"removeListener"===(i=a[r])||this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=new Rt,this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)do{this.removeListener(t,e[e.length-1])}while(e[0]);return this},jt.prototype.listeners=function(t){var e,n,i=this._events;return i?n=(e=i[t])?"function"==typeof e?[e.listener||e]:function(t){for(var e=Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(e):[]:n=[],n},jt.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):Tt.call(t,e)},jt.prototype.listenerCount=Tt,jt.prototype.eventNames=function(){return 0<this._eventsCount?Reflect.ownKeys(this._events):[]};var It,qt="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},Ot=/%[sdj%]/g;function Mt(t){if(!Xt(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(Pt(arguments[n]));return e.join(" ")}n=1;for(var i=arguments,a=i.length,r=(t+"").replace(Ot,function(t){if("%%"===t)return"%";if(n>=a)return t;switch(t){case"%s":return i[n++]+"";case"%d":return+i[n++];case"%j":try{return JSON.stringify(i[n++])}catch(t){return"[Circular]"}default:return t}}),o=i[n];n<a;o=i[++n])r+=Ht(o)||!ee(o)?" "+o:" "+Pt(o);return r}function Bt(e,n){if(Qt(t.process))return function(){return Bt(e,n).apply(this,arguments)};if(!0===Et.noDeprecation)return e;var i=!1;return function(){if(!i){if(Et.throwDeprecation)throw new Error(n);Et.traceDeprecation?console.trace(n):console.error(n),i=!0}return e.apply(this,arguments)}}var Ut={};function Dt(t){return Qt(It)&&(It=Et.env.NODE_DEBUG||""),t=t.toUpperCase(),Ut[t]||(new RegExp("\\b"+t+"\\b","i").test(It)?Ut[t]=function(){var e=Mt.apply(null,arguments);console.error("%s %d: %s",t,0,e)}:Ut[t]=function(){}),Ut[t]}function Pt(t,e){var n={seen:[],stylize:Yt};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),Jt(e)?n.showHidden=e:e&&de(n,e),Qt(n.showHidden)&&(n.showHidden=!1),Qt(n.depth)&&(n.depth=2),Qt(n.colors)&&(n.colors=!1),Qt(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=Nt),Ft(n,t,n.depth)}function Nt(t,e){var n=Pt.styles[e];return n?"["+Pt.colors[n][0]+"m"+t+"["+Pt.colors[n][1]+"m":t}function Yt(t){return t}function Ft(t,e,n){if(t.customInspect&&e&&ae(e.inspect)&&e.inspect!==Pt&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return Xt(i)||(i=Ft(t,i,n)),i}var a=function(t,e){if(Qt(e))return t.stylize("undefined","undefined");if(Xt(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return Vt(e)?t.stylize(""+e,"number"):Jt(e)?t.stylize(""+e,"boolean"):Ht(e)?t.stylize("null","null"):void 0}(t,e);if(a)return a;var r=Object.keys(e),o=function(t){var e={};return t.forEach(function(t){e[t]=!0}),e}(r);if(t.showHidden&&(r=Object.getOwnPropertyNames(e)),ie(e)&&(0<=r.indexOf("message")||0<=r.indexOf("description")))return $t(e);if(0===r.length){if(ae(e)){var s=e.name?": "+e.name:"";return t.stylize("[Function"+s+"]","special")}if(te(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(ne(e))return t.stylize(Date.prototype.toString.call(e),"date");if(ie(e))return $t(e)}var p,c="",l=!1,d=["{","}"];(Gt(e)&&(l=!0,d=["[","]"]),ae(e))&&(c=" [Function"+(e.name?": "+e.name:"")+"]");return te(e)&&(c=" "+RegExp.prototype.toString.call(e)),ne(e)&&(c=" "+Date.prototype.toUTCString.call(e)),ie(e)&&(c=" "+$t(e)),0!==r.length||l&&0!=e.length?0>n?te(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special"):(t.seen.push(e),p=l?function(t,e,n,i,a){for(var r=[],o=0,s=e.length;o<s;++o)ue(e,o+"")?r.push(Wt(t,e,n,i,o+"",!0)):r.push("");return a.forEach(function(a){a.match(/^\d+$/)||r.push(Wt(t,e,n,i,a,!0))}),r}(t,e,n,o,r):r.map(function(i){return Wt(t,e,n,o,i,l)}),t.seen.pop(),function(t,e,n){return 60<t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(p,c,d)):d[0]+c+d[1]}function $t(t){return"["+Error.prototype.toString.call(t)+"]"}function Wt(t,e,n,i,a,r){var o,s,p;if((p=Object.getOwnPropertyDescriptor(e,a)||{value:e[a]}).get?s=p.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):p.set&&(s=t.stylize("[Setter]","special")),ue(i,a)||(o="["+a+"]"),s||(0>t.seen.indexOf(p.value)?-1<(s=Ht(n)?Ft(t,p.value,null):Ft(t,p.value,n-1)).indexOf("\n")&&(s=r?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),Qt(o)){if(r&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+s}function Gt(t){return Array.isArray(t)}function Jt(t){return"boolean"==typeof t}function Ht(t){return null===t}function Kt(t){return null==t}function Vt(t){return"number"==typeof t}function Xt(t){return"string"==typeof t}function Zt(t){return"symbol"==typeof t}function Qt(t){return void 0===t}function te(t){return ee(t)&&"[object RegExp]"===se(t)}function ee(t){return"object"==typeof t&&null!==t}function ne(t){return ee(t)&&"[object Date]"===se(t)}function ie(t){return ee(t)&&("[object Error]"===se(t)||t instanceof Error)}function ae(t){return"function"==typeof t}function re(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t}function oe(t){return V(t)}function se(t){return Object.prototype.toString.call(t)}function pe(t){return 10>t?"0"+t.toString(10):t.toString(10)}Pt.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},Pt.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};var ce=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function le(){var t,e;console.log("%s - %s",(t=new Date,e=[pe(t.getHours()),pe(t.getMinutes()),pe(t.getSeconds())].join(":"),[t.getDate(),ce[t.getMonth()],e].join(" ")),Mt.apply(null,arguments))}function de(t,e){if(!e||!ee(e))return t;for(var n=Object.keys(e),i=n.length;i--;)t[n[i]]=e[n[i]];return t}function ue(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var he={inherits:qt,_extend:de,log:le,isBuffer:oe,isPrimitive:re,isFunction:ae,isError:ie,isDate:ne,isObject:ee,isRegExp:te,isUndefined:Qt,isSymbol:Zt,isString:Xt,isNumber:Vt,isNullOrUndefined:Kt,isNull:Ht,isBoolean:Jt,isArray:Gt,inspect:Pt,deprecate:Bt,format:Mt,debuglog:Dt},fe=Object.freeze({format:Mt,deprecate:Bt,debuglog:Dt,inspect:Pt,isArray:Gt,isBoolean:Jt,isNull:Ht,isNullOrUndefined:Kt,isNumber:Vt,isString:Xt,isSymbol:Zt,isUndefined:Qt,isRegExp:te,isObject:ee,isDate:ne,isError:ie,isFunction:ae,isPrimitive:re,isBuffer:oe,log:le,inherits:qt,_extend:de,default:he});function me(){this.head=null,this.tail=null,this.length=0}me.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},me.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},me.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,t}},me.prototype.clear=function(){this.head=this.tail=null,this.length=0},me.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},me.prototype.concat=function(t){if(0===this.length)return m.alloc(0);if(1===this.length)return this.head.data;for(var e=m.allocUnsafe(t>>>0),n=this.head,i=0;n;)n.data.copy(e,i),i+=n.data.length,n=n.next;return e};var ve=m.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function ge(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),function(t){if(t&&!ve(t))throw new Error("Unknown encoding: "+t)}(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=ye;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=be;break;default:return void(this.write=xe)}this.charBuffer=new m(6),this.charReceived=0,this.charLength=0}function xe(t){return t.toString(this.encoding)}function ye(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function be(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}ge.prototype.write=function(t){for(var e,n="";this.charLength;){if(e=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length,t.copy(this.charBuffer,this.charReceived,0,e),this.charReceived+=e,this.charReceived<this.charLength)return"";if(t=t.slice(e,t.length),!(55296<=(a=(n=this.charBuffer.slice(0,this.charLength).toString(this.encoding)).charCodeAt(n.length-1))&&56319>=a)){if(this.charReceived=this.charLength=0,0===t.length)return n;break}this.charLength+=this.surrogateSize,n=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived);var a;i=(n+=t.toString(this.encoding,0,i)).length-1;if(55296<=(a=n.charCodeAt(i))&&56319>=a){var r=this.surrogateSize;return this.charLength+=r,this.charReceived+=r,this.charBuffer.copy(this.charBuffer,r,0,r),t.copy(this.charBuffer,0,0,r),n.substring(0,i)}return n},ge.prototype.detectIncompleteChar=function(t){for(var e=3<=t.length?3:t.length;0<e;e--){var n=t[t.length-e];if(1==e&&6==n>>5){this.charLength=2;break}if(2>=e&&14==n>>4){this.charLength=3;break}if(3>=e&&30==n>>3){this.charLength=4;break}}this.charReceived=e},ge.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,i=this.charBuffer,a=this.encoding;e+=i.slice(0,n).toString(a)}return e},Ee.ReadableState=ke;var we=Dt("stream");function ke(t,e){t=t||{},this.objectMode=!!t.objectMode,e instanceof Ve&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new me,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(this.decoder=new ge(t.encoding),this.encoding=t.encoding)}function Ee(t){return this instanceof Ee?(this._readableState=new ke(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void jt.call(this)):new Ee(t)}function _e(t,e,n,i,a){var r=function(t,e){var n=null;return V(e)||"string"==typeof e||null==e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(e,n);if(r)t.emit("error",r);else if(null===n)e.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,Re(t)}}(t,e);else if(e.objectMode||n&&0<n.length)if(e.ended&&!a){var o=new Error("stream.push() after EOF");t.emit("error",o)}else if(e.endEmitted&&a){var s=new Error("stream.unshift() after end event");t.emit("error",s)}else{var p;!e.decoder||a||i||(n=e.decoder.write(n),p=!e.objectMode&&0===n.length),a||(e.reading=!1),p||(e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,a?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&Re(t))),function(t,e){e.readingMore||(e.readingMore=!0,ct(Ae,t,e))}(t,e)}else a||(e.reading=!1);return function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(e)}function Se(t,e){return 0>=t||0===e.length&&e.ended?0:e.objectMode?1:t==t?(t>e.highWaterMark&&(e.highWaterMark=function(t){return 8388608<=t?t=8388608:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0)):e.flowing&&e.length?e.buffer.head.data.length:e.length}function Re(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(we("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?ct(je,t):je(t))}function je(t){we("emit readable"),t.emit("readable"),Te(t)}function Ae(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(we("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function ze(t){we("readable nexttick read 0"),t.read(0)}function Ce(t,e){e.reading||(we("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),Te(t),e.flowing&&!e.reading&&t.read(0)}function Te(t){var e=t._readableState;for(we("flow",e.flowing);e.flowing&&null!==t.read(););}function Le(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var i;return t<e.head.data.length?(i=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):i=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,i=1,a=n.data;for(t-=a.length;n=n.next;){var r=n.data,o=t>r.length?r.length:t;if(a+=o===r.length?r:r.slice(0,t),0===(t-=o)){o===r.length?(++i,e.head=n.next?n.next:e.tail=null):(e.head=n,n.data=r.slice(o));break}++i}return e.length-=i,a}(t,e):function(t,e){var n=m.allocUnsafe(t),i=e.head,a=1;for(i.data.copy(n),t-=i.data.length;i=i.next;){var r=i.data,o=t>r.length?r.length:t;if(r.copy(n,n.length-t,0,o),0===(t-=o)){o===r.length?(++a,e.head=i.next?i.next:e.tail=null):(e.head=i,i.data=r.slice(o));break}++a}return e.length-=a,n}(t,e),i}(t,e.buffer,e.decoder),n);var n}function Ie(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,ct(qe,e,t))}function qe(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function Oe(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1}function Me(){}function Be(t,e,n){this.chunk=t,this.encoding=e,this.callback=n,this.next=null}function Ue(t,e){Object.defineProperty(this,"buffer",{get:Bt(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")}),t=t||{},this.objectMode=!!t.objectMode,e instanceof Ve&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var n=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,i=n.sync,a=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,i,a){--e.pendingcb,n?ct(a,i):a(i),t._writableState.errorEmitted=!0,t.emit("error",i)}(t,n,i,e,a);else{var r=Fe(n);r||n.corked||n.bufferProcessing||!n.bufferedRequest||Ye(t,n),i?ct(Ne,t,n,r,a):Ne(t,n,r,a)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Ge(this)}function De(t){return this instanceof De||this instanceof Ve?(this._writableState=new Ue(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void jt.call(this)):new De(t)}function Pe(t,e,n,i,a,r,o){e.writelen=i,e.writecb=o,e.writing=!0,e.sync=!0,n?t._writev(a,e.onwrite):t._write(a,r,e.onwrite),e.sync=!1}function Ne(t,e,n,i){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,i(),We(t,e)}function Ye(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var i=e.bufferedRequestCount,a=Array(i),r=e.corkedRequestsFree;r.entry=n;for(var o=0;n;)a[o]=n,n=n.next,o+=1;Pe(t,e,!0,e.length,a,"",r.finish),e.pendingcb++,e.lastBufferedRequest=null,r.next?(e.corkedRequestsFree=r.next,r.next=null):e.corkedRequestsFree=new Ge(e)}else{for(;n;){var s=n.chunk,p=n.encoding,c=n.callback;if(Pe(t,e,!1,e.objectMode?1:s.length,s,p,c),n=n.next,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequestCount=0,e.bufferedRequest=n,e.bufferProcessing=!1}function Fe(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function $e(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function We(t,e){var n=Fe(e);return n&&(0===e.pendingcb?($e(t,e),e.finished=!0,t.emit("finish")):$e(t,e)),n}function Ge(t){var e=this;this.next=null,this.entry=null,this.finish=function(n){var i=e.entry;for(e.entry=null;i;){var a=i.callback;t.pendingcb--,a(n),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}}qt(Ee,jt),Ee.prototype.push=function(t,e){var n=this._readableState;return n.objectMode||"string"!=typeof t||(e=e||n.defaultEncoding)!==n.encoding&&(t=m.from(t,e),e=""),_e(this,n,t,e,!1)},Ee.prototype.unshift=function(t){return _e(this,this._readableState,t,"",!0)},Ee.prototype.isPaused=function(){return!1===this._readableState.flowing},Ee.prototype.setEncoding=function(t){return this._readableState.decoder=new ge(t),this._readableState.encoding=t,this},Ee.prototype.read=function(t){we("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return we("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?Ie(this):Re(this),null;if(0===(t=Se(t,e))&&e.ended)return 0===e.length&&Ie(this),null;var i,a=e.needReadable;return we("need readable",a),(0===e.length||e.length-t<e.highWaterMark)&&we("length less than watermark",a=!0),e.ended||e.reading?we("reading or ended",a=!1):a&&(we("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,!e.reading&&(t=Se(n,e))),null===(i=0<t?Le(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(!e.ended&&(e.needReadable=!0),n!==t&&e.ended&&Ie(this)),null!==i&&this.emit("data",i),i},Ee.prototype._read=function(){this.emit("error",new Error("not implemented"))},Ee.prototype.pipe=function(t,e){function n(t){we("onunpipe"),t===l&&a()}function i(){we("onend"),t.end()}function a(){we("cleanup"),t.removeListener("close",s),t.removeListener("finish",p),t.removeListener("drain",h),t.removeListener("error",o),t.removeListener("unpipe",n),l.removeListener("end",i),l.removeListener("end",a),l.removeListener("data",r),f=!0,d.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&h()}function r(e){we("ondata"),m=!1,!1!==t.write(e)||m||((1===d.pipesCount&&d.pipes===t||1<d.pipesCount&&-1!==Oe(d.pipes,t))&&!f&&(we("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,m=!0),l.pause())}function o(e){we("onerror",e),c(),t.removeListener("error",o),0===function(t,e){return t.listeners(e).length}(t,"error")&&t.emit("error",e)}function s(){t.removeListener("finish",p),c()}function p(){we("onfinish"),t.removeListener("close",s),c()}function c(){we("unpipe"),l.unpipe(t)}var l=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=t;break;case 1:d.pipes=[d.pipes,t];break;default:d.pipes.push(t)}d.pipesCount+=1,we("pipe count=%d opts=%j",d.pipesCount,e);var u=!e||!1!==e.end?i:a;d.endEmitted?ct(u):l.once("end",u),t.on("unpipe",n);var h=function(t){return function(){var e=t._readableState;we("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&t.listeners("data").length&&(e.flowing=!0,Te(t))}}(l);t.on("drain",h);var f=!1,m=!1;return l.on("data",r),function(t,e,n){"function"==typeof t.prependListener?t.prependListener(e,n):t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",o),t.once("close",s),t.once("finish",p),t.emit("pipe",l),d.flowing||(we("pipe resume"),l.resume()),t},Ee.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this);return this}var r=Oe(e.pipes,t);return-1===r?this:(e.pipes.splice(r,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},Ee.prototype.on=function(t,e){var n=jt.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&Re(this):ct(ze,this))}return n},Ee.prototype.addListener=Ee.prototype.on,Ee.prototype.resume=function(){var t=this._readableState;return t.flowing||(we("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,ct(Ce,t,e))}(this,t)),this},Ee.prototype.pause=function(){return we("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(we("pause"),this._readableState.flowing=!1,this.emit("pause")),this},Ee.prototype.wrap=function(t){var e=this._readableState,n=!1,i=this;for(var a in t.on("end",function(){if(we("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&i.push(t)}i.push(null)}),t.on("data",function(a){(we("wrapped data"),e.decoder&&(a=e.decoder.write(a)),e.objectMode&&null==a||!(e.objectMode||a&&a.length))||(i.push(a)||(n=!0,t.pause()))}),t)void 0===this[a]&&"function"==typeof t[a]&&(this[a]=function(e){return function(){return t[e].apply(t,arguments)}}(a));return function(t,e){for(var n=0,i=t.length;n<i;n++)e(t[n],n)}(["error","close","destroy","pause","resume"],function(e){t.on(e,i.emit.bind(i,e))}),i._read=function(e){we("wrapped _read",e),n&&(n=!1,t.resume())},i},Ee._fromList=Le,De.WritableState=Ue,qt(De,jt),Ue.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},De.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},De.prototype.write=function(t,e,n){var i=this._writableState,a=!1;return"function"==typeof e&&(n=e,e=null),m.isBuffer(t)?e="buffer":!e&&(e=i.defaultEncoding),"function"!=typeof n&&(n=Me),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),ct(e,n)}(this,n):function(t,e,n,i){var a=!0,r=!1;return null===n?r=new TypeError("May not write null values to stream"):!m.isBuffer(n)&&"string"!=typeof n&&void 0!==n&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r&&(t.emit("error",r),ct(i,r),a=!1),a}(this,i,t,n)&&(i.pendingcb++,a=function(t,e,n,i,a){n=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=m.from(e,n)),e}(e,n,i),m.isBuffer(n)&&(i="buffer");var r=e.objectMode?1:n.length;e.length+=r;var o=e.length<e.highWaterMark;if(o||(e.needDrain=!0),e.writing||e.corked){var s=e.lastBufferedRequest;e.lastBufferedRequest=new Be(n,i,a),s?s.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Pe(t,e,!1,r,n,i,a);return o}(this,i,t,e,n)),a},De.prototype.cork=function(){this._writableState.corked++},De.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.finished&&!t.bufferProcessing&&t.bufferedRequest&&Ye(this,t))},De.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},De.prototype._write=function(t,e,n){n(new Error("not implemented"))},De.prototype._writev=null,De.prototype.end=function(t,e,n){var i=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(t,e,n){e.ending=!0,We(t,e),n&&(e.finished?ct(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,i,n)},qt(Ve,Ee);for(var Je,He=Object.keys(De.prototype),Ke=0;Ke<He.length;Ke++)Je=He[Ke],Ve.prototype[Je]||(Ve.prototype[Je]=De.prototype[Je]);function Ve(t){return this instanceof Ve?(Ee.call(this,t),De.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),void this.once("end",Xe)):new Ve(t)}function Xe(){this.allowHalfOpen||this._writableState.ended||ct(Ze,this)}function Ze(t){t.end()}function Qe(t){this.afterTransform=function(e,n){return function(t,e,n){var i=t._transformState;i.transforming=!1;var a=i.writecb;if(!a)return t.emit("error",new Error("no writecb in Transform class"));i.writechunk=null,i.writecb=null,null!=n&&t.push(n),a(e);var r=t._readableState;r.reading=!1,(r.needReadable||r.length<r.highWaterMark)&&t._read(r.highWaterMark)}(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function tn(t){if(!(this instanceof tn))return new tn(t);Ve.call(this,t),this._transformState=new Qe(this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(t){en(e,t)}):en(e)})}function en(t,e){if(e)return t.emit("error",e);var n=t._writableState,i=t._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}function nn(t){return this instanceof nn?void tn.call(this,t):new nn(t)}function an(){jt.call(this)}qt(tn,Ve),tn.prototype.push=function(t,e){return this._transformState.needTransform=!1,Ve.prototype.push.call(this,t,e)},tn.prototype._transform=function(){throw new Error("Not implemented")},tn.prototype._write=function(t,e,n){var i=this._transformState;if(i.writecb=n,i.writechunk=t,i.writeencoding=e,!i.transforming){var a=this._readableState;(i.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}},tn.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},qt(nn,tn),nn.prototype._transform=function(t,e,n){n(null,t)},qt(an,jt),an.Readable=Ee,an.Writable=De,an.Duplex=Ve,an.Transform=tn,an.PassThrough=nn,an.Stream=an,an.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&p.pause&&p.pause()}function i(){p.readable&&p.resume&&p.resume()}function a(){c||(c=!0,t.end())}function r(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function o(t){if(s(),0===jt.listenerCount(this,"error"))throw t}function s(){p.removeListener("data",n),t.removeListener("drain",i),p.removeListener("end",a),p.removeListener("close",r),p.removeListener("error",o),t.removeListener("error",o),p.removeListener("end",s),p.removeListener("close",s),t.removeListener("close",s)}var p=this;p.on("data",n),t.on("drain",i),t._isStdio||e&&!1===e.end||(p.on("end",a),p.on("close",r));var c=!1;return p.on("error",o),t.on("error",o),p.on("end",s),p.on("close",s),t.on("close",s),t.emit("pipe",p),t};var rn=Object.freeze({default:an,Readable:Ee,Writable:De,Duplex:Ve,Transform:tn,PassThrough:nn,Stream:an}),on=rn&&an||rn,sn=St(function(t,e){function n(t,e,n){function i(){for(;o.length&&!p.paused;){var t=o.shift();if(null===t)return p.emit("end");p.emit("data",t)}}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var a=!1,r=!1,o=[],s=!1,p=new on;return p.readable=p.writable=!0,p.paused=!1,p.autoDestroy=!(n&&!1===n.autoDestroy),p.write=function(e){return t.call(this,e),!p.paused},p.queue=p.push=function(t){return s?p:(null===t&&(s=!0),o.push(t),i(),p)},p.on("end",function(){p.readable=!1,!p.writable&&p.autoDestroy&&ct(function(){p.destroy()})}),p.end=function(t){if(!a)return a=!0,arguments.length&&p.write(t),p.writable=!1,e.call(p),!p.readable&&p.autoDestroy&&p.destroy(),p},p.destroy=function(){if(!r)return r=!0,a=!0,o.length=0,p.writable=p.readable=!1,p.emit("close"),p},p.pause=function(){if(!p.paused)return p.paused=!0,p},p.resume=function(){return p.paused&&(p.paused=!1,p.emit("resume")),i(),p.paused||p.emit("drain"),p},p}t.exports=n,n.through=n}),pn=["write","end","destroy"],cn=["resume","pause"],ln=["data","close"],dn=Array.prototype.slice,un=function(t,e){function n(t){i.emit("error",t)}var i=new on,a=!1;return hn(pn,function(e){i[e]=function(){return t[e].apply(t,arguments)}}),hn(cn,function(t){i[t]=function(){i.emit(t);var n=e[t];return n?n.apply(e,arguments):void e.emit(t)}}),hn(ln,function(t){e.on(t,function(){var e=dn.call(arguments);e.unshift(t),i.emit.apply(i,e)})}),e.on("end",function(){if(!a){a=!0;var t=dn.call(arguments);t.unshift("end"),i.emit.apply(i,t)}}),t.on("drain",function(){i.emit("drain")}),t.on("error",n),e.on("error",n),i.writable=t.writable,i.readable=e.readable,i};function hn(t,e){if(t.forEach)return t.forEach(e);for(var n=0;n<t.length;n++)e(t[n],n)}var fn=Object.freeze({default:un,__moduleExports:un}),mn=St(function(t,e){function n(t,e,n){function i(){for(;o.length&&!p.paused;){var t=o.shift();if(null===t)return p.emit("end");p.emit("data",t)}}t=t||function(t){this.queue(t)},e=e||function(){this.queue(null)};var a=!1,r=!1,o=[],s=!1,p=new on;return p.readable=p.writable=!0,p.paused=!1,p.autoDestroy=!(n&&!1===n.autoDestroy),p.write=function(e){return t.call(this,e),!p.paused},p.queue=p.push=function(t){return s?p:(null===t&&(s=!0),o.push(t),i(),p)},p.on("end",function(){p.readable=!1,!p.writable&&p.autoDestroy&&ct(function(){p.destroy()})}),p.end=function(t){if(!a)return a=!0,arguments.length&&p.write(t),p.writable=!1,e.call(p),!p.readable&&p.autoDestroy&&p.destroy(),p},p.destroy=function(){if(!r)return r=!0,a=!0,o.length=0,p.writable=p.readable=!1,p.emit("close"),p},p.pause=function(){if(!p.paused)return p.paused=!0,p},p.resume=function(){return p.paused&&(p.paused=!1,p.emit("resume")),i(),p.paused||p.emit("drain"),p},p}t.exports=n,n.through=n}),vn=Object.freeze({default:mn,__moduleExports:mn}),gn=fn&&un||fn,xn=vn&&mn||vn,yn=function(){function t(){var t=[].slice.call(arguments);t.unshift("error"),a.emit.apply(a,t)}var e;if(0==(e=1==arguments.length&&Array.isArray(arguments[0])?arguments[0]:[].slice.call(arguments)).length)return xn();if(1==e.length)return e[0];var n=e[0],i=e[e.length-1],a=gn(n,i);!function t(e){2>e.length||(e[0].pipe(e[1]),t(e.slice(1)))}(e);for(var r=1;r<e.length-1;r++)e[r].on("error",t);return a};var bn={},wn=Object.freeze({default:bn}),kn=wn&&bn||wn;St(function(t){!function(e){function n(t,e){if(e=e||{type:"Array"},void 0!==Et&&"number"==typeof Et.pid)return function(t,e){var n=kn.randomBytes(t);switch(e.type){case"Array":return[].slice.call(n);case"Buffer":return n;case"Uint8Array":for(var i=new Uint8Array(t),a=0;a<t;++a)i[a]=n.readUInt8(a);return i;default:throw new Error(e.type+" is unsupported.")}}(t,e);if(!(window.crypto||window.msCrypto))throw new Error("Your browser does not support window.crypto.");return function(t,e){var n=new Uint8Array(t);switch((window.crypto||window.msCrypto).getRandomValues(n),e.type){case"Array":return[].slice.call(n);case"Buffer":try{new m(1)}catch(e){throw new Error("Buffer not supported in this environment. Use Node.js or Browserify for browser support.")}return new m(n);case"Uint8Array":return n;default:throw new Error(e.type+" is unsupported.")}}(t,e)}t.exports?t.exports=n:e.secureRandom=n,n.randomArray=function(t){return n(t,{type:"Array"})},n.randomUint8Array=function(t){return n(t,{type:"Uint8Array"})},n.randomBuffer=function(t){return n(t,{type:"Buffer"})}}(_t)});class En{constructor(t){let e,n,i,a,r;this._tables[0][0][0]||this._precompute();const o=this._tables[0][4],s=this._tables[1],p=t.length;let c=1;if(4!==p&&6!==p&&8!==p)throw new Error("invalid aes key size");for(this._key=[a=t.slice(0),r=[]],e=p;e<4*p+28;e++)i=a[e-1],(0==e%p||8===p&&4==e%p)&&(i=o[i>>>24]<<24^o[255&i>>16]<<16^o[255&i>>8]<<8^o[255&i],0==e%p&&(i=i<<8^i>>>24^c<<24,c=c<<1^283*(c>>7))),a[e]=a[e-p]^i;for(n=0;e;n++,e--)i=a[3&n?e:e-4],r[n]=4>=e||4>n?i:s[0][o[i>>>24]]^s[1][o[255&i>>16]]^s[2][o[255&i>>8]]^s[3][o[255&i]]}encrypt(t){return this._crypt(t,0)}decrypt(t){return this._crypt(t,1)}_precompute(){const t=this._tables[0],e=this._tables[1],n=t[4],i=e[4];let a,r,o;const s=[],p=[];let c,l,d,u,h,f;for(a=0;256>a;a++)p[(s[a]=a<<1^283*(a>>7))^a]=a;for(r=o=0;!n[r];r^=c||1,o=p[o]||1)for(u=(u=o^o<<1^o<<2^o<<3^o<<4)>>8^255&u^99,n[r]=u,i[u]=r,f=16843009*(d=s[l=s[c=s[r]]])^65537*l^257*c^16843008*r,h=257*s[u]^16843008*u,a=0;4>a;a++)t[a][r]=h=h<<24^h>>>8,e[a][u]=f=f<<24^f>>>8;for(a=0;5>a;a++)t[a]=t[a].slice(0),e[a]=e[a].slice(0)}_crypt(t,e){if(4!==t.length)throw new Error("invalid aes block size");const n=this._key[e];let i,a,r,o=t[0]^n[0],s=t[e?3:1]^n[1],p=t[2]^n[2],c=t[e?1:3]^n[3];const l=n.length/4-2;let d,u=4;const h=[0,0,0,0],f=this._tables[e],m=f[0],v=f[1],g=f[2],x=f[3],y=f[4];for(d=0;d<l;d++)i=m[o>>>24]^v[255&s>>16]^g[255&p>>8]^x[255&c]^n[u],a=m[s>>>24]^v[255&p>>16]^g[255&c>>8]^x[255&o]^n[u+1],r=m[p>>>24]^v[255&c>>16]^g[255&o>>8]^x[255&s]^n[u+2],c=m[c>>>24]^v[255&o>>16]^g[255&s>>8]^x[255&p]^n[u+3],u+=4,o=i,s=a,p=r;for(d=0;4>d;d++)h[e?3&-d:d]=y[o>>>24]<<24^y[255&s>>16]<<16^y[255&p>>8]<<8^y[255&c]^n[u++],i=o,o=s,s=p,p=c,c=i;return h}}En.prototype._tables=[[[],[],[],[],[]],[[],[],[],[],[]]];class _n{constructor(t){const e=[];for(let n=0;4>n;n++)e[n]=t.readInt32BE(4*n);this.aes=new En(e)}encryptCBC(t){let e,n,i=[0,0,0,0],a=[,,,,];for(e=0;e<t.length;e+=16){for(n=0;4>n;n++)a[n]=t.readUInt32BE(e+4*n)^i[n];for(i=this.aes.encrypt(a),n=0;4>n;n++)t.writeInt32BE(i[n],e+4*n)}}decryptCBC(t){let e,n,i=[0,0,0,0],a=[,,,,],r=[,,,,];for(e=0;e<t.length;e+=16){for(n=0;4>n;n++)a[n]=t.readUInt32BE(e+4*n);for(r=a,a=this.aes.decrypt(a),n=0;4>n;n++)t.writeInt32BE(a[n]^i[n],e+4*n);i=r}}stringhash(t){let e=[0,0,0,0];for(let n=0;n<t.length;n+=4)e[3&n/4]^=t.readInt32BE(n);for(let t=16384;t--;)e=this.aes.encrypt(e);const n=m.allocUnsafe(8);return n.writeInt32BE(e[0],0),n.writeInt32BE(e[2],4),n}encryptECB(t){let e=[];for(let n=0;n<t.length;n+=16)e[0]=t.readInt32BE(n),e[1]=t.readInt32BE(n+4),e[2]=t.readInt32BE(n+8),e[3]=t.readInt32BE(n+12),e=this.aes.encrypt(e),t.writeInt32BE(e[0],n),t.writeInt32BE(e[1],n+4),t.writeInt32BE(e[2],n+8),t.writeInt32BE(e[3],n+12);return t}decryptECB(t){let e=[];for(let n=0;n<t.length;n+=16)e[0]=t.readInt32BE(n),e[1]=t.readInt32BE(n+4),e[2]=t.readInt32BE(n+8),e[3]=t.readInt32BE(n+12),e=this.aes.decrypt(e),t.writeInt32BE(e[0],n),t.writeInt32BE(e[1],n+4),t.writeInt32BE(e[2],n+8),t.writeInt32BE(e[3],n+12);return t}}class Sn{constructor(t,e,n=0){this.aes=t,this.nonce=e.slice(0,8),this.increment=131072,this.posNext=this.increment,this.pos=0,this.ctr=m.alloc(16),this.nonce.copy(this.ctr,0),this.mac=m.alloc(16),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),this.macs=[],this.incrementCTR(n/16)}condensedMac(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);let t=m.alloc(16);for(let e=0;e<this.macs.length;e++){for(let n=0;16>n;n++)t[n]^=this.macs[e][n];this.aes.encryptECB(t)}const e=m.allocUnsafe(8);return e.writeInt32BE(t.readInt32BE(0)^t.readInt32BE(4),0),e.writeInt32BE(t.readInt32BE(8)^t.readInt32BE(12),4),e}encrypt(t){for(let e=0;e<t.length;e+=16){const n=this.aes.encryptECB(m.from(this.ctr));for(let i=0;16>i;i++)this.mac[i]^=t[e+i],t[e+i]^=n[i];this.aes.encryptECB(this.mac),this.incrementCTR()}}decrypt(t){for(let e=0;e<t.length;e+=16){const n=this.aes.encryptECB(m.from(this.ctr));for(let i=0;16>i;i++)t[e+i]^=n[i],this.mac[i]^=t[e+i];this.aes.encryptECB(this.mac),this.incrementCTR()}}incrementCTR(t=1){for(let e=0;e<t;e++)this.checkMacBounding();const e=this.ctr;for(let n,i=15;0!==t;)n=(t+e[i])%256,t=Math.floor((t+e[i])/256),e[i]=n,0>(i-=1)&&(i=15)}checkMacBounding(){this.pos+=16,this.pos>=this.posNext&&(this.macs.push(m.from(this.mac)),this.nonce.copy(this.mac,0),this.nonce.copy(this.mac,8),1048576>this.increment&&(this.increment+=131072),this.posNext+=this.increment)}}function Rn(t){return"string"==typeof t?jn(t):t}function jn(t){return t=(t+="==".substr(3&2-3*t.length)).replace(/-/g,"+").replace(/_/g,"/").replace(/,/g,""),m.from(t,"base64")}function An(t){return new _n(function(t){const e=m.alloc(32);t.copy(e);for(let t=0;16>t;t++)e.writeUInt8(e.readUInt8(t)^e.readUInt8(16+t,!0),t);return e}(t).slice(0,16))}function zn(t,e={}){const n=e.start||0;if(0!==n&&(e.disableVerification=!0),0!=n%16)throw Error("start argument of megaDecrypt must be a multiple of 16");t=Rn(t);let i=sn(function(t){r.decrypt(t),this.emit("data",t)},function(){return r.condensedMac().equals(t.slice(24))||e.disableVerification?void this.emit("end"):this.emit("error",Error("MAC verification failed"))});const a=An(t),r=new Sn(a,t.slice(16),n);return i=yn(function(t){let e;return sn(function(n){e&&(n=m.concat([e,n]));const i=Math.floor(n.length/t)*t;i?n.length>i?(e=n.slice(i),this.emit("data",n.slice(0,i))):(e=void 0,this.emit("data",n)):e=e?m.concat([e,n]):n},function(){e&&this.emit("data",e),this.emit("end")})}(16),i)}const Cn="undefined"==typeof window?self:window;function Tn(t,e){if(!t)throw Error("No options given");let n=t.onResponse;if((t="string"==typeof t?{uri:t}:JSON.parse(JSON.stringify(t))).onResponse=n,t.verbose&&(Tn.log=function(){const t={},e=["trace","debug","info","warn","error"];let n,i;for(i=0;i<e.length;i++)t[n=e[i]]=In,"undefined"!=typeof console&&console&&console[n]&&(t[n]=qn(console,n));return t}()),t.url&&(t.uri=t.url,delete t.url),!t.uri&&""!==t.uri)throw Error("options.uri is a required argument");if("string"!=typeof t.uri)throw Error("options.uri must be a string");const i=["proxy","_redirectsFollowed","maxRedirects","followRedirect"];for(let e=0;e<i.length;e++)if(t[i[e]])throw Error("options."+i[e]+" is not supported");if(t.callback=e||In,t.method=t.method||"GET",t.headers=t.headers||{},t.body=t.body||null,t.timeout=t.timeout||Tn.DEFAULT_TIMEOUT,t.headers.host)throw Error("Options.headers.host is not supported");t.json&&(t.headers.accept=t.headers.accept||"application/json","GET"!==t.method&&(t.headers["content-type"]="application/json"),"boolean"==typeof t.json?"string"!=typeof t.body&&(t.body=JSON.stringify(t.body)):t.body=JSON.stringify(t.json));const a=t=>{const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")};if(t.qs){const e="string"==typeof t.qs?t.qs:a(t.qs);t.uri=-1===t.uri.indexOf("?")?t.uri+"?"+e:t.uri+"&"+e}if(t.form){if("string"==typeof t.form)throw Error("form name unsupported");if("POST"===t.method){const e=(t.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(t.headers["content-type"]=e,e){case"application/x-www-form-urlencoded":t.body=a(t.form).replace(/%20/g,"+");break;case"multipart/form-data":const n=(t=>{const e={boundry:"-------------------------------"+Math.floor(1e9*Math.random())},n=[];for(let i in t)t.hasOwnProperty(i)&&n.push("--"+e.boundry+'\nContent-Disposition: form-data; name="'+i+'"\n\n'+t[i]+"\n");return n.push("--"+e.boundry+"--"),e.body=n.join(""),e.length=e.body.length,e.type="multipart/form-data; boundary="+e.boundry,e})(t.form);t.body=n.body,t.headers["content-type"]=n.type;break;default:throw Error("unsupported encoding:"+e)}}}return t.onResponse=t.onResponse||In,!0===t.onResponse&&(t.onResponse=e,t.callback=In),!t.headers.authorization&&t.auth&&(t.headers.authorization="Basic "+m.from(t.auth.username+":"+t.auth.password,"utf-8").toString("base64")),"function"!=typeof fetch||"function"!=typeof ReadableStream&&Cn.XMLHttpRequest?function(t){function e(){if(!p.response){if(p.response=!0,Tn.log.debug("Got response",{id:i.id,status:i.status}),clearTimeout(i.timeoutTimer),i.statusCode=i.status,a&&0===i.statusCode){const e=new Error("CORS request rejected: "+t.uri);return e.cors="rejected",p.loading=!0,p.end=!0,c.emit("error",e),t.callback(e,i)}t.onResponse(null,i)}}function n(){if(i.response){const t=i.responseText.substr(s);s+=t.length,0<t.length&&c.push(m.from(t,"ascii"))}p.loading||(p.loading=!0,Tn.log.debug("Response body loading",{id:i.id}))}const i=new Cn.XMLHttpRequest,a=function(t){const e=/^([\w+.-]+:)(?:\/\/([^/?#:]*)(?::(\d+))?)?/;let n;try{n=Cn.location.href}catch(e){(n=document.createElement("a")).href="",n=n.href}const i=e.exec(n.toLowerCase())||[],a=e.exec(t.toLowerCase());return!(!a||a[1]===i[1]&&a[2]===i[2]&&(a[3]||("http:"===a[1]?80:443))===(i[3]||("http:"===i[1]?80:443)))}(t.uri),r="withCredentials"in i;let o=!1,s=0;if(Ln+=1,i.seq_id=Ln,i.id=Ln+": "+t.method+" "+t.uri,i._id=i.id,a&&!r){const e=new Error("Browser does not support cross-origin request: "+t.uri);return e.cors="unsupported",t.callback(e,i)}i.timeoutTimer=setTimeout(function(){o=!0;const e=new Error("ETIMEDOUT");return e.code="ETIMEDOUT",e.duration=t.timeout,Tn.log.error("Timeout",{id:i._id,milliseconds:t.timeout}),t.callback(e,i)},t.timeout);const p={response:!1,loading:!1,end:!1};i.overrideMimeType("text/plain; charset=x-user-defined"),i.onreadystatechange=function(){if(o)return Tn.log.debug("Ignoring timed out state change",{state:i.readyState,id:i.id});if(Tn.log.debug("State change",{state:i.readyState,id:i.id,timedOut:o}),i.readyState===Cn.XMLHttpRequest.OPENED)for(let e in Tn.log.debug("Request started",{id:i.id}),t.headers)i.setRequestHeader(e,t.headers[e]);else i.readyState===Cn.XMLHttpRequest.HEADERS_RECEIVED?e():i.readyState===Cn.XMLHttpRequest.LOADING?(e(),n()):i.readyState===Cn.XMLHttpRequest.DONE&&(e(),n(),function(){if(!p.end){if(p.end=!0,Tn.log.debug("Request done",{id:i.id}),c.push(null),i.body=i.responseText,t.json)try{i.body=JSON.parse(i.responseText)}catch(e){return c.emit("error",e),t.callback(e,i)}t.callback(null,i,i.body)}}())},i.open(t.method,t.uri,!0),a&&(i.withCredentials=!!t.withCredentials),i.send(t.body);const c=new an.Readable;return c._read=In,c}(t):function(t){const e={};Ln+=1,e.seq_id=Ln,e.id=Ln+": "+t.method+" "+t.uri,e._id=e.id,Ln+=1;const n={};t.headers&&(n.headers=t.headers),t.method&&(n.method=t.method),t.body&&(n.body=t.body);const i=new an.Readable;return i._read=In,Cn.fetch(t.uri||t.url,n).then(n=>{e.statusCode=e.status=n.status,i.emit("response",{statusCode:n.status,statusMessage:n.statusText,headers:Array.from(n.headers).reduce((t,[e,n])=>(t[e]=n,t),{})}),t.callback&&n.clone()[t.json?"json":"text"]().then(n=>t.callback(null,e,n)).catch(e=>t.callback(e));const a=n.body.getReader();!function t(){a.read().then(function(e){e.done?i.push(null):(i.push(m.from(e.value)),t())})}()},e=>{i.emit("error",e),t.callback(e)}),i}(t)}Tn.log={trace:In,debug:In,info:In,warn:In,error:In};let Ln=0;Tn.withCredentials=!1,Tn.DEFAULT_TIMEOUT=18e4,Tn.defaults=(t=>{const e=e=>(n,i)=>{for(let e in n="string"==typeof n?{uri:n}:JSON.parse(JSON.stringify(n)),t)void 0===n[e]&&(n[e]=t[e]);return e(n,i)},n=e(Tn);return n.get=e(Tn.get),n.post=e(Tn.post),n.put=e(Tn.put),n.head=e(Tn.head),n});function In(){}function qn(t,e){return function(n,i){return"object"==typeof i&&(n+=" "+JSON.stringify(i)),t[e](n)}}function On(t,e){return Object.prototype.hasOwnProperty.call(t,e)}["get","put","post","head"].forEach(function(t){const e=t.toUpperCase();Tn[t.toLowerCase()]=function(t){"string"==typeof t?t={method:e,uri:t}:(t=JSON.parse(JSON.stringify(t))).method=e;const n=[t].concat(Array.prototype.slice.apply(arguments,[1]));return Tn.apply(this,n)}});var Mn=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function Bn(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function Un(t,e,n,i){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?Dn(Pn(t),function(i){var a=encodeURIComponent(Bn(i))+n;return Mn(t[i])?Dn(t[i],function(t){return a+encodeURIComponent(Bn(t))}).join(e):a+encodeURIComponent(Bn(t[i]))}).join(e):i?encodeURIComponent(Bn(i))+n+encodeURIComponent(Bn(t)):""}function Dn(t,e){if(t.map)return t.map(e);for(var n=[],i=0;i<t.length;i++)n.push(e(t[i],i));return n}var Pn=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e};function Nn(t,e,n,i){e=e||"&",n=n||"=";var a={};if("string"!=typeof t||0===t.length)return a;var r=/\+/g;t=t.split(e);var o=1e3;i&&"number"==typeof i.maxKeys&&(o=i.maxKeys);var s=t.length;0<o&&s>o&&(s=o);for(var p=0;p<s;++p){var c,l,d,u,h=t[p].replace(r,"%20"),f=h.indexOf(n);0<=f?(c=h.substr(0,f),l=h.substr(f+1)):(c=h,l=""),d=decodeURIComponent(c),u=decodeURIComponent(l),On(a,d)?Mn(a[d])?a[d].push(u):a[d]=[a[d],u]:a[d]=u}return a}var Yn={encode:Un,stringify:Un,decode:Nn,parse:Nn};const Fn={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried 4 times.",4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later"};class $n extends jt{constructor(t){super(),this.keepalive=t,this.counterId=Math.random().toString().substr(2,10),this.gateway="https://eu.api.mega.co.nz/",this.requestModule=Tn}request(t,e,n=0){const i={id:(this.counterId++).toString()};this.sid&&(i.sid=this.sid),"object"==typeof t._querystring&&(Object.assign(i,t._querystring),delete t._querystring),this.requestModule({uri:`${this.gateway}cs`,qs:i,method:"POST",json:[t],gzip:!0},(i,a,r)=>{if(i)return e(i);if(!r)return e(Error("Empty response"));if(r.length&&(r=r[0]),!i&&"number"==typeof r&&0>r){if(-3===r&&4>n)return setTimeout(()=>{this.request(t,e,n+1)},1e3*Math.pow(2,n+1));i=Error(Fn[-r])}else this.keepalive&&r&&r.sn&&this.pull(r.sn);e(i,r)})}pull(t,e=0){this.sn=this.requestModule({uri:`${this.gateway}sc`,qs:{sn:t,sid:this.sid},method:"POST",json:!0,body:`sc?${Yn.stringify({sn:t})}`},(n,i,a)=>{if(this.sn=void 0,!n&&"number"==typeof a&&0>a){if(-3===a&&4>e)return setTimeout(()=>{this.pull(t,e+1)},1e3*Math.pow(2,e+1));n=Error(Fn[-a])}if(n)throw n;a.w?this.wait(a.w,t):a.sn&&(a.a&&this.emit("sc",a.a),this.pull(a.sn))})}wait(t,e){this.sn=this.requestModule({uri:t,method:"POST"},t=>{if(this.sn=void 0,t)throw Error("mega server wait req failed");this.pull(e)})}close(){this.sn&&this.sn.abort()}}var Wn=fe&&he||fe,Gn=on.Stream,Jn=Hn;function Hn(){this.source=null,this.dataSize=0,this.maxDataSize=1048576,this.pauseStream=!0,this._maxDataSizeExceeded=!1,this._released=!1,this._bufferedEvents=[]}Wn.inherits(Hn,Gn),Hn.create=function(t,e){var n=new this;for(var i in e=e||{})n[i]=e[i];n.source=t;var a=t.emit;return t.emit=function(){return n._handleEmit(arguments),a.apply(t,arguments)},t.on("error",function(){}),n.pauseStream&&t.pause(),n},Object.defineProperty(Hn.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}}),Hn.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)},Hn.prototype.resume=function(){this._released||this.release(),this.source.resume()},Hn.prototype.pause=function(){this.source.pause()},Hn.prototype.release=function(){this._released=!0,this._bufferedEvents.forEach(function(t){this.emit.apply(this,t)}.bind(this)),this._bufferedEvents=[]},Hn.prototype.pipe=function(){var t=Gn.prototype.pipe.apply(this,arguments);return this.resume(),t},Hn.prototype._handleEmit=function(t){return this._released?void this.emit.apply(this,t):("data"===t[0]&&(this.dataSize+=t[1].length,this._checkIfMaxDataSizeExceeded()),void this._bufferedEvents.push(t))},Hn.prototype._checkIfMaxDataSizeExceeded=function(){if(!(this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize)){this._maxDataSizeExceeded=!0;var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this.emit("error",new Error(t))}};var Kn=Object.freeze({default:Jn,__moduleExports:Jn}),Vn=Kn&&Jn||Kn,Xn=on.Stream,Zn=Qn;function Qn(){this.writable=!1,this.readable=!0,this.dataSize=0,this.maxDataSize=2097152,this.pauseStreams=!0,this._released=!1,this._streams=[],this._currentStream=null}Wn.inherits(Qn,Xn),Qn.create=function(t){var e=new this;for(var n in t=t||{})e[n]=t[n];return e},Qn.isStreamLike=function(t){return"function"!=typeof t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t&&!V(t)},Qn.prototype.append=function(t){if(Qn.isStreamLike(t)){if(!(t instanceof Vn)){var e=Vn.create(t,{maxDataSize:1/0,pauseStream:this.pauseStreams});t.on("data",this._checkDataSize.bind(this)),t=e}this._handleErrors(t),this.pauseStreams&&t.pause()}return this._streams.push(t),this},Qn.prototype.pipe=function(t,e){return Xn.prototype.pipe.call(this,t,e),this.resume(),t},Qn.prototype._getNext=function(){this._currentStream=null;var t=this._streams.shift();void 0!==t?"function"==typeof t?t(function(t){Qn.isStreamLike(t)&&(t.on("data",this._checkDataSize.bind(this)),this._handleErrors(t)),this._pipeNext(t)}.bind(this)):this._pipeNext(t):this.end()},Qn.prototype._pipeNext=function(t){if(this._currentStream=t,Qn.isStreamLike(t))return t.on("end",this._getNext.bind(this)),void t.pipe(this,{end:!1});this.write(t),this._getNext()},Qn.prototype._handleErrors=function(t){var e=this;t.on("error",function(t){e._emitError(t)})},Qn.prototype.write=function(t){this.emit("data",t)},Qn.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))},Qn.prototype.resume=function(){this._released||(this._released=!0,this.writable=!0,this._getNext()),this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume(),this.emit("resume")},Qn.prototype.end=function(){this._reset(),this.emit("end")},Qn.prototype.destroy=function(){this._reset(),this.emit("close")},Qn.prototype._reset=function(){this.writable=!1,this._streams=[],this._currentStream=null},Qn.prototype._checkDataSize=function(){if(this._updateDataSize(),!(this.dataSize<=this.maxDataSize)){var t="DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded.";this._emitError(new Error(t))}},Qn.prototype._updateDataSize=function(){this.dataSize=0;var t=this;this._streams.forEach(function(e){e.dataSize&&(t.dataSize+=e.dataSize)}),this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=this._currentStream.dataSize)},Qn.prototype._emitError=function(t){this._reset(),this.emit("error",t)};var ti=/[^\x20-\x7E]/,ei=/[\x2E\u3002\uFF0E\uFF61]/g,ni={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},ii=Math.floor,ai=String.fromCharCode;function ri(t){throw new RangeError(ni[t])}function oi(t,e){return t+22+75*(26>t)-((0!=e)<<5)}function si(t,e,n){var i=0;for(t=n?ii(t/700):t>>1,t+=ii(t/e);t>455;i+=36)t=ii(t/35);return ii(i+36*t/(t+38))}function pi(t){return function(t,e){var n=t.split("@"),i="";1<n.length&&(i=n[0]+"@",t=n[1]);var a=function(t,e){for(var n=t.length,i=[];n--;)i[n]=e(t[n]);return i}((t=t.replace(ei,".")).split("."),e).join(".");return i+a}(t,function(t){return ti.test(t)?"xn--"+function(t){var e,n,i,a,r,o,s,p,c,l,d,u,h,f,m,v=[];for(u=(t=function(t){for(var e,n,i=[],a=0,r=t.length;a<r;)55296<=(e=t.charCodeAt(a++))&&56319>=e&&a<r?56320==(64512&(n=t.charCodeAt(a++)))?i.push(((1023&e)<<10)+(1023&n)+65536):(i.push(e),a--):i.push(e);return i}(t)).length,e=128,n=0,r=72,o=0;o<u;++o)128>(d=t[o])&&v.push(ai(d));for(i=a=v.length,a&&v.push("-");i<u;){for(s=2147483647,o=0;o<u;++o)(d=t[o])>=e&&d<s&&(s=d);for(s-e>ii((2147483647-n)/(h=i+1))&&ri("overflow"),n+=(s-e)*h,e=s,o=0;o<u;++o)if((d=t[o])<e&&2147483647<++n&&ri("overflow"),d==e){for(p=n,c=36;!(p<(l=c<=r?1:c>=r+26?26:c-r));c+=36)m=p-l,f=36-l,v.push(ai(oi(l+m%f,0))),p=ii(m/f);v.push(ai(oi(p,0))),r=si(n,h,i==a),n=0,++i}++n,++e}return v.join("")}(t):t})}function ci(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var li=/^([a-z0-9.+-]+:)/i,di=/:[0-9]*$/,ui=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,hi=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),fi=["'"].concat(hi),mi=["%","/","?",";","#"].concat(fi),vi=["/","?","#"],gi=/^[+a-z0-9A-Z_-]{0,63}$/,xi=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,yi={javascript:!0,"javascript:":!0},bi={javascript:!0,"javascript:":!0},wi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ki(t,e,n){if(t&&ee(t)&&t instanceof ci)return t;var i=new ci;return i.parse(t,e,n),i}function Ei(t){var e=t.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var n=t.protocol||"",i=t.pathname||"",a=t.hash||"",r=!1,o="";t.host?r=e+t.host:t.hostname&&(r=e+(-1===t.hostname.indexOf(":")?t.hostname:"["+this.hostname+"]"),t.port&&(r+=":"+t.port)),t.query&&ee(t.query)&&Object.keys(t.query).length&&(o=Un(t.query));var s=t.search||o&&"?"+o||"";return n&&":"!==n.substr(-1)&&(n+=":"),t.slashes||(!n||wi[n])&&0!=r?(r="//"+(r||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):!r&&(r=""),a&&"#"!==a.charAt(0)&&(a="#"+a),s&&"?"!==s.charAt(0)&&(s="?"+s),n+r+(i=i.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(s=s.replace("#","%23"))+a}function _i(t){var e=t.host,n=di.exec(e);n&&(":"!==(n=n[0])&&(t.port=n.substr(1)),e=e.substr(0,e.length-n.length)),e&&(t.hostname=e)}ci.prototype.parse=function(t,e,n){return function(t,e,n,i){if(!Xt(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),r=-1!==a&&a<e.indexOf("#")?"?":"#",o=e.split(r);o[0]=o[0].replace(/\\/g,"/");var s=e=o.join(r);if(s=s.trim(),!i&&1===e.split("#").length){var p=ui.exec(s);if(p)return t.path=s,t.href=s,t.pathname=p[1],p[2]?(t.search=p[2],t.query=n?Nn(t.search.substr(1)):t.search.substr(1)):n&&(t.search="",t.query={}),t}var c,l,d,u,h=li.exec(s);if(h){var f=(h=h[0]).toLowerCase();t.protocol=f,s=s.substr(h.length)}if(i||h||s.match(/^\/\/[^@\/]+@[^@\/]+/)){var m="//"===s.substr(0,2);m&&(!h||!bi[h])&&(s=s.substr(2),t.slashes=!0)}if(!bi[h]&&(m||h&&!wi[h])){var v,g,x=-1;for(c=0;c<vi.length;c++)-1!==(l=s.indexOf(vi[c]))&&(-1===x||l<x)&&(x=l);for(-1!==(g=-1===x?s.lastIndexOf("@"):s.lastIndexOf("@",x))&&(v=s.slice(0,g),s=s.slice(g+1),t.auth=decodeURIComponent(v)),x=-1,c=0;c<mi.length;c++)-1!==(l=s.indexOf(mi[c]))&&(-1===x||l<x)&&(x=l);-1===x&&(x=s.length),t.host=s.slice(0,x),s=s.slice(x),_i(t),t.hostname=t.hostname||"";var y="["===t.hostname[0]&&"]"===t.hostname[t.hostname.length-1];if(!y){var b=t.hostname.split(/\./);for(c=0,d=b.length;c<d;c++){var w=b[c];if(w&&!w.match(gi)){for(var k="",E=0,_=w.length;E<_;E++)k+=127<w.charCodeAt(E)?"x":w[E];if(!k.match(gi)){var S=b.slice(0,c),R=b.slice(c+1),j=w.match(xi);j&&(S.push(j[1]),R.unshift(j[2])),R.length&&(s="/"+R.join(".")+s),t.hostname=S.join(".");break}}}}t.hostname=255<t.hostname.length?"":t.hostname.toLowerCase(),y||(t.hostname=pi(t.hostname)),u=t.port?":"+t.port:"";var A=t.hostname||"";t.host=A+u,t.href+=t.host,y&&(t.hostname=t.hostname.substr(1,t.hostname.length-2),"/"!==s[0]&&(s="/"+s))}if(!yi[f])for(c=0,d=fi.length;c<d;c++){var z=fi[c];if(-1!==s.indexOf(z)){var C=encodeURIComponent(z);C===z&&(C=escape(z)),s=s.split(z).join(C)}}var T=s.indexOf("#");-1!==T&&(t.hash=s.substr(T),s=s.slice(0,T));var L=s.indexOf("?");if(-1===L?n&&(t.search="",t.query={}):(t.search=s.substr(L),t.query=s.substr(L+1),n&&(t.query=Nn(t.query)),s=s.slice(0,L)),s&&(t.pathname=s),wi[f]&&t.hostname&&!t.pathname&&(t.pathname="/"),t.pathname||t.search){u=t.pathname||"";var I=t.search||"";t.path=u+I}return t.href=Ei(t),t}(this,t,e,n)},ci.prototype.format=function(){return Ei(this)},ci.prototype.resolve=function(t){return this.resolveObject(ki(t,!1,!0)).format()},ci.prototype.resolveObject=function(t){if(Xt(t)){var e=new ci;e.parse(t,!1,!0),t=e}for(var n,i=new ci,a=Object.keys(this),r=0;r<a.length;r++)i[n=a[r]]=this[n];if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var o,s=Object.keys(t),p=0;p<s.length;p++)"protocol"!==(o=s[p])&&(i[o]=t[o]);return wi[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}var c;if(t.protocol&&t.protocol!==i.protocol){if(!wi[t.protocol]){for(var l,d=Object.keys(t),u=0;u<d.length;u++)i[l=d[u]]=t[l];return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||bi[t.protocol])i.pathname=t.pathname;else{for(c=(t.pathname||"").split("/");c.length&&!(t.host=c.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==c[0]&&c.unshift(""),2>c.length&&c.unshift(""),i.pathname=c.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var h=i.pathname||"",f=i.search||"";i.path=h+f}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var m,v=i.pathname&&"/"===i.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),x=g||v||i.host&&t.pathname,y=x,b=i.pathname&&i.pathname.split("/")||[],w=i.protocol&&!wi[i.protocol];if(c=t.pathname&&t.pathname.split("/")||[],w&&(i.hostname="",i.port=null,i.host&&(""===b[0]?b[0]=i.host:b.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===c[0]?c[0]=t.host:c.unshift(t.host)),t.host=null),x=x&&(""===c[0]||""===b[0])),g)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,b=c;else if(c.length)b||(b=[]),b.pop(),b=b.concat(c),i.search=t.search,i.query=t.query;else if(!Kt(t.search))return w&&(i.hostname=i.host=b.shift(),(m=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=m.shift(),i.host=i.hostname=m.shift())),i.search=t.search,i.query=t.query,Ht(i.pathname)&&Ht(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!b.length)return i.pathname=null,i.path=i.search?"/"+i.search:null,i.href=i.format(),i;for(var k=b.slice(-1)[0],E=(i.host||t.host||1<b.length)&&("."===k||".."===k)||""===k,_=0,S=b.length;0<=S;S--)"."===(k=b[S])?b.splice(S,1):".."===k?(b.splice(S,1),_++):_&&(b.splice(S,1),_--);if(!x&&!y)for(;_--;_)b.unshift("..");x&&""!==b[0]&&(!b[0]||"/"!==b[0].charAt(0))&&b.unshift(""),E&&"/"!==b.join("/").substr(-1)&&b.push("");var R=""===b[0]||b[0]&&"/"===b[0].charAt(0);return w&&(i.hostname=i.host=R?"":b.length?b.shift():"",(m=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=m.shift(),i.host=i.hostname=m.shift())),(x=x||i.host&&b.length)&&!R&&b.unshift(""),b.length?i.pathname=b.join("/"):(i.pathname=null,i.path=null),Ht(i.pathname)&&Ht(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},ci.prototype.parseHost=function(){return _i(this)};var Si=on.Transform;function Ri(t){return this instanceof Ri?(this._toSkip=t.skip,void Si.call(this,t)):new Ri(t)}Wn.inherits(Ri,Si),Ri.prototype._transform=function(t,e,n){0==this._toSkip?this.push(t):this._toSkip>t.length?this._toSkip-=t.length:(this._toSkip!==t.length&&this.push(t.slice(this._toSkip)),this._toSkip=0),n()};var ji=Ri;let Ai;class zi extends jt{constructor(t){super(),this.checkConstructorArgument(t.downloadId),this.checkConstructorArgument(t.key),this.checkConstructorArgument(t.loadedFile),this.downloadId=t.downloadId,this.key=t.key?Rn(t.key):null,this.type=t.directory?1:0,this.directory=!!t.directory,Ai||(Ai=new $n(!1)),this.api=Ai,this.loadedFile=t.loadedFile}checkConstructorArgument(t){if("string"==typeof t&&!/^[\w-]+$/.test(t))throw Error(`Invalid argument: "${t}"`)}loadMetadata(t,e){if(this.size=e.s||0,this.timestamp=e.ts||0,this.type=e.t,this.directory=!!e.t,this.owner=e.u,this.name=null,t&&e.k){const n=e.k.split(":");this.key=Rn(n[n.length-1]),t.decryptECB(this.key),e.a&&this.decryptAttributes(e.a)}}decryptAttributes(t){return this.key?(t=jn(t),An(this.key).decryptCBC(t),t=zi.unpackAttributes(t),this.parseAttributes(t),this):this}parseAttributes(t){this.attributes=t,this.name=t.n,this.label=Ci[t.lbl||0],this.favorited=!!t.fav}loadAttributes(t){"function"!=typeof t&&(t=(t=>{if(t)throw t}));const e=this.directory?{a:"f",c:1,ca:1,r:1,_querystring:{n:this.downloadId}}:{a:"g",p:this.downloadId};return this.api.request(e,(e,n)=>{if(e)return t(e);if(this.directory){const e=Object.create(null),i=n.f,a=i.find(t=>t.k&&t.h===t.k.split(":")[0]),r=this.key?new _n(this.key):null;this.nodeId=a.h,this.timestamp=a.ts,e[a.h]=this;for(let t of i){if(t===a)continue;const n=new zi(t,this.storage);n.loadMetadata(r,t),n.downloadId=[this.downloadId,t.h],e[t.h]=n}for(let t of i){const n=e[t.p];if(n){const i=e[t.h];n.children||(n.children=[]),n.children.push(i),i.parent=n}}if(this.loadMetadata(r,a),this.loadedFile){const n=e[this.loadedFile];void 0===n?t(Error("Node (file or folder) not found in folder")):t(null,n)}else t(null,this)}else{this.size=n.s;try{this.decryptAttributes(n.at)}catch(e){return t(e)}t(null,this)}}),this}download(t,e){"function"==typeof t&&(e=t,t={}),t||(t={});const n=t.start||0,i=t.returnCiphertext?n:n-n%16;let a=t.end||null;const r=t.maxConnections||4,o=t.initialChunkSize||131072,s=t.chunkSizeIncrement||131072,p=t.maxChunkSize||1048576,c={a:"g",g:1,ssl:2};if(this.nodeId?c.n=this.nodeId:Array.isArray(this.downloadId)?(c._querystring={n:this.downloadId[0]},c.n=this.downloadId[1]):c.p=this.downloadId,this.directory)throw Error("Can't download: folder download isn't supported");if(!this.key&&!t.returnCiphertext)throw Error("Can't download: key isn't defined");const l=this.key&&!t.returnCiphertext?zn(this.key,{start:i,disableVerification:0!==i||null!==a}):new nn,d=i===n?l:l.pipe(new ji({skip:n-i})),u=this.api||Ai,h=t.requestModule||this.api.requestModule;return u.request(c,(t,e)=>{function c(t){if(200!==t.statusCode){if(509===t.statusCode){const e=t.headers["x-mega-time-left"],n=Error("Bandwidth limit reached: "+e+" seconds until it resets");return n.timeLimit=e,void d.emit("error",n)}d.emit("error",Error("MEGA returned a "+t.statusCode+" status code"))}}function u(t){d.emit("error",Error("Connection error: "+t.message))}if(t)return d.emit("error",t);if("string"!=typeof e.g||"http"!==e.g.substr(0,4))return d.emit("error",Error("MEGA servers returned an invalid response, maybe caused by rate limit"));if(a||(a=e.s-1),n>a)return d.emit("error",Error("You can't download past the end of the file."));if(1===r){const t=h(e.g+"/"+i+"-"+a);t.on("error",u),t.on("response",c),t.pipe(l),d.on("close",()=>{t.abort()})}else{const t=Zn.create();let n=i,f=o,m=!1;d.on("error",()=>{m=!0}),d.on("close",()=>{m=!0});const v=function i(){if(!m){const r=Math.min(a,n+f-1);if(!(r<n)){const a=h(e.g+"/"+n+"-"+r);a.on("end",i),a.on("error",u),a.on("response",c),t.append(a),n=r+1,f<p&&(f+=s)}}};t.on("error",t=>d.emit("error",t));for(let t=0;t<r;t++)v();t.pipe(l)}let f=0;d.on("data",t=>{f+=t.length,d.emit("progress",{bytesLoaded:f,bytesTotal:e.s})})}),e&&function(t,e){const n=[];let i;t.on("data",function(t){n.push(t)}),t.on("end",function(){i||(i=!0,e(null,m.concat(n)))}),t.on("error",function(t){i||(i=!0,e(t))})}(d,e),d}link(t,e){1===arguments.length&&"function"==typeof t&&(e=t,t={noKey:!1}),"boolean"==typeof t&&(t={noKey:t});let n=`https://mega.nz/#${this.directory?"F":""}!${this.downloadId}`;!t.noKey&&this.key&&(n+=`!${function(t){return t.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(this.key)}`),!t.noKey&&this.loadedFile&&(n+=`!${this.loadedFile}`),e(null,n)}static fromURL(t){if("object"==typeof t)return new zi(t);const e=ki(t);if("mega.nz"!==e.hostname&&"mega.co.nz"!==e.hostname)throw Error("Invalid URL: wrong hostname");if(!e.hash)throw Error("Invalid URL: no hash");const n=e.hash.split("!");if("#"!==n[0]&&"#F"!==n[0])throw Error("Invalid URL: format not recognized");if(1>=n.length)throw Error("Invalid URL: too few arguments");if(n.length>=("#"===n[0]?4:5))throw Error("Invalid URL: too many arguments");return new zi({downloadId:n[1],key:n[2],directory:"#F"===n[0],loadedFile:n[3]})}static unpackAttributes(t){let e=0;for(;e<t.length&&t.readUInt8(e);)e++;if('MEGA{"'!==(t=t.slice(0,e).toString()).substr(0,6))throw Error("Attributes could not be decrypted with provided key.");return JSON.parse(t.substr(4))}}const Ci=["","red","orange","yellow","green","blue","purple","grey"];var Ti=/["'&<>]/,Li=function(t){var e,n=""+t,i=Ti.exec(n);if(!i)return n;var a="",r=0,o=0;for(r=i.index;r<n.length;r++){switch(n.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}o!==r&&(a+=n.substring(o,r)),o=r+1,a+=e}return o!==r?a+n.substring(o,r):a};var Ii={ez:"application/andrew-inset",aw:"application/applixware",atom:"application/atom+xml",atomcat:"application/atomcat+xml",atomsvc:"application/atomsvc+xml",bdoc:"application/x-bdoc",ccxml:"application/ccxml+xml",cdmia:"application/cdmi-capability",cdmic:"application/cdmi-container",cdmid:"application/cdmi-domain",cdmio:"application/cdmi-object",cdmiq:"application/cdmi-queue",cu:"application/cu-seeme",mpd:"application/dash+xml",davmount:"application/davmount+xml",dbk:"application/docbook+xml",dssc:"application/dssc+der",xdssc:"application/dssc+xml",ecma:"application/ecmascript",emma:"application/emma+xml",epub:"application/epub+zip",exi:"application/exi",pfr:"application/font-tdpfr",woff:"font/woff",geojson:"application/geo+json",gml:"application/gml+xml",gpx:"application/gpx+xml",gxf:"application/gxf",gz:"application/gzip",hjson:"application/hjson",stk:"application/hyperstudio",ink:"application/inkml+xml",inkml:"application/inkml+xml",ipfix:"application/ipfix",jar:"application/java-archive",war:"application/java-archive",ear:"application/java-archive",ser:"application/java-serialized-object",js:"application/javascript",mjs:"application/javascript",json:"application/json",map:"application/json",json5:"application/json5",jsonml:"application/jsonml+json",jsonld:"application/ld+json",lostxml:"application/lost+xml",hqx:"application/mac-binhex40",cpt:"application/mac-compactpro",mads:"application/mads+xml",webmanifest:"application/manifest+json",mrc:"application/marc",mrcx:"application/marcxml+xml",ma:"application/mathematica",nb:"application/mathematica",mb:"application/mathematica",mathml:"application/mathml+xml",mbox:"application/mbox",mscml:"application/mediaservercontrol+xml",metalink:"application/metalink+xml",meta4:"application/metalink4+xml",mets:"application/mets+xml",mods:"application/mods+xml",m21:"application/mp21",mp21:"application/mp21",mp4s:"application/mp4",m4p:"application/mp4",doc:"application/msword",dot:"application/msword",mxf:"application/mxf",bin:"application/octet-stream",dms:"application/octet-stream",lrf:"application/octet-stream",mar:"application/octet-stream",so:"application/octet-stream",dist:"application/octet-stream",distz:"application/octet-stream",pkg:"application/octet-stream",bpk:"application/octet-stream",dump:"application/octet-stream",elc:"application/octet-stream",deploy:"application/octet-stream",exe:"application/x-msdownload",dll:"application/x-msdownload",deb:"application/x-debian-package",dmg:"application/x-apple-diskimage",iso:"application/x-iso9660-image",img:"application/octet-stream",msi:"application/x-msdownload",msp:"application/octet-stream",msm:"application/octet-stream",buffer:"application/octet-stream",oda:"application/oda",opf:"application/oebps-package+xml",ogx:"application/ogg",omdoc:"application/omdoc+xml",onetoc:"application/onenote",onetoc2:"application/onenote",onetmp:"application/onenote",onepkg:"application/onenote",oxps:"application/oxps",xer:"application/patch-ops-error+xml",pdf:"application/pdf",pgp:"application/pgp-encrypted",asc:"application/pgp-signature",sig:"application/pgp-signature",prf:"application/pics-rules",p10:"application/pkcs10",p7m:"application/pkcs7-mime",p7c:"application/pkcs7-mime",p7s:"application/pkcs7-signature",p8:"application/pkcs8",ac:"application/pkix-attr-cert",cer:"application/pkix-cert",crl:"application/pkix-crl",pkipath:"application/pkix-pkipath",pki:"application/pkixcmp",pls:"application/pls+xml",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",cww:"application/prs.cww",pskcxml:"application/pskc+xml",raml:"application/raml+yaml",rdf:"application/rdf+xml",rif:"application/reginfo+xml",rnc:"application/relax-ng-compact-syntax",rl:"application/resource-lists+xml",rld:"application/resource-lists-diff+xml",rs:"application/rls-services+xml",gbr:"application/rpki-ghostbusters",mft:"application/rpki-manifest",roa:"application/rpki-roa",rsd:"application/rsd+xml",rss:"application/rss+xml",rtf:"text/rtf",sbml:"application/sbml+xml",scq:"application/scvp-cv-request",scs:"application/scvp-cv-response",spq:"application/scvp-vp-request",spp:"application/scvp-vp-response",sdp:"application/sdp",setpay:"application/set-payment-initiation",setreg:"application/set-registration-initiation",shf:"application/shf+xml",smi:"application/smil+xml",smil:"application/smil+xml",rq:"application/sparql-query",srx:"application/sparql-results+xml",gram:"application/srgs",grxml:"application/srgs+xml",sru:"application/sru+xml",ssdl:"application/ssdl+xml",ssml:"application/ssml+xml",tei:"application/tei+xml",teicorpus:"application/tei+xml",tfi:"application/thraud+xml",tsd:"application/timestamped-data",plb:"application/vnd.3gpp.pic-bw-large",psb:"application/vnd.3gpp.pic-bw-small",pvb:"application/vnd.3gpp.pic-bw-var",tcap:"application/vnd.3gpp2.tcap",pwn:"application/vnd.3m.post-it-notes",aso:"application/vnd.accpac.simply.aso",imp:"application/vnd.accpac.simply.imp",acu:"application/vnd.acucobol",atc:"application/vnd.acucorp",acutc:"application/vnd.acucorp",air:"application/vnd.adobe.air-application-installer-package+zip",fcdt:"application/vnd.adobe.formscentral.fcdt",fxp:"application/vnd.adobe.fxp",fxpl:"application/vnd.adobe.fxp",xdp:"application/vnd.adobe.xdp+xml",xfdf:"application/vnd.adobe.xfdf",ahead:"application/vnd.ahead.space",azf:"application/vnd.airzip.filesecure.azf",azs:"application/vnd.airzip.filesecure.azs",azw:"application/vnd.amazon.ebook",acc:"application/vnd.americandynamics.acc",ami:"application/vnd.amiga.ami",apk:"application/vnd.android.package-archive",cii:"application/vnd.anser-web-certificate-issue-initiation",fti:"application/vnd.anser-web-funds-transfer-initiation",atx:"application/vnd.antix.game-component",mpkg:"application/vnd.apple.installer+xml",m3u8:"application/vnd.apple.mpegurl",pkpass:"application/vnd.apple.pkpass",swi:"application/vnd.aristanetworks.swi",iota:"application/vnd.astraea-software.iota",aep:"application/vnd.audiograph",mpm:"application/vnd.blueice.multipass",bmi:"application/vnd.bmi",rep:"application/vnd.businessobjects",cdxml:"application/vnd.chemdraw+xml",mmd:"application/vnd.chipnuts.karaoke-mmd",cdy:"application/vnd.cinderella",cla:"application/vnd.claymore",rp9:"application/vnd.cloanto.rp9",c4g:"application/vnd.clonk.c4group",c4d:"application/vnd.clonk.c4group",c4f:"application/vnd.clonk.c4group",c4p:"application/vnd.clonk.c4group",c4u:"application/vnd.clonk.c4group",c11amc:"application/vnd.cluetrust.cartomobile-config",c11amz:"application/vnd.cluetrust.cartomobile-config-pkg",csp:"application/vnd.commonspace",cdbcmsg:"application/vnd.contact.cmsg",cmc:"application/vnd.cosmocaller",clkx:"application/vnd.crick.clicker",clkk:"application/vnd.crick.clicker.keyboard",clkp:"application/vnd.crick.clicker.palette",clkt:"application/vnd.crick.clicker.template",clkw:"application/vnd.crick.clicker.wordbank",wbs:"application/vnd.criticaltools.wbs+xml",pml:"application/vnd.ctc-posml",ppd:"application/vnd.cups-ppd",car:"application/vnd.curl.car",pcurl:"application/vnd.curl.pcurl",dart:"application/vnd.dart",rdz:"application/vnd.data-vision.rdz",uvf:"application/vnd.dece.data",uvvf:"application/vnd.dece.data",uvd:"application/vnd.dece.data",uvvd:"application/vnd.dece.data",uvt:"application/vnd.dece.ttml+xml",uvvt:"application/vnd.dece.ttml+xml",uvx:"application/vnd.dece.unspecified",uvvx:"application/vnd.dece.unspecified",uvz:"application/vnd.dece.zip",uvvz:"application/vnd.dece.zip",fe_launch:"application/vnd.denovo.fcselayout-link",dna:"application/vnd.dna",mlp:"application/vnd.dolby.mlp",dpg:"application/vnd.dpgraph",dfac:"application/vnd.dreamfactory",kpxx:"application/vnd.ds-keypoint",ait:"application/vnd.dvb.ait",svc:"application/vnd.dvb.service",geo:"application/vnd.dynageo",mag:"application/vnd.ecowin.chart",nml:"application/vnd.enliven",esf:"application/vnd.epson.esf",msf:"application/vnd.epson.msf",qam:"application/vnd.epson.quickanime",slt:"application/vnd.epson.salt",ssf:"application/vnd.epson.ssf",es3:"application/vnd.eszigno3+xml",et3:"application/vnd.eszigno3+xml",ez2:"application/vnd.ezpix-album",ez3:"application/vnd.ezpix-package",fdf:"application/vnd.fdf",mseed:"application/vnd.fdsn.mseed",seed:"application/vnd.fdsn.seed",dataless:"application/vnd.fdsn.seed",gph:"application/vnd.flographit",ftc:"application/vnd.fluxtime.clip",fm:"application/vnd.framemaker",frame:"application/vnd.framemaker",maker:"application/vnd.framemaker",book:"application/vnd.framemaker",fnc:"application/vnd.frogans.fnc",ltf:"application/vnd.frogans.ltf",fsc:"application/vnd.fsc.weblaunch",oas:"application/vnd.fujitsu.oasys",oa2:"application/vnd.fujitsu.oasys2",oa3:"application/vnd.fujitsu.oasys3",fg5:"application/vnd.fujitsu.oasysgp",bh2:"application/vnd.fujitsu.oasysprs",ddd:"application/vnd.fujixerox.ddd",xdw:"application/vnd.fujixerox.docuworks",xbd:"application/vnd.fujixerox.docuworks.binder",fzs:"application/vnd.fuzzysheet",txd:"application/vnd.genomatix.tuxedo",ggb:"application/vnd.geogebra.file",ggt:"application/vnd.geogebra.tool",gex:"application/vnd.geometry-explorer",gre:"application/vnd.geometry-explorer",gxt:"application/vnd.geonext",g2w:"application/vnd.geoplan",g3w:"application/vnd.geospace",gmx:"application/vnd.gmx",gdoc:"application/vnd.google-apps.document",gslides:"application/vnd.google-apps.presentation",gsheet:"application/vnd.google-apps.spreadsheet",kml:"application/vnd.google-earth.kml+xml",kmz:"application/vnd.google-earth.kmz",gqf:"application/vnd.grafeq",gqs:"application/vnd.grafeq",gac:"application/vnd.groove-account",ghf:"application/vnd.groove-help",gim:"application/vnd.groove-identity-message",grv:"application/vnd.groove-injector",gtm:"application/vnd.groove-tool-message",tpl:"application/vnd.groove-tool-template",vcg:"application/vnd.groove-vcard",hal:"application/vnd.hal+xml",zmm:"application/vnd.handheld-entertainment+xml",hbci:"application/vnd.hbci",les:"application/vnd.hhe.lesson-player",hpgl:"application/vnd.hp-hpgl",hpid:"application/vnd.hp-hpid",hps:"application/vnd.hp-hps",jlt:"application/vnd.hp-jlyt",pcl:"application/vnd.hp-pcl",pclxl:"application/vnd.hp-pclxl",mpy:"application/vnd.ibm.minipay",afp:"application/vnd.ibm.modcap",listafp:"application/vnd.ibm.modcap",list3820:"application/vnd.ibm.modcap",irm:"application/vnd.ibm.rights-management",sc:"application/vnd.ibm.secure-container",icc:"application/vnd.iccprofile",icm:"application/vnd.iccprofile",igl:"application/vnd.igloader",ivp:"application/vnd.immervision-ivp",ivu:"application/vnd.immervision-ivu",igm:"application/vnd.insors.igm",xpw:"application/vnd.intercon.formnet",xpx:"application/vnd.intercon.formnet",i2g:"application/vnd.intergeo",qbo:"application/vnd.intu.qbo",qfx:"application/vnd.intu.qfx",rcprofile:"application/vnd.ipunplugged.rcprofile",irp:"application/vnd.irepository.package+xml",xpr:"application/vnd.is-xpr",fcs:"application/vnd.isac.fcs",jam:"application/vnd.jam",rms:"application/vnd.jcp.javame.midlet-rms",jisp:"application/vnd.jisp",joda:"application/vnd.joost.joda-archive",ktz:"application/vnd.kahootz",ktr:"application/vnd.kahootz",karbon:"application/vnd.kde.karbon",chrt:"application/vnd.kde.kchart",kfo:"application/vnd.kde.kformula",flw:"application/vnd.kde.kivio",kon:"application/vnd.kde.kontour",kpr:"application/vnd.kde.kpresenter",kpt:"application/vnd.kde.kpresenter",ksp:"application/vnd.kde.kspread",kwd:"application/vnd.kde.kword",kwt:"application/vnd.kde.kword",htke:"application/vnd.kenameaapp",kia:"application/vnd.kidspiration",kne:"application/vnd.kinar",knp:"application/vnd.kinar",skp:"application/vnd.koan",skd:"application/vnd.koan",skt:"application/vnd.koan",skm:"application/vnd.koan",sse:"application/vnd.kodak-descriptor",lasxml:"application/vnd.las.las+xml",lbd:"application/vnd.llamagraphics.life-balance.desktop",lbe:"application/vnd.llamagraphics.life-balance.exchange+xml",apr:"application/vnd.lotus-approach",pre:"application/vnd.lotus-freelance",nsf:"application/vnd.lotus-notes",org:"text/x-org",scm:"application/vnd.lotus-screencam",lwp:"application/vnd.lotus-wordpro",portpkg:"application/vnd.macports.portpkg",mcd:"application/vnd.mcd",mc1:"application/vnd.medcalcdata",cdkey:"application/vnd.mediastation.cdkey",mwf:"application/vnd.mfer",mfm:"application/vnd.mfmp",flo:"application/vnd.micrografx.flo",igx:"application/vnd.micrografx.igx",mif:"application/vnd.mif",daf:"application/vnd.mobius.daf",dis:"application/vnd.mobius.dis",mbk:"application/vnd.mobius.mbk",mqy:"application/vnd.mobius.mqy",msl:"application/vnd.mobius.msl",plc:"application/vnd.mobius.plc",txf:"application/vnd.mobius.txf",mpn:"application/vnd.mophun.application",mpc:"application/vnd.mophun.certificate",xul:"application/vnd.mozilla.xul+xml",cil:"application/vnd.ms-artgalry",cab:"application/vnd.ms-cab-compressed",xls:"application/vnd.ms-excel",xlm:"application/vnd.ms-excel",xla:"application/vnd.ms-excel",xlc:"application/vnd.ms-excel",xlt:"application/vnd.ms-excel",xlw:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xltm:"application/vnd.ms-excel.template.macroenabled.12",eot:"application/vnd.ms-fontobject",chm:"application/vnd.ms-htmlhelp",ims:"application/vnd.ms-ims",lrm:"application/vnd.ms-lrm",thmx:"application/vnd.ms-officetheme",msg:"application/vnd.ms-outlook",cat:"application/vnd.ms-pki.seccat",stl:"application/vnd.ms-pki.stl",ppt:"application/vnd.ms-powerpoint",pps:"application/vnd.ms-powerpoint",pot:"application/vnd.ms-powerpoint",ppam:"application/vnd.ms-powerpoint.addin.macroenabled.12",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",sldm:"application/vnd.ms-powerpoint.slide.macroenabled.12",ppsm:"application/vnd.ms-powerpoint.slideshow.macroenabled.12",potm:"application/vnd.ms-powerpoint.template.macroenabled.12",mpp:"application/vnd.ms-project",mpt:"application/vnd.ms-project",docm:"application/vnd.ms-word.document.macroenabled.12",dotm:"application/vnd.ms-word.template.macroenabled.12",wps:"application/vnd.ms-works",wks:"application/vnd.ms-works",wcm:"application/vnd.ms-works",wdb:"application/vnd.ms-works",wpl:"application/vnd.ms-wpl",xps:"application/vnd.ms-xpsdocument",mseq:"application/vnd.mseq",mus:"application/vnd.musician",msty:"application/vnd.muvee.style",taglet:"application/vnd.mynfc",nlu:"application/vnd.neurolanguage.nlu",ntf:"application/vnd.nitf",nitf:"application/vnd.nitf",nnd:"application/vnd.noblenet-directory",nns:"application/vnd.noblenet-sealer",nnw:"application/vnd.noblenet-web",ngdat:"application/vnd.nokia.n-gage.data",rpst:"application/vnd.nokia.radio-preset",rpss:"application/vnd.nokia.radio-presets",edm:"application/vnd.novadigm.edm",edx:"application/vnd.novadigm.edx",ext:"application/vnd.novadigm.ext",odc:"application/vnd.oasis.opendocument.chart",otc:"application/vnd.oasis.opendocument.chart-template",odb:"application/vnd.oasis.opendocument.database",odf:"application/vnd.oasis.opendocument.formula",odft:"application/vnd.oasis.opendocument.formula-template",odg:"application/vnd.oasis.opendocument.graphics",otg:"application/vnd.oasis.opendocument.graphics-template",odi:"application/vnd.oasis.opendocument.image",oti:"application/vnd.oasis.opendocument.image-template",odp:"application/vnd.oasis.opendocument.presentation",otp:"application/vnd.oasis.opendocument.presentation-template",ods:"application/vnd.oasis.opendocument.spreadsheet",ots:"application/vnd.oasis.opendocument.spreadsheet-template",odt:"application/vnd.oasis.opendocument.text",odm:"application/vnd.oasis.opendocument.text-master",ott:"application/vnd.oasis.opendocument.text-template",oth:"application/vnd.oasis.opendocument.text-web",xo:"application/vnd.olpc-sugar",dd2:"application/vnd.oma.dd2+xml",oxt:"application/vnd.openofficeorg.extension",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",sldx:"application/vnd.openxmlformats-officedocument.presentationml.slide",ppsx:"application/vnd.openxmlformats-officedocument.presentationml.slideshow",potx:"application/vnd.openxmlformats-officedocument.presentationml.template",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",mgp:"application/vnd.osgeo.mapguide.package",dp:"application/vnd.osgi.dp",esa:"application/vnd.osgi.subsystem",pdb:"application/x-pilot",pqa:"application/vnd.palm",oprc:"application/vnd.palm",paw:"application/vnd.pawaafile",str:"application/vnd.pg.format",ei6:"application/vnd.pg.osasli",efif:"application/vnd.picsel",wg:"application/vnd.pmi.widget",plf:"application/vnd.pocketlearn",pbd:"application/vnd.powerbuilder6",box:"application/vnd.previewsystems.box",mgz:"application/vnd.proteus.magazine",qps:"application/vnd.publishare-delta-tree",ptid:"application/vnd.pvi.ptid1",qxd:"application/vnd.quark.quarkxpress",qxt:"application/vnd.quark.quarkxpress",qwd:"application/vnd.quark.quarkxpress",qwt:"application/vnd.quark.quarkxpress",qxl:"application/vnd.quark.quarkxpress",qxb:"application/vnd.quark.quarkxpress",bed:"application/vnd.realvnc.bed",mxl:"application/vnd.recordare.musicxml",musicxml:"application/vnd.recordare.musicxml+xml",cryptonote:"application/vnd.rig.cryptonote",cod:"application/vnd.rim.cod",rm:"application/vnd.rn-realmedia",rmvb:"application/vnd.rn-realmedia-vbr",link66:"application/vnd.route66.link66+xml",st:"application/vnd.sailingtracker.track",see:"application/vnd.seemail",sema:"application/vnd.sema",semd:"application/vnd.semd",semf:"application/vnd.semf",ifm:"application/vnd.shana.informed.formdata",itp:"application/vnd.shana.informed.formtemplate",iif:"application/vnd.shana.informed.interchange",ipk:"application/vnd.shana.informed.package",twd:"application/vnd.simtech-mindmapper",twds:"application/vnd.simtech-mindmapper",mmf:"application/vnd.smaf",teacher:"application/vnd.smart.teacher",sdkm:"application/vnd.solent.sdkm+xml",sdkd:"application/vnd.solent.sdkm+xml",dxp:"application/vnd.spotfire.dxp",sfs:"application/vnd.spotfire.sfs",sdc:"application/vnd.stardivision.calc",sda:"application/vnd.stardivision.draw",sdd:"application/vnd.stardivision.impress",smf:"application/vnd.stardivision.math",sdw:"application/vnd.stardivision.writer",vor:"application/vnd.stardivision.writer",sgl:"application/vnd.stardivision.writer-global",smzip:"application/vnd.stepmania.package",sm:"application/vnd.stepmania.stepchart",wadl:"application/vnd.sun.wadl+xml",sxc:"application/vnd.sun.xml.calc",stc:"application/vnd.sun.xml.calc.template",sxd:"application/vnd.sun.xml.draw",std:"application/vnd.sun.xml.draw.template",sxi:"application/vnd.sun.xml.impress",sti:"application/vnd.sun.xml.impress.template",sxm:"application/vnd.sun.xml.math",sxw:"application/vnd.sun.xml.writer",sxg:"application/vnd.sun.xml.writer.global",stw:"application/vnd.sun.xml.writer.template",sus:"application/vnd.sus-calendar",susp:"application/vnd.sus-calendar",svd:"application/vnd.svd",sis:"application/vnd.symbian.install",sisx:"application/vnd.symbian.install",xsm:"application/vnd.syncml+xml",bdm:"application/vnd.syncml.dm+wbxml",xdm:"application/vnd.syncml.dm+xml",tao:"application/vnd.tao.intent-module-archive",pcap:"application/vnd.tcpdump.pcap",cap:"application/vnd.tcpdump.pcap",dmp:"application/vnd.tcpdump.pcap",tmo:"application/vnd.tmobile-livetv",tpt:"application/vnd.trid.tpt",mxs:"application/vnd.triscape.mxs",tra:"application/vnd.trueapp",ufd:"application/vnd.ufdl",ufdl:"application/vnd.ufdl",utz:"application/vnd.uiq.theme",umj:"application/vnd.umajin",unityweb:"application/vnd.unity",uoml:"application/vnd.uoml+xml",vcx:"application/vnd.vcx",vsd:"application/vnd.visio",vst:"application/vnd.visio",vss:"application/vnd.visio",vsw:"application/vnd.visio",vis:"application/vnd.visionary",vsf:"application/vnd.vsf",wbxml:"application/vnd.wap.wbxml",wmlc:"application/vnd.wap.wmlc",wmlsc:"application/vnd.wap.wmlscriptc",wtb:"application/vnd.webturbo",nbp:"application/vnd.wolfram.player",wpd:"application/vnd.wordperfect",wqd:"application/vnd.wqd",stf:"application/vnd.wt.stf",xar:"application/vnd.xara",xfdl:"application/vnd.xfdl",hvd:"application/vnd.yamaha.hv-dic",hvs:"application/vnd.yamaha.hv-script",hvp:"application/vnd.yamaha.hv-voice",osf:"application/vnd.yamaha.openscoreformat",osfpvg:"application/vnd.yamaha.openscoreformat.osfpvg+xml",saf:"application/vnd.yamaha.smaf-audio",spf:"application/vnd.yamaha.smaf-phrase",cmp:"application/vnd.yellowriver-custom-menu",zir:"application/vnd.zul",zirz:"application/vnd.zul",zaz:"application/vnd.zzazz.deck+xml",vxml:"application/voicexml+xml",wasm:"application/wasm",wgt:"application/widget",hlp:"application/winhlp",wsdl:"application/wsdl+xml",wspolicy:"application/wspolicy+xml",abw:"application/x-abiword",ace:"application/x-ace-compressed",arj:"application/x-arj",aab:"application/x-authorware-bin",x32:"application/x-authorware-bin",u32:"application/x-authorware-bin",vox:"application/x-authorware-bin",aam:"application/x-authorware-map",aas:"application/x-authorware-seg",bcpio:"application/x-bcpio",torrent:"application/x-bittorrent",blb:"application/x-blorb",blorb:"application/x-blorb",bz:"application/x-bzip",bz2:"application/x-bzip2",boz:"application/x-bzip2",cbr:"application/x-cbr",cba:"application/x-cbr",cbt:"application/x-cbr",cbz:"application/x-cbr",cb7:"application/x-cbr",vcd:"application/x-cdlink",cfs:"application/x-cfs-compressed",chat:"application/x-chat",pgn:"application/x-chess-pgn",crx:"application/x-chrome-extension",cco:"application/x-cocoa",nsc:"application/x-conference",cpio:"application/x-cpio",csh:"application/x-csh",udeb:"application/x-debian-package",dgc:"application/x-dgc-compressed",dir:"application/x-director",dcr:"application/x-director",dxr:"application/x-director",cst:"application/x-director",cct:"application/x-director",cxt:"application/x-director",w3d:"application/x-director",fgd:"application/x-director",swa:"application/x-director",wad:"application/x-doom",ncx:"application/x-dtbncx+xml",dtb:"application/x-dtbook+xml",res:"application/x-dtbresource+xml",dvi:"application/x-dvi",evy:"application/x-envoy",eva:"application/x-eva",bdf:"application/x-font-bdf",gsf:"application/x-font-ghostscript",psf:"application/x-font-linux-psf",pcf:"application/x-font-pcf",snf:"application/x-font-snf",pfa:"application/x-font-type1",pfb:"application/x-font-type1",pfm:"application/x-font-type1",afm:"application/x-font-type1",arc:"application/x-freearc",spl:"application/x-futuresplash",gca:"application/x-gca-compressed",ulx:"application/x-glulx",gnumeric:"application/x-gnumeric",gramps:"application/x-gramps-xml",gtar:"application/x-gtar",hdf:"application/x-hdf",php:"application/x-httpd-php",install:"application/x-install-instructions",jardiff:"application/x-java-archive-diff",jnlp:"application/x-java-jnlp-file",latex:"application/x-latex",luac:"application/x-lua-bytecode",lzh:"application/x-lzh-compressed",lha:"application/x-lzh-compressed",run:"application/x-makeself",mie:"application/x-mie",prc:"application/x-pilot",mobi:"application/x-mobipocket-ebook",application:"application/x-ms-application",lnk:"application/x-ms-shortcut",wmd:"application/x-ms-wmd",wmz:"application/x-msmetafile",xbap:"application/x-ms-xbap",mdb:"application/x-msaccess",obd:"application/x-msbinder",crd:"application/x-mscardfile",clp:"application/x-msclip",com:"application/x-msdownload",bat:"application/x-msdownload",mvb:"application/x-msmediaview",m13:"application/x-msmediaview",m14:"application/x-msmediaview",wmf:"application/x-msmetafile",emf:"application/x-msmetafile",emz:"application/x-msmetafile",mny:"application/x-msmoney",pub:"application/x-mspublisher",scd:"application/x-msschedule",trm:"application/x-msterminal",wri:"application/x-mswrite",nc:"application/x-netcdf",cdf:"application/x-netcdf",pac:"application/x-ns-proxy-autoconfig",nzb:"application/x-nzb",pl:"application/x-perl",pm:"application/x-perl",p12:"application/x-pkcs12",pfx:"application/x-pkcs12",p7b:"application/x-pkcs7-certificates",spc:"application/x-pkcs7-certificates",p7r:"application/x-pkcs7-certreqresp",rar:"application/x-rar-compressed",rpm:"application/x-redhat-package-manager",ris:"application/x-research-info-systems",sea:"application/x-sea",sh:"application/x-sh",shar:"application/x-shar",swf:"application/x-shockwave-flash",xap:"application/x-silverlight-app",sql:"application/x-sql",sit:"application/x-stuffit",sitx:"application/x-stuffitx",srt:"application/x-subrip",sv4cpio:"application/x-sv4cpio",sv4crc:"application/x-sv4crc",t3:"application/x-t3vm-image",gam:"application/x-tads",tar:"application/x-tar",tcl:"application/x-tcl",tk:"application/x-tcl",tex:"application/x-tex",tfm:"application/x-tex-tfm",texinfo:"application/x-texinfo",texi:"application/x-texinfo",obj:"application/x-tgif",ustar:"application/x-ustar",hdd:"application/x-virtualbox-hdd",ova:"application/x-virtualbox-ova",ovf:"application/x-virtualbox-ovf",vbox:"application/x-virtualbox-vbox",vdi:"application/x-virtualbox-vdi",vhd:"application/x-virtualbox-vhd",vmdk:"application/x-virtualbox-vmdk",src:"application/x-wais-source",webapp:"application/x-web-app-manifest+json",der:"application/x-x509-ca-cert",crt:"application/x-x509-ca-cert",pem:"application/x-x509-ca-cert",fig:"application/x-xfig",xlf:"application/x-xliff+xml",xpi:"application/x-xpinstall",xz:"application/x-xz",z1:"application/x-zmachine",z2:"application/x-zmachine",z3:"application/x-zmachine",z4:"application/x-zmachine",z5:"application/x-zmachine",z6:"application/x-zmachine",z7:"application/x-zmachine",z8:"application/x-zmachine",xaml:"application/xaml+xml",xdf:"application/xcap-diff+xml",xenc:"application/xenc+xml",xhtml:"application/xhtml+xml",xht:"application/xhtml+xml",xml:"text/xml",xsl:"application/xml",xsd:"application/xml",rng:"application/xml",dtd:"application/xml-dtd",xop:"application/xop+xml",xpl:"application/xproc+xml",xslt:"application/xslt+xml",xspf:"application/xspf+xml",mxml:"application/xv+xml",xhvml:"application/xv+xml",xvml:"application/xv+xml",xvm:"application/xv+xml",yang:"application/yang",yin:"application/yin+xml",zip:"application/zip",adp:"audio/adpcm",au:"audio/basic",snd:"audio/basic",mid:"audio/midi",midi:"audio/midi",kar:"audio/midi",rmi:"audio/midi",mp3:"audio/mpeg",m4a:"audio/x-m4a",mp4a:"audio/mp4",mpga:"audio/mpeg",mp2:"audio/mpeg",mp2a:"audio/mpeg",m2a:"audio/mpeg",m3a:"audio/mpeg",oga:"audio/ogg",ogg:"audio/ogg",spx:"audio/ogg",s3m:"audio/s3m",sil:"audio/silk",uva:"audio/vnd.dece.audio",uvva:"audio/vnd.dece.audio",eol:"audio/vnd.digital-winds",dra:"audio/vnd.dra",dts:"audio/vnd.dts",dtshd:"audio/vnd.dts.hd",lvp:"audio/vnd.lucent.voice",pya:"audio/vnd.ms-playready.media.pya",ecelp4800:"audio/vnd.nuera.ecelp4800",ecelp7470:"audio/vnd.nuera.ecelp7470",ecelp9600:"audio/vnd.nuera.ecelp9600",rip:"audio/vnd.rip",wav:"audio/x-wav",weba:"audio/webm",aac:"audio/x-aac",aif:"audio/x-aiff",aiff:"audio/x-aiff",aifc:"audio/x-aiff",caf:"audio/x-caf",flac:"audio/x-flac",mka:"audio/x-matroska",m3u:"audio/x-mpegurl",wax:"audio/x-ms-wax",wma:"audio/x-ms-wma",ram:"audio/x-pn-realaudio",ra:"audio/x-realaudio",rmp:"audio/x-pn-realaudio-plugin",xm:"audio/xm",cdx:"chemical/x-cdx",cif:"chemical/x-cif",cmdf:"chemical/x-cmdf",cml:"chemical/x-cml",csml:"chemical/x-csml",xyz:"chemical/x-xyz",ttc:"font/collection",otf:"font/otf",ttf:"font/ttf",woff2:"font/woff2",apng:"image/apng",bmp:"image/x-ms-bmp",cgm:"image/cgm",g3:"image/g3fax",gif:"image/gif",ief:"image/ief",jp2:"image/jp2",jpg2:"image/jp2",jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",jpm:"video/jpm",jpx:"image/jpx",jpf:"image/jpx",ktx:"image/ktx",png:"image/png",btif:"image/prs.btif",sgi:"image/sgi",svg:"image/svg+xml",svgz:"image/svg+xml",tiff:"image/tiff",tif:"image/tiff",psd:"image/vnd.adobe.photoshop",uvi:"image/vnd.dece.graphic",uvvi:"image/vnd.dece.graphic",uvg:"image/vnd.dece.graphic",uvvg:"image/vnd.dece.graphic",djvu:"image/vnd.djvu",djv:"image/vnd.djvu",sub:"text/vnd.dvb.subtitle",dwg:"image/vnd.dwg",dxf:"image/vnd.dxf",fbs:"image/vnd.fastbidsheet",fpx:"image/vnd.fpx",fst:"image/vnd.fst",mmr:"image/vnd.fujixerox.edmics-mmr",rlc:"image/vnd.fujixerox.edmics-rlc",mdi:"image/vnd.ms-modi",wdp:"image/vnd.ms-photo",npx:"image/vnd.net-fpx",wbmp:"image/vnd.wap.wbmp",xif:"image/vnd.xiff",webp:"image/webp",ras:"image/x-cmu-raster",cmx:"image/x-cmx",fh:"image/x-freehand",fhc:"image/x-freehand",fh4:"image/x-freehand",fh5:"image/x-freehand",fh7:"image/x-freehand",ico:"image/x-icon",jng:"image/x-jng",sid:"image/x-mrsid-image",pcx:"image/x-pcx",pic:"image/x-pict",pct:"image/x-pict",pnm:"image/x-portable-anymap",pbm:"image/x-portable-bitmap",pgm:"image/x-portable-graymap",ppm:"image/x-portable-pixmap",rgb:"image/x-rgb",tga:"image/x-tga",xbm:"image/x-xbitmap",xpm:"image/x-xpixmap",xwd:"image/x-xwindowdump",u8msg:"message/global",u8dsn:"message/global-delivery-status",u8mdn:"message/global-disposition-notification",u8hdr:"message/global-headers",eml:"message/rfc822",mime:"message/rfc822",wsc:"message/vnd.wfa.wsc",gltf:"model/gltf+json",glb:"model/gltf-binary",igs:"model/iges",iges:"model/iges",msh:"model/mesh",mesh:"model/mesh",silo:"model/mesh",dae:"model/vnd.collada+xml",dwf:"model/vnd.dwf",gdl:"model/vnd.gdl",gtw:"model/vnd.gtw",mts:"model/vnd.mts",vtu:"model/vnd.vtu",wrl:"model/vrml",vrml:"model/vrml",x3db:"model/x3d+binary",x3dbz:"model/x3d+binary",x3dv:"model/x3d+vrml",x3dvz:"model/x3d+vrml",x3d:"model/x3d+xml",x3dz:"model/x3d+xml",appcache:"text/cache-manifest",manifest:"text/cache-manifest",ics:"text/calendar",ifb:"text/calendar",coffee:"text/coffeescript",litcoffee:"text/coffeescript",css:"text/css",csv:"text/csv",html:"text/html",htm:"text/html",shtml:"text/html",jade:"text/jade",jsx:"text/jsx",less:"text/less",markdown:"text/markdown",md:"text/markdown",mml:"text/mathml",n3:"text/n3",txt:"text/plain",text:"text/plain",conf:"text/plain",def:"text/plain",list:"text/plain",log:"text/plain",ini:"text/plain",dsc:"text/prs.lines.tag",rtx:"text/richtext",sgml:"text/sgml",sgm:"text/sgml",shex:"text/shex",slim:"text/slim",slm:"text/slim",stylus:"text/stylus",styl:"text/stylus",tsv:"text/tab-separated-values",t:"text/troff",tr:"text/troff",roff:"text/troff",man:"text/troff",me:"text/troff",ms:"text/troff",ttl:"text/turtle",uri:"text/uri-list",uris:"text/uri-list",urls:"text/uri-list",vcard:"text/vcard",curl:"text/vnd.curl",dcurl:"text/vnd.curl.dcurl",mcurl:"text/vnd.curl.mcurl",scurl:"text/vnd.curl.scurl",fly:"text/vnd.fly",flx:"text/vnd.fmi.flexstor",gv:"text/vnd.graphviz",spot:"text/vnd.in3d.spot",jad:"text/vnd.sun.j2me.app-descriptor",wml:"text/vnd.wap.wml",wmls:"text/vnd.wap.wmlscript",vtt:"text/vtt",s:"text/x-asm",asm:"text/x-asm",c:"text/x-c",cc:"text/x-c",cxx:"text/x-c",cpp:"text/x-c",h:"text/x-c",hh:"text/x-c",dic:"text/x-c",htc:"text/x-component",f:"text/x-fortran",f77:"text/x-fortran",f90:"text/x-fortran",hbs:"text/x-handlebars-template",java:"text/x-java-source",lua:"text/x-lua",mkd:"text/x-markdown",nfo:"text/x-nfo",opml:"text/x-opml",p:"text/x-pascal",pas:"text/x-pascal",pde:"text/x-processing",sass:"text/x-sass",scss:"text/x-scss",etx:"text/x-setext",sfv:"text/x-sfv",ymp:"text/x-suse-ymp",uu:"text/x-uuencode",vcs:"text/x-vcalendar",vcf:"text/x-vcard",yaml:"text/yaml",yml:"text/yaml",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgv:"video/jpeg",jpgm:"video/jpm",mj2:"video/mj2",mjp2:"video/mj2",ts:"video/mp2t",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",mpeg:"video/mpeg",mpg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg",ogv:"video/ogg",qt:"video/quicktime",mov:"video/quicktime",uvh:"video/vnd.dece.hd",uvvh:"video/vnd.dece.hd",uvm:"video/vnd.dece.mobile",uvvm:"video/vnd.dece.mobile",uvp:"video/vnd.dece.pd",uvvp:"video/vnd.dece.pd",uvs:"video/vnd.dece.sd",uvvs:"video/vnd.dece.sd",uvv:"video/vnd.dece.video",uvvv:"video/vnd.dece.video",dvb:"video/vnd.dvb.file",fvt:"video/vnd.fvt",mxu:"video/vnd.mpegurl",m4u:"video/vnd.mpegurl",pyv:"video/vnd.ms-playready.media.pyv",uvu:"video/vnd.uvvu.mp4",uvvu:"video/vnd.uvvu.mp4",viv:"video/vnd.vivo",webm:"video/webm",f4v:"video/x-f4v",fli:"video/x-fli",flv:"video/x-flv",m4v:"video/x-m4v",mkv:"video/x-matroska",mk3d:"video/x-matroska",mks:"video/x-matroska",mng:"video/x-mng",asf:"video/x-ms-asf",asx:"video/x-ms-asf",vob:"video/x-ms-vob",wm:"video/x-ms-wm",wmv:"video/x-ms-wmv",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",avi:"video/x-msvideo",movie:"video/x-sgi-movie",smv:"video/x-smv",ice:"x-conference/x-cooltalk",123:"application/vnd.lotus-1-2-3",class:"application/java-vm","sfd-hdstx":"application/vnd.hydrostatix.sof-data","n-gage":"application/vnd.nokia.n-gage.symbian.install","7z":"application/x-7z-compressed","vbox-extpack":"application/x-virtualbox-vbox-extpack","3gpp":"video/3gpp","3ds":"image/x-3ds","disposition-notification":"message/disposition-notification",in:"text/plain","3dml":"text/vnd.in3d.3dml",for:"text/x-fortran","3gp":"video/3gpp","3g2":"video/3gpp2"},qi=function(t,e,n){var i=e.indexOf("=");if(-1===i)return-2;var a=e.slice(i+1).split(","),r=[];r.type=e.slice(0,i);for(var o=0;o<a.length;o++){var s=a[o].split("-"),p=parseInt(s[0],10),c=parseInt(s[1],10);isNaN(p)?(p=t-c,c=t-1):isNaN(c)&&(c=t-1),c>t-1&&(c=t-1),isNaN(p)||isNaN(c)||p>c||p<0||r.push({start:p,end:c})}if(r.length<1)return-1;return n&&n.combine?function(t){for(var e=t.map(Oi).sort(Ui),n=0,i=1;i<e.length;i++){var a=e[i],r=e[n];a.start>r.end+1?e[++n]=a:a.end>r.end&&(r.end=a.end,r.index=Math.min(r.index,a.index))}e.length=n+1;var o=e.sort(Bi).map(Mi);return o.type=t.type,o}(r):r};function Oi(t,e){return{start:t.start,end:t.end,index:e}}function Mi(t){return{start:t.start,end:t.end}}function Bi(t,e){return t.index-e.index}function Ui(t,e){return t.start-e.start}var Di=function(t,e){if("string"==typeof t)return Ji(t);if("number"==typeof t)return Gi(t,e);return null},Pi=Gi,Ni=Ji,Yi=/\B(?=(\d{3})+(?!\d))/g,Fi=/(?:\.0*|(\.[^0]+)0+)$/,$i={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:1024*(1<<30)},Wi=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb)$/i;function Gi(t,e){if(!Number.isFinite(t))return null;var n=Math.abs(t),i=e&&e.thousandsSeparator||"",a=e&&e.unitSeparator||"",r=e&&void 0!==e.decimalPlaces?e.decimalPlaces:2,o=Boolean(e&&e.fixedDecimals),s=e&&e.unit||"";s&&$i[s.toLowerCase()]||(s=n>=$i.tb?"TB":n>=$i.gb?"GB":n>=$i.mb?"MB":n>=$i.kb?"KB":"B");var p=(t/$i[s.toLowerCase()]).toFixed(r);return o||(p=p.replace(Fi,"$1")),i&&(p=p.replace(Yi,i)),p+a+s}function Ji(t){if("number"==typeof t&&!isNaN(t))return t;if("string"!=typeof t)return null;var e,n=Wi.exec(t),i="b";return n?(e=parseFloat(n[1]),i=n[4].toLowerCase()):(e=parseInt(t,10),i="b"),Math.floor($i[i]*e)}Di.format=Pi,Di.parse=Ni,self.addEventListener("install",function(t){if(t.registerForeignFetch&&t.registerForeignFetch({scopes:[self.registration.scope],origins:["*"]}),navigator.userAgent.includes("Version/11.1 Safari"))throw Error("Safari 11.1 is not supported");const e=new self.ReadableStream;t.waitUntil(e&&self.skipWaiting())}),self.addEventListener("activate",function(t){t.waitUntil(self.clients.claim())}),self.addEventListener("foreignfetch",Vi),self.addEventListener("fetch",Vi);const Hi=["application/pdf","video/","audio/"];const Ki=Object.create(null);function Vi(t){if("GET"!==t.request.method)return;const e=t.request.url;if(!e.includes(self.location.origin))return;const n=new self.URL(e);if("/splitter"===n.pathname)return;if("/splitter.js"===n.pathname)return;if("/splitter.html"===n.pathname)return void t.respondWith(self.Response.redirect("/splitter"));const i=(n.search||"").substr(1).split("&"),a=i[0],r=i.slice(1).reduce((t,e)=>{const n=e.split("=");return 1===n.length?t[e.toLowerCase()]=!0:t[n[0].toLowerCase()]=self.decodeURIComponent(n.slice(1).join("=")),t},{});r.n&&(r.name=r.n),r.c&&(r.cipher=r.c),"string"==typeof r.cipher&&(r.name=r.cipher);const o=a.split("!"),s="F"===o[0],p=o.length>1&&(""===o[0]||s),c=n.pathname.includes("/view"),l=t.request.headers.get("Range");if(!p){const e=n.pathname.includes("/main.js")?new self.Response(new self.Blob(["setTimeout(()=>location.reload(),9)"],{type:"application/javascript"})):new self.Response(new self.Blob(["<!doctype html><title>Direct MEGA</title>\n    <script>location.href=location.hash.length>1?location.href.replace('#','?')\n    :'https://github.com/qgustavor/direct-mega#direct-mega'<\/script>"],{type:"text/html"}));return void t.respondWith(e)}const d=new Promise((t,i)=>{if(!r.cipher&&!o[2])throw Error("Missing encryption key");const p=new zi({downloadId:o[1],key:r.cipher?null:o[2],directory:s,loadedFile:o[3]}),d=o[1]+"_"+o[3];function u(o,s){if(o)return i(o);if(Ki[d]||(Ki[d]=s),s.directory){const e=n.origin+n.pathname+"?"+a.split("!").slice(0,3).join("!"),i=`<!DOCTYPE html><meta charset="utf-8">\n<title>"${Li(s.name)}" folder contents - Direct MEGA</title>\n<meta name="viewport" content="width=device-width, initial-scale=1">\n<style>body{margin:20px;line-height:1.6;font-size:18px;color:#444;padding:0 10px}h1,h2,h3{line-height:1.2}small{float:right;opacity:.8}</style>\n<h1>"${Li(s.name)}" folder contents</h1>\n${function t(e,n){return e.children?`<ul>${e.children.sort((t,e)=>(t.name||"").localeCompare(e.name||"")).map(e=>e.directory?`<li><details>\n        <summary><strong>${Li(e.name)}</strong></summary>\n        ${t(e,n)}\n      </details></li>`:`<li>\n      <a href="${Li(n+"!"+e.downloadId[1])}">${Li(e.name)}</a>\n      <small>${Di(e.size)} - ${new Date(1e3*e.timestamp).toLocaleString()}</small>\n    </li>`).join("\n")}</ul>`:"<i>Empty folder</i>"}(s,e)}`,r=new self.Response(i,{headers:{"Content-Type":"text/html","Content-Security-Policy":"sandbox"}});return void t(r)}const p={},u=r["use-http-range"];u&&(p["Accept-Ranges"]="bytes");const h=new Date(1e3*s.timestamp);isNaN(h.getTime())||(p["Last-Modified"]=h.toGMTString(),p.Date=p["Last-Modified"]);let f=r.start&&(Di.parse(r.start)||null),m=r.end&&(Di.parse(r.end)||null);if(u&&l){const e=qi(s.size,l,{combine:!0});if(-1===e||-2===e||e.length>1)return void t(new self.Response(new self.Blob(["Range Not Satisfiable"]),{status:416,headers:{"Content-Type":"text/plain; charset=utf-8","Content-Range":"*/0"}}));f=e[0].start,m=e[0].end,p["Content-Range"]=`bytes ${f}-${m}/${s.size}`,p["Content-Length"]=m-f+1}else p["Content-Length"]=(m||s.size-1)-(f||0)+1;const v=r.name||s.name,g=v&&v.toLowerCase().split(".").pop(),x=Ii[g]||"application/octet-stream";c?(Hi.find(t=>x.startsWith(t))||(p["Content-Security-Policy"]="default-src none "+e+"; sandbox"),p["Content-Type"]=x):(p["Content-Disposition"]="attachment; filename*=UTF-8''"+self.encodeURIComponent(v),p["Content-Type"]="application/octet-stream; charset=utf-8");const y=s.download({returnCiphertext:!!r.cipher,maxConnections:r.connections,start:f,end:m});let b=null;function w(){y.emit("close")}const k=new self.ReadableStream({start:e=>{y.once("data",e=>{t(new self.Response(k,{status:u&&l?206:200,headers:p}))}),y.on("data",t=>{null===b&&(b=setTimeout(w,5e3)),e.enqueue(new Uint8Array(t))}),y.on("error",t=>{e.error(t),i(t)}),y.on("end",()=>e.close())},pull(){clearTimeout(b),b=null},cancel:()=>{y.emit("close")}})}Ki[d]?setTimeout(u,0,null,Ki[d]):p.loadAttributes(u)}).catch(t=>{const n=t.message&&(t.message.includes("promiseReactionJob@[native code]")||t.message.includes("Unexpected end of JSON input")||t.message.includes("Failed to fetch")),i=t.message&&(t.message.includes("ENOENT (-9)")||t.message.includes("EACCESS (-11)")||t.message.includes("EBLOCKED (-16)")||t.message.includes("Error: Node (file or folder) not found in folder")),r=t.message&&t.message.includes("could not be decrypted"),o=t.message&&t.message.includes("Invalid argument: "),s=t.message&&t.message.includes("ETOOMANY"),p=t.message&&t.message.includes("Bandwidth limit"),l=t.message&&"You can't download past the end of the file."===t.message,d=t.message&&"Missing encryption key"===t.message,u=t.message&&t.message.includes("EARGS (-2)");if(n||i||r||o||s||p||l||d||u){const t=[o,n,i,s,p,l,d,u,r].indexOf(!0),e=["Invalid URL","Invalid server response","File not found","Too many connections","Bandwidth limit reached","Range error","Missing decryption key","Temporary error","Invalid decryption Key"][t],a=["The provided URL includes invalid characters. Check it and try again.","The server returned an invalid response. Try again later. If the problem persists open a issue.",`Sorry, but the file you were trying to ${c?"view":"download"} does not exist.`,"Too many connections are acessing this file. Try again later.",'You reached the bandwidth limit. Please wait some time then try again or <a href="splitter">try using the splitter</a>.',"You specified an invalid download range.","The provided decryption key is invalid. Check the URL and try again.","The server couldn't process your request. Try again later.","The provided decryption key is invalid. Check the URL and try again."][t],h=s||p?429:i?404:l?416:403;return new self.Response(new self.Blob([`<!doctype html><html lang=en><head><meta charset=utf-8><title>${e} - Direct MEGA</title>\n        <meta name=viewport content="width=device-width, initial-scale=1">\n<style>*{line-height:1.2;margin:0}html{color:#888;display:table;font-family:sans-serif;height:100%;text-align:center;width:100%}body{display:table-cell;vertical-align:middle;margin:2em auto}h1{color:#555;font-size:2em;font-weight:400}p{margin:0 auto;width:280px}@media only screen and (max-width:280px){body,p{width:95%}h1{font-size:1.5em;margin:0 0 .3em}}</style></head><body><h1>${e}</h1><p>${a}</p></body></html>`]),{status:h,headers:{"Content-Type":"text/html; charset=utf-8"}})}setTimeout(()=>{self.fetch("https://api.rollbar.com/api/1/item/",{method:"POST",body:JSON.stringify({access_token:"e7dce51c0e174102bad8179a5c5680ac",data:{environment:"production",platform:"browser",request:{url:e},body:{message:{body:t.stack||t}},client:{browser:navigator.userAgent}}})})},100);const h=t.message?t.message.includes("ESID (-15)")||t.message.includes("EARGS (-2)")?"That's a weird error from MEGA. Please, try again later.":t.message.includes(" (-")?"Seems it's an error from MEGA.":"Unknown error!":"Internal error!";return new self.Response(new self.Blob([h,"\n",t.stack||t,"\n\nYou can report this issue here: https://github.com/qgustavor/direct-mega/issues","\n\nYou can also try loading it directly in MEGA: https://mega.nz/#",a,"\nPlease note: if loading the file in MEGA fails then it will not load here."]),{status:500,headers:{"Content-Type":"text/plain; charset=utf-8"}})});t.respondWith(d)}}();
