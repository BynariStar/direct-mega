(function(){function B(e,c){return c={exports:{}},e(c,c.exports,qb),c.exports}function R(e){return"string"===typeof e?cb(e):e}function S(e){return e.toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function cb(e){e+="==".substr(2-3*e.length&3);e=e.replace(/\-/g,"+").replace(/_/g,"/").replace(/,/g,"");return new H(e,"base64")}function rb(e){var c,a,b,d=[2479122403,2108737444,3518906241,22203222];for(b=65536;b--;)for(a=0;a<e.length;a+=16){n=[0,0,0,0];for(c=0;16>c;c+=4)c+a<e.length&&
(n[c/4]=e.readInt32BE(c+a,!0));aes=new db.aes(n);d=aes.encrypt(d)}var n=new H(16);for(c=0;4>c;c++)n.writeInt32BE(d[c],4*c,!0);return n}function D(e,c){if(!e)throw Error("No options given");var a=e.onResponse;e="string"===typeof e?{uri:e}:JSON.parse(JSON.stringify(e));e.onResponse=a;e.verbose&&(D.log=sb());e.url&&(e.uri=e.url,delete e.url);if(!e.uri&&""!==e.uri)throw Error("options.uri is a required argument");if("string"!=typeof e.uri)throw Error("options.uri must be a string");for(var a=["proxy",
"_redirectsFollowed","maxRedirects","followRedirect"],b=0;b<a.length;b++)if(e[a[b]])throw Error("options."+a[b]+" is not supported");e.callback=c||K;e.method=e.method||"GET";e.headers=e.headers||{};e.body=e.body||null;e.timeout=e.timeout||D.DEFAULT_TIMEOUT;if(e.headers.host)throw Error("Options.headers.host is not supported");e.json&&(e.headers.accept=e.headers.accept||"application/json","GET"!==e.method&&(e.headers["content-type"]="application/json"),"boolean"!==typeof e.json?e.body=JSON.stringify(e.json):
"string"!==typeof e.body&&(e.body=JSON.stringify(e.body)));a=function(d){var a=[],b;for(b in d)d.hasOwnProperty(b)&&a.push(encodeURIComponent(b)+"="+encodeURIComponent(d[b]));return a.join("&")};e.qs&&(b="string"==typeof e.qs?e.qs:a(e.qs),-1!==e.uri.indexOf("?")?e.uri=e.uri+"&"+b:e.uri=e.uri+"?"+b);b=function(d){var a={};a.boundry="-------------------------------"+Math.floor(1E9*Math.random());var b=[],c;for(c in d)d.hasOwnProperty(c)&&b.push("--"+a.boundry+'\nContent-Disposition: form-data; name="'+
c+'"\n\n'+d[c]+"\n");b.push("--"+a.boundry+"--");a.body=b.join("");a.length=a.body.length;a.type="multipart/form-data; boundary="+a.boundry;return a};if(e.form){if("string"==typeof e.form)throw"form name unsupported";if("POST"===e.method){var d=(e.encoding||"application/x-www-form-urlencoded").toLowerCase();e.headers["content-type"]=d;switch(d){case "application/x-www-form-urlencoded":e.body=a(e.form).replace(/%20/g,"+");break;case "multipart/form-data":a=b(e.form);e.body=a.body;e.headers["content-type"]=
a.type;break;default:throw Error("unsupported encoding:"+d);}}}e.onResponse=e.onResponse||K;!0===e.onResponse&&(e.onResponse=c,e.callback=K);!e.headers.authorization&&e.auth&&(e.headers.authorization="Basic "+tb(e.auth.username+":"+e.auth.password));return"function"===typeof fetch&&"function"===typeof ReadableByteStream?ub(e):vb(e)}function vb(e){function c(){if(!g.response){g.response=!0;D.log.debug("Got response",{id:b.id,status:b.status});clearTimeout(b.timeoutTimer);b.statusCode=b.status;if(n&&
0===b.statusCode){var d=Error("CORS request rejected: "+e.uri);d.cors="rejected";g.loading=!0;g.end=!0;h.emit("error",d);return e.callback(d,b)}e.onResponse(null,b)}}function a(){if(b.response){var d=b.responseText.substr(k);k+=d.length;0<d.length&&h.push(new H(d,"ascii"))}g.loading||(g.loading=!0,D.log.debug("Response body loading",{id:b.id}))}var b=new XMLHttpRequest,d=!1,n=eb(e.uri),k=0;P+=1;b.seq_id=P;b.id=P+": "+e.method+" "+e.uri;b._id=b.id;if(n&&!("withCredentials"in b)){var f=Error("Browser does not support cross-origin request: "+
e.uri);f.cors="unsupported";return e.callback(f,b)}b.timeoutTimer=setTimeout(function(){d=!0;var a=Error("ETIMEDOUT");a.code="ETIMEDOUT";a.duration=e.timeout;D.log.error("Timeout",{id:b._id,milliseconds:e.timeout});return e.callback(a,b)},e.timeout);var g={response:!1,loading:!1,end:!1};b.overrideMimeType("text/plain; charset=x-user-defined");b.onreadystatechange=function(n){if(d)return D.log.debug("Ignoring timed out state change",{state:b.readyState,id:b.id});D.log.debug("State change",{state:b.readyState,
id:b.id,timed_out:d});if(b.readyState===XMLHttpRequest.OPENED){D.log.debug("Request started",{id:b.id});for(var f in e.headers)b.setRequestHeader(f,e.headers[f])}else if(b.readyState===XMLHttpRequest.HEADERS_RECEIVED)c();else if(b.readyState===XMLHttpRequest.LOADING)c(),a();else if(b.readyState===XMLHttpRequest.DONE)a:if(c(),a(),!g.end){g.end=!0;D.log.debug("Request done",{id:b.id});h.push(null);b.body=b.responseText;if(e.json)try{b.body=JSON.parse(b.responseText)}catch(k){h.emit("error",k);e.callback(k,
b);break a}e.callback(null,b,b.body)}};b.open(e.method,e.uri,!0);n&&(b.withCredentials=!!e.withCredentials);b.send(e.body);var h=new X.Readable;h._read=K;return h}function ub(e){var c={};eb(e.uri);P+=1;c.seq_id=P;c.id=P+": "+e.method+" "+e.uri;c._id=c.id;var a={};e.headers&&(a.headers=e.headers);e.method&&(a.method=e.method);e.body&&(a.body=e.body);fetch(e.uri||e.url,a).then(function(d){function a(){k.read().then(function(d){d.done?b.push(null):(b.push(new H(d.value)),a())})}c.statusCode=c.status=
d.status;e.callback&&d.clone()[e.json?"json":"text"]().then(function(d){return e.callback(null,c,d)})["catch"](function(d){return e.callback(d)});var k=d.body.getReader();a()},function(d){b.emit("error",d);e.callback(d)});var b=new X.Readable;b._read=K;return b}function K(){}function sb(){var e={},c=["trace","debug","info","warn","error"],a,b;for(b=0;b<c.length;b++)a=c[b],e[a]=K,"undefined"!==typeof console&&console&&console[a]&&(e[a]=wb(console,a));return e}function wb(e,c){return function(a,b){"object"===
("undefined"===typeof b?"undefined":u(b))&&(a+=" "+JSON.stringify(b));return e[c].call(e,a)}}function eb(e){var c=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,a;try{a=location.href}catch(b){a=document.createElement("a"),a.href="",a=a.href}a=c.exec(a.toLowerCase())||[];e=c.exec(e.toLowerCase());return!(!e||e[1]==a[1]&&e[2]==a[2]&&(e[3]||("http:"===e[1]?80:443))==(a[3]||("http:"===a[1]?80:443)))}function tb(e){var c,a,b,d,n=0,k=0,f="",f=[];if(!e)return e;do c=e.charCodeAt(n++),a=e.charCodeAt(n++),
b=e.charCodeAt(n++),d=c<<16|a<<8|b,c=d>>18&63,a=d>>12&63,b=d>>6&63,d&=63,f[k++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(a)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(b)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d);while(n<e.length);f=f.join("");switch(e.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"="}return f}
function fb(e,c){var a=[],b;e.on("data",function(d){a.push(d)});e.on("end",function(){b||(b=!0,c(null,H.concat(a)))});e.on("error",function(d){b||(b=!0,c(d))})}function gb(e){var c;return Y(function(a){c&&(a=H.concat([c,a]));var b=Math.floor(a.length/e)*e;b?a.length>b?(c=a.slice(b),this.emit("data",a.slice(0,b))):(c=void 0,this.emit("data",a)):c=c?H.concat([c,a]):a},function(){c&&this.emit("data",c);this.emit("end")})}function xb(e){var c=[],a=0;return Y(function(b){c.push(b);a+=b.length},function(){e(a);
c.forEach(this.emit.bind(this,"data"));this.emit("end")})}function L(){for(var e=arguments.length,c=Array(e),a=0;a<e;a++)c[a]=arguments[a];return new (Function.prototype.bind.apply(L.Storage,[null].concat(c)))}var qb="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this,u=function(e){return typeof e},Ma=function(e,c){if(!(e instanceof c))throw new TypeError("Cannot call a class as a function");},Na=function(){function e(c,a){for(var b=0;b<a.length;b++){var d=
a[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(c,d.key,d)}}return function(c,a,b){a&&e(c.prototype,a);b&&e(c,b);return c}}(),Pa=function(e,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+typeof c);e.prototype=Object.create(c&&c.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(e,c):e.__proto__=c)},Qa=
function(e,c){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==typeof c&&"function"!==typeof c?e:c},Z=B(function(e){var c={}.toString;e.exports=Array.isArray||function(a){return"[object Array]"==c.call(a)}}),yb=Z&&"object"===("undefined"===typeof Z?"undefined":u(Z))&&"default"in Z?Z["default"]:Z,aa=B(function(e,c){c.read=function(a,b,d,c,e){var f;f=8*e-c-1;var g=(1<<f)-1,h=g>>1,m=-7;e=d?e-1:0;var r=d?-1:1,p=a[b+e];e+=r;d=p&(1<<-m)-1;
p>>=-m;for(m+=f;0<m;d=256*d+a[b+e],e+=r,m-=8);f=d&(1<<-m)-1;d>>=-m;for(m+=c;0<m;f=256*f+a[b+e],e+=r,m-=8);if(0===d)d=1-h;else{if(d===g)return f?NaN:Infinity*(p?-1:1);f+=Math.pow(2,c);d-=h}return(p?-1:1)*f*Math.pow(2,d-c)};c.write=function(a,b,d,c,e,f){var g,h=8*f-e-1,m=(1<<h)-1,r=m>>1,p=23===e?Math.pow(2,-24)-Math.pow(2,-77):0;f=c?0:f-1;var x=c?1:-1,z=0>b||0===b&&0>1/b?1:0;b=Math.abs(b);isNaN(b)||Infinity===b?(b=isNaN(b)?1:0,c=m):(c=Math.floor(Math.log(b)/Math.LN2),1>b*(g=Math.pow(2,-c))&&(c--,g*=
2),b=1<=c+r?b+p/g:b+p*Math.pow(2,1-r),2<=b*g&&(c++,g/=2),c+r>=m?(b=0,c=m):1<=c+r?(b=(b*g-1)*Math.pow(2,e),c+=r):(b=b*Math.pow(2,r-1)*Math.pow(2,e),c=0));for(;8<=e;a[d+f]=b&255,f+=x,b/=256,e-=8);c=c<<e|b;for(h+=e;0<h;a[d+f]=c&255,f+=x,c/=256,h-=8);a[d+f-x]|=128*z}}),zb=aa&&"object"===("undefined"===typeof aa?"undefined":u(aa))&&"default"in aa?aa["default"]:aa,ba=B(function(e,c){(function(a){function b(d){d=d.charCodeAt(0);if(43===d||45===d)return 62;if(47===d||95===d)return 63;if(48>d)return-1;if(58>
d)return d-48+52;if(91>d)return d-65;if(123>d)return d-97+26}var d="undefined"!==typeof Uint8Array?Uint8Array:Array;a.toByteArray=function(a){function c(d){r[p++]=d}var e,g,h,m,r;if(0<a.length%4)throw Error("Invalid string. Length must be a multiple of 4");e=a.length;m="="===a.charAt(e-2)?2:"="===a.charAt(e-1)?1:0;r=new d(3*a.length/4-m);g=0<m?a.length-4:a.length;var p=0;for(e=0;e<g;e+=4)h=b(a.charAt(e))<<18|b(a.charAt(e+1))<<12|b(a.charAt(e+2))<<6|b(a.charAt(e+3)),c((h&16711680)>>16),c((h&65280)>>
8),c(h&255);2===m?(h=b(a.charAt(e))<<2|b(a.charAt(e+1))>>4,c(h&255)):1===m&&(h=b(a.charAt(e))<<10|b(a.charAt(e+1))<<4|b(a.charAt(e+2))>>2,c(h>>8&255),c(h&255));return r};a.fromByteArray=function(d){var a,b=d.length%3,c="",e,m;a=0;for(m=d.length-b;a<m;a+=3)e=(d[a]<<16)+(d[a+1]<<8)+d[a+2],e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>
6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e&63),c+=e;switch(b){case 1:e=d[d.length-1];c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>2);c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e<<4&63);c+="==";break;case 2:e=(d[d.length-2]<<8)+d[d.length-1],c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>10),c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>
4&63),c+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e<<2&63),c+="="}return c}})("undefined"===typeof c?this.base64js={}:c)}),Ab=ba&&"object"===("undefined"===typeof ba?"undefined":u(ba))&&"default"in ba?ba["default"]:ba,T=B(function(e,c,a){function b(){function d(){}try{var a=new Uint8Array(1);a.foo=function(){return 42};a.constructor=d;return 42===a.foo()&&a.constructor===d&&"function"===typeof a.subarray&&0===a.subarray(1,1).byteLength}catch(b){return!1}}function d(E){if(!(this instanceof
d))return 1<arguments.length?new d(E,arguments[1]):new d(E);d.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0);if("number"===typeof E){var a;a=f(this,0>E?0:g(E)|0);if(!d.TYPED_ARRAY_SUPPORT)for(var b=0;b<E;b++)a[b]=0;return a}if("string"===typeof E){a=this;b=1<arguments.length?arguments[1]:"utf8";if("string"!==typeof b||""===b)b="utf8";var c=m(E,b)|0;a=f(a,c);a.write(E,b);return a}return n(this,E)}function n(E,a){if(d.isBuffer(a)){var b=E,c=g(a.length)|0,b=f(b,c);a.copy(b,0,0,c);return b}if(J(a)){for(var b=
E,c=g(a.length)|0,b=f(b,c),e=0;e<c;e+=1)b[e]=a[e]&255;return b}if(null==a)throw new TypeError("must start with number, buffer, array or string");if("undefined"!==typeof ArrayBuffer){if(a.buffer instanceof ArrayBuffer)return k(E,a);if(a instanceof ArrayBuffer)return b=E,d.TYPED_ARRAY_SUPPORT?(a.byteLength,b=d._augment(new Uint8Array(a))):b=k(b,new Uint8Array(a)),b}if(a.length){b=E;c=g(a.length)|0;b=f(b,c);for(e=0;e<c;e+=1)b[e]=a[e]&255;return b}b=E;e=0;"Buffer"===a.type&&J(a.data)&&(c=a.data,e=g(c.length)|
0);for(var b=f(b,e),l=0;l<e;l+=1)b[l]=c[l]&255;return b}function k(d,a){var b=g(a.length)|0;d=f(d,b);for(var c=0;c<b;c+=1)d[c]=a[c]&255;return d}function f(a,b){d.TYPED_ARRAY_SUPPORT?(a=d._augment(new Uint8Array(b)),a.__proto__=d.prototype):(a.length=b,a._isBuffer=!0);0!==b&&b<=d.poolSize>>>1&&(a.parent=Oa);return a}function g(a){if(a>=(d.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(d.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+
" bytes");return a|0}function h(a,b){if(!(this instanceof h))return new h(a,b);var c=new d(a,b);delete c.parent;return c}function m(d,a){"string"!==typeof d&&(d=""+d);var b=d.length;if(0===b)return 0;for(var c=!1;;)switch(a){case "ascii":case "binary":case "raw":case "raws":return b;case "utf8":case "utf-8":return F(d).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*b;case "hex":return b>>>1;case "base64":return A.toByteArray(w(d)).length;default:if(c)return F(d).length;a=
(""+a).toLowerCase();c=!0}}function r(d,a,b){var c=!1;a|=0;b=void 0===b||Infinity===b?this.length:b|0;d||(d="utf8");0>a&&(a=0);b>this.length&&(b=this.length);if(b<=a)return"";for(;;)switch(d){case "hex":d=a;a=b;b=this.length;if(!d||0>d)d=0;if(!a||0>a||a>b)a=b;c="";for(b=d;b<a;b++)d=c,c=this[b],c=16>c?"0"+c.toString(16):c.toString(16),c=d+c;return c;case "utf8":case "utf-8":return p(this,a,b);case "ascii":d="";for(b=Math.min(this.length,b);a<b;a++)d+=String.fromCharCode(this[a]&127);return d;case "binary":d=
"";for(b=Math.min(this.length,b);a<b;a++)d+=String.fromCharCode(this[a]);return d;case "base64":return a=0===a&&b===this.length?A.fromByteArray(this):A.fromByteArray(this.slice(a,b)),a;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":a=this.slice(a,b);b="";for(d=0;d<a.length;d+=2)b+=String.fromCharCode(a[d]+256*a[d+1]);return b;default:if(c)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase();c=!0}}function p(d,a,b){b=Math.min(d.length,b);for(var c=[];a<b;){var e=d[a],l=null,
n=239<e?4:223<e?3:191<e?2:1;if(a+n<=b){var A,G,f;switch(n){case 1:128>e&&(l=e);break;case 2:A=d[a+1];128===(A&192)&&(e=(e&31)<<6|A&63,127<e&&(l=e));break;case 3:A=d[a+1];G=d[a+2];128===(A&192)&&128===(G&192)&&(e=(e&15)<<12|(A&63)<<6|G&63,2047<e&&(55296>e||57343<e)&&(l=e));break;case 4:A=d[a+1],G=d[a+2],f=d[a+3],128===(A&192)&&128===(G&192)&&128===(f&192)&&(e=(e&15)<<18|(A&63)<<12|(G&63)<<6|f&63,65535<e&&1114112>e&&(l=e))}}null===l?(l=65533,n=1):65535<l&&(l-=65536,c.push(l>>>10&1023|55296),l=56320|
l&1023);c.push(l);a+=n}d=c.length;if(d<=Ra)c=String.fromCharCode.apply(String,c);else{b="";for(a=0;a<d;)b+=String.fromCharCode.apply(String,c.slice(a,a+=Ra));c=b}return c}function x(a,d,b){if(0!==a%1||0>a)throw new RangeError("offset is not uint");if(a+d>b)throw new RangeError("Trying to access beyond buffer length");}function z(a,b,c,e,l,n){if(!d.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>l||b<n)throw new RangeError("value is out of bounds");if(c+e>a.length)throw new RangeError("index out of range");
}function M(a,d,b,c){0>d&&(d=65535+d+1);for(var e=0,l=Math.min(a.length-b,2);e<l;e++)a[b+e]=(d&255<<8*(c?e:1-e))>>>8*(c?e:1-e)}function C(a,d,b,c){0>d&&(d=4294967295+d+1);for(var e=0,l=Math.min(a.length-b,4);e<l;e++)a[b+e]=d>>>8*(c?e:3-e)&255}function q(a,d,b,c,e,l){if(d>e||d<l)throw new RangeError("value is out of bounds");if(b+c>a.length)throw new RangeError("index out of range");if(0>b)throw new RangeError("index out of range");}function v(a,d,b,c,e){e||q(a,d,b,4,3.4028234663852886E38,-3.4028234663852886E38);
Q.write(a,d,b,c,23,4);return b+4}function t(a,d,b,c,e){e||q(a,d,b,8,1.7976931348623157E308,-1.7976931348623157E308);Q.write(a,d,b,c,52,8);return b+8}function w(a){a=a.trim?a.trim():a.replace(/^\s+|\s+$/g,"");a=a.replace(Bb,"");if(2>a.length)return"";for(;0!==a.length%4;)a+="=";return a}function F(a,d){d=d||Infinity;for(var b,c=a.length,e=null,l=[],n=0;n<c;n++){b=a.charCodeAt(n);if(55295<b&&57344>b){if(!e){if(56319<b){-1<(d-=3)&&l.push(239,191,189);continue}else if(n+1===c){-1<(d-=3)&&l.push(239,191,
189);continue}e=b;continue}if(56320>b){-1<(d-=3)&&l.push(239,191,189);e=b;continue}b=(e-55296<<10|b-56320)+65536}else e&&-1<(d-=3)&&l.push(239,191,189);e=null;if(128>b){if(0>--d)break;l.push(b)}else if(2048>b){if(0>(d-=2))break;l.push(b>>6|192,b&63|128)}else if(65536>b){if(0>(d-=3))break;l.push(b>>12|224,b>>6&63|128,b&63|128)}else if(1114112>b){if(0>(d-=4))break;l.push(b>>18|240,b>>12&63|128,b>>6&63|128,b&63|128)}else throw Error("Invalid code point");}return l}function l(d){for(var a=[],b=0;b<d.length;b++)a.push(d.charCodeAt(b)&
255);return a}function G(d,a,b,c){for(var e=0;e<c&&!(e+b>=a.length||e>=d.length);e++)a[e+b]=d[e];return e}var A=Ab,Q=zb,J=yb;c.Buffer=d;c.SlowBuffer=h;c.INSPECT_MAX_BYTES=50;d.poolSize=8192;var Oa={};d.TYPED_ARRAY_SUPPORT=void 0!==a.TYPED_ARRAY_SUPPORT?a.TYPED_ARRAY_SUPPORT:b();d.TYPED_ARRAY_SUPPORT?(d.prototype.__proto__=Uint8Array.prototype,d.__proto__=Uint8Array):(d.prototype.length=void 0,d.prototype.parent=void 0);d.isBuffer=function(d){return!(null==d||!d._isBuffer)};d.compare=function(a,b){if(!d.isBuffer(a)||
!d.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,e=b.length,l=0,n=Math.min(c,e);l<n&&a[l]===b[l];)++l;l!==n&&(c=a[l],e=b[l]);return c<e?-1:e<c?1:0};d.isEncoding=function(a){switch(String(a).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};d.concat=function(a,b){if(!J(a))throw new TypeError("list argument must be an Array of Buffers.");
if(0===a.length)return new d(0);var c;if(void 0===b)for(c=b=0;c<a.length;c++)b+=a[c].length;var e=new d(b),l=0;for(c=0;c<a.length;c++){var n=a[c];n.copy(e,l);l+=n.length}return e};d.byteLength=m;d.prototype.toString=function(){var a=this.length|0;return 0===a?"":0===arguments.length?p(this,0,a):r.apply(this,arguments)};d.prototype.equals=function(a){if(!d.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?!0:0===d.compare(this,a)};d.prototype.inspect=function(){var a="",
d=c.INSPECT_MAX_BYTES;0<this.length&&(a=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(a+=" ... "));return"<Buffer "+a+">"};d.prototype.compare=function(a){if(!d.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:d.compare(this,a)};d.prototype.indexOf=function(a,b){function c(a,d,b){for(var e=-1,E=0;b+E<a.length;E++)if(a[b+E]===d[-1===e?0:E-e]){if(-1===e&&(e=E),E-e+1===d.length)return b+e}else e=-1;return-1}2147483647<b?b=2147483647:-2147483648>b&&(b=
-2147483648);b>>=0;if(0===this.length||b>=this.length)return-1;0>b&&(b=Math.max(this.length+b,0));if("string"===typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(d.isBuffer(a))return c(this,a,b);if("number"===typeof a)return d.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer");};d.prototype.get=function(a){console.log(".get() is deprecated. Access using array indexes instead.");
return this.readUInt8(a)};d.prototype.set=function(a,d){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(a,d)};d.prototype.write=function(a,d,b,c){if(void 0===d)c="utf8",b=this.length,d=0;else if(void 0===b&&"string"===typeof d)c=d,b=this.length,d=0;else if(isFinite(d))d|=0,isFinite(b)?(b|=0,void 0===c&&(c="utf8")):(c=b,b=void 0);else{var e=c;c=d;d=b|0;b=e}e=this.length-d;if(void 0===b||b>e)b=e;if(0<a.length&&(0>b||0>d)||d>this.length)throw new RangeError("attempt to write outside buffer bounds");
c||(c="utf8");for(e=!1;;)switch(c){case "hex":d=Number(d)||0;c=this.length-d;b?(b=Number(b),b>c&&(b=c)):b=c;c=a.length;if(0!==c%2)throw Error("Invalid hex string");b>c/2&&(b=c/2);for(c=0;c<b;c++){e=parseInt(a.substr(2*c,2),16);if(isNaN(e))throw Error("Invalid hex string");this[d+c]=e}return c;case "utf8":case "utf-8":return G(F(a,this.length-d),this,d,b);case "ascii":return G(l(a),this,d,b);case "binary":return G(l(a),this,d,b);case "base64":return G(A.toByteArray(w(a)),this,d,b);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":c=
this.length-d;for(var n=void 0,n=e=void 0,f=[],q=0;q<a.length&&!(0>(c-=2));q++)n=a.charCodeAt(q),e=n>>8,n%=256,f.push(n),f.push(e);return G(f,this,d,b);default:if(e)throw new TypeError("Unknown encoding: "+c);c=(""+c).toLowerCase();e=!0}};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Ra=4096;d.prototype.slice=function(a,b){var c=this.length;a=~~a;b=void 0===b?c:~~b;0>a?(a+=c,0>a&&(a=0)):a>c&&(a=c);0>b?(b+=c,0>b&&(b=0)):b>c&&(b=c);b<a&&
(b=a);if(d.TYPED_ARRAY_SUPPORT)c=d._augment(this.subarray(a,b));else for(var e=b-a,c=new d(e,void 0),l=0;l<e;l++)c[l]=this[l+a];c.length&&(c.parent=this.parent||this);return c};d.prototype.readUIntLE=function(a,d,b){a|=0;d|=0;b||x(a,d,this.length);b=this[a];for(var c=1,e=0;++e<d&&(c*=256);)b+=this[a+e]*c;return b};d.prototype.readUIntBE=function(a,d,b){a|=0;d|=0;b||x(a,d,this.length);b=this[a+--d];for(var c=1;0<d&&(c*=256);)b+=this[a+--d]*c;return b};d.prototype.readUInt8=function(a,d){d||x(a,1,this.length);
return this[a]};d.prototype.readUInt16LE=function(a,d){d||x(a,2,this.length);return this[a]|this[a+1]<<8};d.prototype.readUInt16BE=function(a,d){d||x(a,2,this.length);return this[a]<<8|this[a+1]};d.prototype.readUInt32LE=function(a,d){d||x(a,4,this.length);return(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]};d.prototype.readUInt32BE=function(a,d){d||x(a,4,this.length);return 16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])};d.prototype.readIntLE=function(a,d,b){a|=0;d|=0;b||x(a,d,
this.length);b=this[a];for(var c=1,e=0;++e<d&&(c*=256);)b+=this[a+e]*c;b>=128*c&&(b-=Math.pow(2,8*d));return b};d.prototype.readIntBE=function(a,d,b){a|=0;d|=0;b||x(a,d,this.length);b=d;for(var c=1,e=this[a+--b];0<b&&(c*=256);)e+=this[a+--b]*c;e>=128*c&&(e-=Math.pow(2,8*d));return e};d.prototype.readInt8=function(a,d){d||x(a,1,this.length);return this[a]&128?-1*(255-this[a]+1):this[a]};d.prototype.readInt16LE=function(a,d){d||x(a,2,this.length);var b=this[a]|this[a+1]<<8;return b&32768?b|4294901760:
b};d.prototype.readInt16BE=function(a,d){d||x(a,2,this.length);var b=this[a+1]|this[a]<<8;return b&32768?b|4294901760:b};d.prototype.readInt32LE=function(a,d){d||x(a,4,this.length);return this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24};d.prototype.readInt32BE=function(a,d){d||x(a,4,this.length);return this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]};d.prototype.readFloatLE=function(a,d){d||x(a,4,this.length);return Q.read(this,a,!0,23,4)};d.prototype.readFloatBE=function(a,d){d||x(a,4,this.length);
return Q.read(this,a,!1,23,4)};d.prototype.readDoubleLE=function(a,d){d||x(a,8,this.length);return Q.read(this,a,!0,52,8)};d.prototype.readDoubleBE=function(a,d){d||x(a,8,this.length);return Q.read(this,a,!1,52,8)};d.prototype.writeUIntLE=function(a,d,b,c){a=+a;d|=0;b|=0;c||z(this,a,d,b,Math.pow(2,8*b),0);c=1;var e=0;for(this[d]=a&255;++e<b&&(c*=256);)this[d+e]=a/c&255;return d+b};d.prototype.writeUIntBE=function(a,d,b,c){a=+a;d|=0;b|=0;c||z(this,a,d,b,Math.pow(2,8*b),0);c=b-1;var e=1;for(this[d+
c]=a&255;0<=--c&&(e*=256);)this[d+c]=a/e&255;return d+b};d.prototype.writeUInt8=function(a,b,c){a=+a;b|=0;c||z(this,a,b,1,255,0);d.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));this[b]=a&255;return b+1};d.prototype.writeUInt16LE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):M(this,a,b,!0);return b+2};d.prototype.writeUInt16BE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):M(this,a,b,!1);return b+
2};d.prototype.writeUInt32LE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=a&255):C(this,a,b,!0);return b+4};d.prototype.writeUInt32BE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):C(this,a,b,!1);return b+4};d.prototype.writeIntLE=function(a,b,d,c){a=+a;b|=0;c||(c=Math.pow(2,8*d-1),z(this,a,b,d,c-1,-c));c=0;var e=
1,l=0>a?1:0;for(this[b]=a&255;++c<d&&(e*=256);)this[b+c]=(a/e>>0)-l&255;return b+d};d.prototype.writeIntBE=function(a,b,d,c){a=+a;b|=0;c||(c=Math.pow(2,8*d-1),z(this,a,b,d,c-1,-c));c=d-1;var e=1,l=0>a?1:0;for(this[b+c]=a&255;0<=--c&&(e*=256);)this[b+c]=(a/e>>0)-l&255;return b+d};d.prototype.writeInt8=function(a,b,c){a=+a;b|=0;c||z(this,a,b,1,127,-128);d.TYPED_ARRAY_SUPPORT||(a=Math.floor(a));0>a&&(a=255+a+1);this[b]=a&255;return b+1};d.prototype.writeInt16LE=function(a,b,c){a=+a;b|=0;c||z(this,a,
b,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8):M(this,a,b,!0);return b+2};d.prototype.writeInt16BE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=a&255):M(this,a,b,!1);return b+2};d.prototype.writeInt32LE=function(a,b,c){a=+a;b|=0;c||z(this,a,b,4,2147483647,-2147483648);d.TYPED_ARRAY_SUPPORT?(this[b]=a&255,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):C(this,a,b,!0);return b+4};d.prototype.writeInt32BE=function(a,
b,c){a=+a;b|=0;c||z(this,a,b,4,2147483647,-2147483648);0>a&&(a=4294967295+a+1);d.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=a&255):C(this,a,b,!1);return b+4};d.prototype.writeFloatLE=function(a,b,d){return v(this,a,b,!0,d)};d.prototype.writeFloatBE=function(a,b,d){return v(this,a,b,!1,d)};d.prototype.writeDoubleLE=function(a,b,d){return t(this,a,b,!0,d)};d.prototype.writeDoubleBE=function(a,b,d){return t(this,a,b,!1,d)};d.prototype.copy=function(a,b,c,e){c||(c=
0);e||0===e||(e=this.length);b>=a.length&&(b=a.length);b||(b=0);0<e&&e<c&&(e=c);if(e===c||0===a.length||0===this.length)return 0;if(0>b)throw new RangeError("targetStart out of bounds");if(0>c||c>=this.length)throw new RangeError("sourceStart out of bounds");if(0>e)throw new RangeError("sourceEnd out of bounds");e>this.length&&(e=this.length);a.length-b<e-c&&(e=a.length-b+c);var l=e-c;if(this===a&&c<b&&b<e)for(e=l-1;0<=e;e--)a[e+b]=this[e+c];else if(1E3>l||!d.TYPED_ARRAY_SUPPORT)for(e=0;e<l;e++)a[e+
b]=this[e+c];else a._set(this.subarray(c,c+l),b);return l};d.prototype.fill=function(a,b,d){a||(a=0);b||(b=0);d||(d=this.length);if(d<b)throw new RangeError("end < start");if(d!==b&&0!==this.length){if(0>b||b>=this.length)throw new RangeError("start out of bounds");if(0>d||d>this.length)throw new RangeError("end out of bounds");if("number"===typeof a)for(;b<d;b++)this[b]=a;else{a=F(a.toString());for(var c=a.length;b<d;b++)this[b]=a[b%c]}return this}};var y=d.prototype;d._augment=function(a){a.constructor=
d;a._isBuffer=!0;a._set=a.set;a.get=y.get;a.set=y.set;a.write=y.write;a.toString=y.toString;a.toLocaleString=y.toString;a.toJSON=y.toJSON;a.equals=y.equals;a.compare=y.compare;a.indexOf=y.indexOf;a.copy=y.copy;a.slice=y.slice;a.readUIntLE=y.readUIntLE;a.readUIntBE=y.readUIntBE;a.readUInt8=y.readUInt8;a.readUInt16LE=y.readUInt16LE;a.readUInt16BE=y.readUInt16BE;a.readUInt32LE=y.readUInt32LE;a.readUInt32BE=y.readUInt32BE;a.readIntLE=y.readIntLE;a.readIntBE=y.readIntBE;a.readInt8=y.readInt8;a.readInt16LE=
y.readInt16LE;a.readInt16BE=y.readInt16BE;a.readInt32LE=y.readInt32LE;a.readInt32BE=y.readInt32BE;a.readFloatLE=y.readFloatLE;a.readFloatBE=y.readFloatBE;a.readDoubleLE=y.readDoubleLE;a.readDoubleBE=y.readDoubleBE;a.writeUInt8=y.writeUInt8;a.writeUIntLE=y.writeUIntLE;a.writeUIntBE=y.writeUIntBE;a.writeUInt16LE=y.writeUInt16LE;a.writeUInt16BE=y.writeUInt16BE;a.writeUInt32LE=y.writeUInt32LE;a.writeUInt32BE=y.writeUInt32BE;a.writeIntLE=y.writeIntLE;a.writeIntBE=y.writeIntBE;a.writeInt8=y.writeInt8;a.writeInt16LE=
y.writeInt16LE;a.writeInt16BE=y.writeInt16BE;a.writeInt32LE=y.writeInt32LE;a.writeInt32BE=y.writeInt32BE;a.writeFloatLE=y.writeFloatLE;a.writeFloatBE=y.writeFloatBE;a.writeDoubleLE=y.writeDoubleLE;a.writeDoubleBE=y.writeDoubleBE;a.fill=y.fill;a.inspect=y.inspect;return a};var Bb=/[^+\/0-9A-Za-z-_]/g}),ca=T&&"object"===("undefined"===typeof T?"undefined":u(T))&&"default"in T?T["default"]:T,H=T.Buffer,da=B(function(e){var c={cipher:e.exports={}};c.cipher.aes=function(a){this._tables[0][0][0]||this._precompute();
var b,d,e,k,f=this._tables[0][4],g=this._tables[1];b=a.length;var h=1;if(4!==b&&6!==b&&8!==b)throw new c.exception.invalid("invalid aes key size");this._key=[e=a.slice(0),k=[]];for(a=b;a<4*b+28;a++){d=e[a-1];if(0===a%b||8===b&&4===a%b)d=f[d>>>24]<<24^f[d>>16&255]<<16^f[d>>8&255]<<8^f[d&255],0===a%b&&(d=d<<8^d>>>24^h<<24,h=h<<1^283*(h>>7));e[a]=e[a-b]^d}for(b=0;a;b++,a--)d=e[b&3?a:a-4],k[b]=4>=a||4>b?d:g[0][f[d>>>24]]^g[1][f[d>>16&255]]^g[2][f[d>>8&255]]^g[3][f[d&255]]};c.cipher.aes.prototype={encrypt:function(a){return this._crypt(a,
0)},decrypt:function(a){return this._crypt(a,1)},_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var a=this._tables[0],b=this._tables[1],d=a[4],c=b[4],e,f,g,h=[],m=[],r,p,x,z;for(e=0;256>e;e++)m[(h[e]=e<<1^283*(e>>7))^e]=e;for(f=g=0;!d[f];f^=r||1,g=m[g]||1)for(x=g^g<<1^g<<2^g<<3^g<<4,x=x>>8^x&255^99,d[f]=x,c[x]=f,p=h[e=h[r=h[f]]],z=16843009*p^65537*e^257*r^16843008*f,p=257*h[x]^16843008*x,e=0;4>e;e++)a[e][f]=p=p<<24^p>>>8,b[e][x]=z=z<<24^z>>>8;for(e=0;5>e;e++)a[e]=a[e].slice(0),
b[e]=b[e].slice(0)},_crypt:function(a,b){if(4!==a.length)throw new c.exception.invalid("invalid aes block size");var d=this._key[b],e=a[0]^d[0],k=a[b?3:1]^d[1],f=a[2]^d[2],g=a[b?1:3]^d[3],h,m,r,p=d.length/4-2,x,z=4,M=[0,0,0,0];h=this._tables[b];var C=h[0],q=h[1],v=h[2],t=h[3],w=h[4];for(x=0;x<p;x++)h=C[e>>>24]^q[k>>16&255]^v[f>>8&255]^t[g&255]^d[z],m=C[k>>>24]^q[f>>16&255]^v[g>>8&255]^t[e&255]^d[z+1],r=C[f>>>24]^q[g>>16&255]^v[e>>8&255]^t[k&255]^d[z+2],g=C[g>>>24]^q[e>>16&255]^v[k>>8&255]^t[f&255]^
d[z+3],z+=4,e=h,k=m,f=r;for(x=0;4>x;x++)M[b?3&-x:x]=w[e>>>24]<<24^w[k>>16&255]<<16^w[f>>8&255]<<8^w[g&255]^d[z++],h=e,e=k,k=f,f=g,g=h;return M}}}),db=da&&"object"===("undefined"===typeof da?"undefined":u(da))&&"default"in da?da["default"]:da,U=B(function(e){function c(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function a(a){return"function"===typeof a}function b(a){return"object"===("undefined"===typeof a?"undefined":u(a))&&null!==a}e.exports=c;c.EventEmitter=c;
c.prototype._events=void 0;c.prototype._maxListeners=void 0;c.defaultMaxListeners=10;c.prototype.setMaxListeners=function(a){if("number"!==typeof a||0>a||isNaN(a))throw TypeError("n must be a positive number");this._maxListeners=a;return this};c.prototype.emit=function(d){var c,e,f,g;this._events||(this._events={});if("error"===d&&(!this._events.error||b(this._events.error)&&!this._events.error.length)){c=arguments[1];if(c instanceof Error)throw c;throw TypeError('Uncaught, unspecified "error" event.');
}e=this._events[d];if(void 0===e)return!1;if(a(e))switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:c=Array.prototype.slice.call(arguments,1),e.apply(this,c)}else if(b(e))for(c=Array.prototype.slice.call(arguments,1),g=e.slice(),e=g.length,f=0;f<e;f++)g[f].apply(this,c);return!0};c.prototype.addListener=function(d,e){var k;if(!a(e))throw TypeError("listener must be a function");this._events||(this._events=
{});this._events.newListener&&this.emit("newListener",d,a(e.listener)?e.listener:e);this._events[d]?b(this._events[d])?this._events[d].push(e):this._events[d]=[this._events[d],e]:this._events[d]=e;b(this._events[d])&&!this._events[d].warned&&(k=void 0!==this._maxListeners?this._maxListeners:c.defaultMaxListeners)&&0<k&&this._events[d].length>k&&(this._events[d].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",
this._events[d].length),"function"===typeof console.trace&&console.trace());return this};c.prototype.on=c.prototype.addListener;c.prototype.once=function(b,c){function e(){this.removeListener(b,e);f||(f=!0,c.apply(this,arguments))}if(!a(c))throw TypeError("listener must be a function");var f=!1;e.listener=c;this.on(b,e);return this};c.prototype.removeListener=function(d,c){var e,f,g;if(!a(c))throw TypeError("listener must be a function");if(!this._events||!this._events[d])return this;e=this._events[d];
g=e.length;f=-1;if(e===c||a(e.listener)&&e.listener===c)delete this._events[d],this._events.removeListener&&this.emit("removeListener",d,c);else if(b(e)){for(;0<g--;)if(e[g]===c||e[g].listener&&e[g].listener===c){f=g;break}if(0>f)return this;1===e.length?(e.length=0,delete this._events[d]):e.splice(f,1);this._events.removeListener&&this.emit("removeListener",d,c)}return this};c.prototype.removeAllListeners=function(b){var c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?
this._events={}:this._events[b]&&delete this._events[b],this;if(0===arguments.length){for(c in this._events)"removeListener"!==c&&this.removeAllListeners(c);this.removeAllListeners("removeListener");this._events={};return this}c=this._events[b];if(a(c))this.removeListener(b,c);else if(c)for(;c.length;)this.removeListener(b,c[c.length-1]);delete this._events[b];return this};c.prototype.listeners=function(b){return this._events&&this._events[b]?a(this._events[b])?[this._events[b]]:this._events[b].slice():
[]};c.prototype.listenerCount=function(b){if(this._events){b=this._events[b];if(a(b))return 1;if(b)return b.length}return 0};c.listenerCount=function(a,b){return a.listenerCount(b)}}),Xa=U&&"object"===("undefined"===typeof U?"undefined":u(U))&&"default"in U?U["default"]:U,Sa=U.EventEmitter,Ta=function(){function e(c){Ma(this,e);for(var a=[],b=0;4>b;b++)a[b]=c.readInt32BE(4*b);this.aes=new db.aes(a)}Na(e,[{key:"encryptCBC",value:function(c){for(var a=[0,0,0,0],b=Array(4),d=void 0,e=void 0,d=0;d<c.length;d+=
16){for(e=0;4>e;e++)b[e]=c.readUInt32BE(d+4*e,!1)^a[e];a=this.aes.encrypt(b);for(e=0;4>e;e++)c.writeInt32BE(a[e],d+4*e,!1)}}},{key:"decryptCBC",value:function(c){for(var a=[0,0,0,0],b=Array(4),d=Array(4),e=void 0,k=void 0,e=0;e<c.length;e+=16){for(k=0;4>k;k++)b[k]=c.readUInt32BE(e+4*k,!1);d=b;b=this.aes.decrypt(b);for(k=0;4>k;k++)c.writeInt32BE(b[k]^a[k],e+4*k,!1);a=d}}},{key:"stringhash",value:function(c){var a=[0,0,0,0];for(i=0;i<c.length;i+=4)a[i/4&3]^=c.readInt32BE(i,!0);for(i=16384;i--;)a=this.aes.encrypt(a);
c=new H(8);c.writeInt32BE(a[0],0,!0);c.writeInt32BE(a[2],4,!0);return S(c)}},{key:"decryptKey",value:function(c){for(var a=[],b=0;b<c.length;b+=16)a[0]=c.readInt32BE(b,!1),a[1]=c.readInt32BE(b+4,!1),a[2]=c.readInt32BE(b+8,!1),a[3]=c.readInt32BE(b+12,!1),a=this.aes.decrypt(a),c.writeInt32BE(a[0],b,!1),c.writeInt32BE(a[1],b+4,!1),c.writeInt32BE(a[2],b+8,!1),c.writeInt32BE(a[3],b+12,!1);return c}},{key:"encryptKey",value:function(c){for(var a=[],b=0;b<c.length;b+=16)a[0]=c.readInt32BE(b,!1),a[1]=c.readInt32BE(b+
4,!1),a[2]=c.readInt32BE(b+8,!1),a[3]=c.readInt32BE(b+12,!1),a=this.aes.encrypt(a),c.writeInt32BE(a[0],b,!1),c.writeInt32BE(a[1],b+4,!1),c.writeInt32BE(a[2],b+8,!1),c.writeInt32BE(a[3],b+12,!1);return c}}]);return e}(),hb=function(e){function c(a,b){Ma(this,c);var d=Qa(this,Object.getPrototypeOf(c).call(this));d.aes=a.aes;d.nonce=b;d.posNext=d.increment=131072;d.pos=0;d.encrypt=d._process.bind(d,!0);d.decrypt=d._process.bind(d,!1);d.ctr=[d.nonce[0],d.nonce[1],0,0];d.mac=[d.ctr[0],d.ctr[1],d.ctr[0],
d.ctr[1]];d.macs=[];d.on("mac",function(a){d.macs.push(a)});return d}Pa(c,e);Na(c,[{key:"condensedMac",value:function(){this.mac&&(this.macs.push(this.mac),this.mac=void 0);for(var a=void 0,b=void 0,d=[0,0,0,0],a=0;a<this.macs.length;a++){for(b=0;4>b;b++)d[b]^=this.macs[a][b];d=this.aes.encrypt(d)}return d}},{key:"_process",value:function(a,b){for(var d=0;d<b.length;d+=16){var c=[],e=void 0;a?(c[0]=b.readInt32BE(d,!0),c[1]=b.readInt32BE(d+4,!0),c[2]=b.readInt32BE(d+8,!0),c[3]=b.readInt32BE(d+12,!0),
this.mac[0]^=c[0],this.mac[1]^=c[1],this.mac[2]^=c[2],this.mac[3]^=c[3],this.mac=this.aes.encrypt(this.mac),e=this.aes.encrypt(this.ctr),b.writeInt32BE(c[0]^e[0],d,!0),b.writeInt32BE(c[1]^e[1],d+4,!0),b.writeInt32BE(c[2]^e[2],d+8,!0),b.writeInt32BE(c[3]^e[3],d+12,!0)):(e=this.aes.encrypt(this.ctr),c[0]=b.readInt32BE(d,!0)^e[0],c[1]=b.readInt32BE(d+4,!0)^e[1],c[2]=b.readInt32BE(d+8,!0)^e[2],c[3]=b.readInt32BE(d+12,!0)^e[3],b.writeInt32BE(c[0],d,!0),b.writeInt32BE(c[1],d+4,!0),b.writeInt32BE(c[2],d+
8,!0),b.writeInt32BE(c[3],d+12,!0),this.mac[0]^=b.readInt32BE(d,!0),this.mac[1]^=b.readInt32BE(d+4,!0),this.mac[2]^=b.readInt32BE(d+8,!0),this.mac[3]^=b.readInt32BE(d+12,!0),this.mac=this.aes.encrypt(this.mac));++this.ctr[3]||this.ctr[2]++;this.pos+=16;this.pos>=this.posNext&&(this.emit("mac",this.mac),this.ctr[2]=this.pos/68719476736>>>0,this.ctr[3]=this.pos/16>>>0,this.mac=[this.ctr[0],this.ctr[1],this.ctr[0],this.ctr[1]],1048576>this.increment&&(this.increment+=131072),this.posNext+=this.increment)}}}]);
return c}(Sa),ea=B(function(e){e.exports="function"===typeof Object.create?function(c,a){c.super_=a;c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:function(c,a){c.super_=a;var b=function(){};b.prototype=a.prototype;c.prototype=new b;c.prototype.constructor=c}}),fa=ea&&"object"===("undefined"===typeof ea?"undefined":u(ea))&&"default"in ea?ea["default"]:ea,ga=B(function(e,c){c.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===
Object.prototype.toString.call(a)};c.isBoolean=function(a){return"boolean"===typeof a};c.isNull=function(a){return null===a};c.isNullOrUndefined=function(a){return null==a};c.isNumber=function(a){return"number"===typeof a};c.isString=function(a){return"string"===typeof a};c.isSymbol=function(a){return"symbol"===("undefined"===typeof a?"undefined":u(a))};c.isUndefined=function(a){return void 0===a};c.isRegExp=function(a){return"[object RegExp]"===Object.prototype.toString.call(a)};c.isObject=function(a){return"object"===
("undefined"===typeof a?"undefined":u(a))&&null!==a};c.isDate=function(a){return"[object Date]"===Object.prototype.toString.call(a)};c.isError=function(a){return"[object Error]"===Object.prototype.toString.call(a)||a instanceof Error};c.isFunction=function(a){return"function"===typeof a};c.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===("undefined"===typeof a?"undefined":u(a))||"undefined"===typeof a};c.isBuffer=ca.Buffer.isBuffer}),
N=ga&&"object"===("undefined"===typeof ga?"undefined":u(ga))&&"default"in ga?ga["default"]:ga,ha=B(function(e,c,a){function b(b){try{if(!a.localStorage)return!1}catch(c){return!1}b=a.localStorage[b];return null==b?!1:"true"===String(b).toLowerCase()}e.exports=function(a,c){if(b("noDeprecation"))return a;var e=!1;return function(){if(!e){if(b("throwDeprecation"))throw Error(c);b("traceDeprecation")?console.trace(c):console.warn(c);e=!0}return a.apply(this,arguments)}}}),Cb=ha&&"object"===("undefined"===
typeof ha?"undefined":u(ha))&&"default"in ha?ha["default"]:ha,ia=B(function(e){function c(){k=!1;f.length?n=f.concat(n):g=-1;n.length&&a()}function a(){if(!k){var a=setTimeout(c);k=!0;for(var b=n.length;b;){f=n;for(n=[];++g<b;)f&&f[g].run();g=-1;b=n.length}f=null;k=!1;clearTimeout(a)}}function b(a,b){this.fun=a;this.array=b}function d(){}e=e.exports={};var n=[],k=!1,f,g=-1;e.nextTick=function(d){var c=Array(arguments.length-1);if(1<arguments.length)for(var e=1;e<arguments.length;e++)c[e-1]=arguments[e];
n.push(new b(d,c));1!==n.length||k||setTimeout(a,0)};b.prototype.run=function(){this.fun.apply(null,this.array)};e.title="browser";e.browser=!0;e.env={};e.argv=[];e.version="";e.versions={};e.on=d;e.addListener=d;e.once=d;e.off=d;e.removeListener=d;e.removeAllListeners=d;e.emit=d;e.binding=function(a){throw Error("process.binding is not supported");};e.cwd=function(){return"/"};e.chdir=function(a){throw Error("process.chdir is not supported");};e.umask=function(){return 0}}),I=ia&&"object"===("undefined"===
typeof ia?"undefined":u(ia))&&"default"in ia?ia["default"]:ia,ja=B(function(e){function c(a){for(var b=Array(arguments.length-1),d=0;d<b.length;)b[d++]=arguments[d];I.nextTick(function(){a.apply(null,b)})}!I.version||0===I.version.indexOf("v0.")||0===I.version.indexOf("v1.")&&0!==I.version.indexOf("v1.8.")?e.exports=c:e.exports=I.nextTick}),Ya=ja&&"object"===("undefined"===typeof ja?"undefined":u(ja))&&"default"in ja?ja["default"]:ja,ka=B(function(e){function c(){}function a(a,b,d){this.chunk=a;this.encoding=
b;this.callback=d;this.next=null}function b(a,b){z=z||V;a=a||{};this.objectMode=!!a.objectMode;b instanceof z&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var d=a.highWaterMark,c=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:c;this.highWaterMark=~~this.highWaterMark;this.finished=this.ended=this.ending=this.needDrain=!1;this.decodeStrings=!1!==a.decodeStrings;this.defaultEncoding=a.defaultEncoding||"utf8";this.length=0;this.writing=!1;this.corked=0;this.sync=!0;this.bufferProcessing=
!1;this.onwrite=function(a){var d=b._writableState,c=d.sync,e=d.writecb;d.writing=!1;d.writecb=null;d.length-=d.writelen;d.writelen=0;a?(--d.pendingcb,c?m(e,a):e(a),b._writableState.errorEmitted=!0,b.emit("error",a)):((a=g(d))||d.corked||d.bufferProcessing||!d.bufferedRequest||f(b,d),c?m(k,b,d,a,e):k(b,d,a,e))};this.writecb=null;this.writelen=0;this.lastBufferedRequest=this.bufferedRequest=null;this.pendingcb=0;this.errorEmitted=this.prefinished=!1}function d(a){z=z||V;if(!(this instanceof d||this instanceof
z))return new d(a);this._writableState=new b(a,this);this.writable=!0;a&&("function"===typeof a.write&&(this._write=a.write),"function"===typeof a.writev&&(this._writev=a.writev));x.call(this)}function n(a,b,d,c,e,f,n){b.writelen=c;b.writecb=n;b.writing=!0;b.sync=!0;d?a._writev(e,b.onwrite):a._write(e,f,b.onwrite);b.sync=!1}function k(a,b,d,c){!d&&0===b.length&&b.needDrain&&(b.needDrain=!1,a.emit("drain"));b.pendingcb--;c();h(a,b)}function f(a,b){b.bufferProcessing=!0;var d=b.bufferedRequest;if(a._writev&&
d&&d.next){for(var c=[],e=[];d;)e.push(d.callback),c.push(d),d=d.next;b.pendingcb++;b.lastBufferedRequest=null;n(a,b,!0,b.length,c,"",function(a){for(var d=0;d<e.length;d++)b.pendingcb--,e[d](a)})}else{for(;d&&(c=d.chunk,n(a,b,!1,b.objectMode?1:c.length,c,d.encoding,d.callback),d=d.next,!b.writing););null===d&&(b.lastBufferedRequest=null)}b.bufferedRequest=d;b.bufferProcessing=!1}function g(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function h(a,b){var d=g(b);
d&&(0===b.pendingcb?(b.prefinished||(b.prefinished=!0,a.emit("prefinish")),b.finished=!0,a.emit("finish")):b.prefinished||(b.prefinished=!0,a.emit("prefinish")));return d}e.exports=d;var m=Ya,r=ca.Buffer;d.WritableState=b;N.inherits=fa;var p={deprecate:Cb},x;try{x=require("stream")}catch(M){}finally{x||(x=Xa.EventEmitter)}r=ca.Buffer;N.inherits(d,x);var z;b.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b};(function(){try{Object.defineProperty(b.prototype,
"buffer",{get:p.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(a){}})();d.prototype.pipe=function(){this.emit("error",Error("Cannot pipe. Not readable."))};d.prototype.write=function(b,d,e){var f=this._writableState,g=!1;"function"===typeof d&&(e=d,d=null);r.isBuffer(b)?d="buffer":d||(d=f.defaultEncoding);"function"!==typeof e&&(e=c);if(f.ended)f=e,b=Error("write after end"),this.emit("error",b),m(f,b);else{var w=
e,h=!0;r.isBuffer(b)||"string"===typeof b||null===b||void 0===b||f.objectMode||(h=new TypeError("Invalid non-string/buffer chunk"),this.emit("error",h),m(w,h),h=!1);h&&(f.pendingcb++,g=d,f.objectMode||!1===f.decodeStrings||"string"!==typeof b||(b=new r(b,g)),r.isBuffer(b)&&(g="buffer"),w=f.objectMode?1:b.length,f.length+=w,d=f.length<f.highWaterMark,d||(f.needDrain=!0),f.writing||f.corked?(w=f.lastBufferedRequest,f.lastBufferedRequest=new a(b,g,e),w?w.next=f.lastBufferedRequest:f.bufferedRequest=
f.lastBufferedRequest):n(this,f,!1,w,b,g,e),g=d)}return g};d.prototype.cork=function(){this._writableState.corked++};d.prototype.uncork=function(){var a=this._writableState;a.corked&&(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||f(this,a))};d.prototype.setDefaultEncoding=function(a){"string"===typeof a&&(a=a.toLowerCase());if(!(-1<"hex utf8 utf-8 ascii binary base64 ucs2 ucs-2 utf16le utf-16le raw".split(" ").indexOf((a+"").toLowerCase())))throw new TypeError("Unknown encoding: "+
a);this._writableState.defaultEncoding=a};d.prototype._write=function(a,b,d){d(Error("not implemented"))};d.prototype._writev=null;d.prototype.end=function(a,b,d){var c=this._writableState;"function"===typeof a?(d=a,b=a=null):"function"===typeof b&&(d=b,b=null);null!==a&&void 0!==a&&this.write(a,b);c.corked&&(c.corked=1,this.uncork());if(!c.ending&&!c.finished){a=d;c.ending=!0;h(this,c);if(a)if(c.finished)m(a);else this.once("finish",a);c.ended=!0}}}),Za=ka&&"object"===("undefined"===typeof ka?"undefined":
u(ka))&&"default"in ka?ka["default"]:ka,la=B(function(e,c){function a(a){return a.toString(this.encoding)}function b(a){this.charLength=(this.charReceived=a.length%2)?2:0}function d(a){this.charLength=(this.charReceived=a.length%3)?3:0}var n=ca.Buffer,k=n.isEncoding||function(a){switch(a&&a.toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":case "raw":return!0;default:return!1}},f=c.StringDecoder=function(c){this.encoding=
(c||"utf8").toLowerCase().replace(/[-_]/,"");if(c&&!k(c))throw Error("Unknown encoding: "+c);switch(this.encoding){case "utf8":this.surrogateSize=3;break;case "ucs2":case "utf16le":this.surrogateSize=2;this.detectIncompleteChar=b;break;case "base64":this.surrogateSize=3;this.detectIncompleteChar=d;break;default:this.write=a;return}this.charBuffer=new n(6);this.charLength=this.charReceived=0};f.prototype.write=function(a){for(var b="";this.charLength;){b=a.length>=this.charLength-this.charReceived?
this.charLength-this.charReceived:a.length;a.copy(this.charBuffer,this.charReceived,0,b);this.charReceived+=b;if(this.charReceived<this.charLength)return"";a=a.slice(b,a.length);var b=this.charBuffer.slice(0,this.charLength).toString(this.encoding),d=b.charCodeAt(b.length-1);if(55296<=d&&56319>=d)this.charLength+=this.surrogateSize,b="";else{this.charReceived=this.charLength=0;if(0===a.length)return b;break}}this.detectIncompleteChar(a);var c=a.length;this.charLength&&(a.copy(this.charBuffer,0,a.length-
this.charReceived,c),c-=this.charReceived);b+=a.toString(this.encoding,0,c);c=b.length-1;d=b.charCodeAt(c);return 55296<=d&&56319>=d?(d=this.surrogateSize,this.charLength+=d,this.charReceived+=d,this.charBuffer.copy(this.charBuffer,d,0,d),a.copy(this.charBuffer,0,0,d),b.substring(0,c)):b};f.prototype.detectIncompleteChar=function(a){for(var b=3<=a.length?3:a.length;0<b;b--){var d=a[a.length-b];if(1==b&&6==d>>5){this.charLength=2;break}if(2>=b&&14==d>>4){this.charLength=3;break}if(3>=b&&30==d>>3){this.charLength=
4;break}}this.charReceived=b};f.prototype.end=function(a){var b="";a&&a.length&&(b=this.write(a));this.charReceived&&(a=this.encoding,b+=this.charBuffer.slice(0,this.charReceived).toString(a));return b}}),ib=la&&"object"===("undefined"===typeof la?"undefined":u(la))&&"default"in la?la["default"]:la,$a={},ma=B(function(e){e.exports=Array.isArray||function(c){return"[object Array]"==Object.prototype.toString.call(c)}}),Db=ma&&"object"===("undefined"===typeof ma?"undefined":u(ma))&&"default"in ma?ma["default"]:
ma,na=B(function(e){function c(a,b){F=F||V;a=a||{};this.objectMode=!!a.objectMode;b instanceof F&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var d=a.highWaterMark,c=this.objectMode?16:16384;this.highWaterMark=d||0===d?d:c;this.highWaterMark=~~this.highWaterMark;this.buffer=[];this.length=0;this.pipes=null;this.pipesCount=0;this.flowing=null;this.reading=this.endEmitted=this.ended=!1;this.sync=!0;this.readableListening=this.emittedReadable=this.needReadable=!1;this.defaultEncoding=a.defaultEncoding||
"utf8";this.ranOut=!1;this.awaitDrain=0;this.readingMore=!1;this.encoding=this.decoder=null;a.encoding&&(w||(w=ib.StringDecoder),this.decoder=new w(a.encoding),this.encoding=a.encoding)}function a(b){F=F||V;if(!(this instanceof a))return new a(b);this._readableState=new c(b,this);this.readable=!0;b&&"function"===typeof b.read&&(this._read=b.read);v.call(this)}function b(a,b,d,c,e){var w;w=d;var t=null;q.isBuffer(w)||"string"===typeof w||null===w||void 0===w||b.objectMode||(t=new TypeError("Invalid non-string/buffer chunk"));
(w=t)?a.emit("error",w):null===d?(b.reading=!1,b.ended||(b.decoder&&(d=b.decoder.end())&&d.length&&(b.buffer.push(d),b.length+=b.objectMode?1:d.length),b.ended=!0,n(a))):b.objectMode||d&&0<d.length?b.ended&&!e?(d=Error("stream.push() after EOF"),a.emit("error",d)):b.endEmitted&&e?(d=Error("stream.unshift() after end event"),a.emit("error",d)):(!b.decoder||e||c||(d=b.decoder.write(d)),e||(b.reading=!1),b.flowing&&0===b.length&&!b.sync?(a.emit("data",d),a.read(0)):(b.length+=b.objectMode?1:d.length,
e?b.buffer.unshift(d):b.buffer.push(d),b.needReadable&&n(a)),b.readingMore||(b.readingMore=!0,C(f,a,b))):e||(b.reading=!1);return!b.ended&&(b.needReadable||b.length<b.highWaterMark||0===b.length)}function d(a,b){if(0===b.length&&b.ended)return 0;if(b.objectMode)return 0===a?0:1;if(null===a||isNaN(a))return b.flowing&&b.buffer.length?b.buffer[0].length:b.length;if(0>=a)return 0;if(a>b.highWaterMark){var d=a;8388608<=d?d=8388608:(d--,d|=d>>>1,d|=d>>>2,d|=d>>>4,d|=d>>>8,d|=d>>>16,d++);b.highWaterMark=
d}if(a>b.length){if(b.ended)return b.length;b.needReadable=!0;return 0}return a}function n(a){var b=a._readableState;b.needReadable=!1;b.emittedReadable||(t("emitReadable",b.flowing),b.emittedReadable=!0,b.sync?C(k,a):k(a))}function k(a){t("emit readable");a.emit("readable");r(a)}function f(a,b){for(var d=b.length;!b.reading&&!b.flowing&&!b.ended&&b.length<b.highWaterMark&&(t("maybeReadMore read 0"),a.read(0),d!==b.length);)d=b.length;b.readingMore=!1}function g(a){return function(){var b=a._readableState;
t("pipeOnDrain",b.awaitDrain);b.awaitDrain&&b.awaitDrain--;0===b.awaitDrain&&a.listeners("data").length&&(b.flowing=!0,r(a))}}function h(a){t("readable nexttick read 0");a.read(0)}function m(a,b){b.reading||(t("resume read 0"),a.read(0));b.resumeScheduled=!1;a.emit("resume");r(a);b.flowing&&!b.reading&&a.read(0)}function r(a){var b=a._readableState;t("flow",b.flowing);if(b.flowing){do var d=a.read();while(null!==d&&b.flowing)}}function p(a,b){var d=b.buffer,c=b.length,e=!!b.decoder,f=!!b.objectMode;
if(0===d.length)return null;if(0===c)c=null;else if(f)c=d.shift();else if(!a||a>=c)c=e?d.join(""):1===d.length?d[0]:q.concat(d,c),d.length=0;else if(a<d[0].length)f=d[0],c=f.slice(0,a),d[0]=f.slice(a);else if(a===d[0].length)c=d.shift();else for(var c=e?"":new q(a),n=0,w=0,t=d.length;w<t&&n<a;w++){var f=d[0],g=Math.min(a-n,f.length);e?c+=f.slice(0,g):f.copy(c,n,0,g);g<f.length?d[0]=f.slice(g):d.shift();n+=g}return c}function x(a){var b=a._readableState;if(0<b.length)throw Error("endReadable called on non-empty stream");
b.endEmitted||(b.ended=!0,C(z,b,a))}function z(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function u(a,b){for(var d=0,c=a.length;d<c;d++)b(a[d],d)}e.exports=a;var C=Ya,q=ca.Buffer;a.ReadableState=c;var v;try{v=require("stream")}catch(l){}finally{v||(v=Xa.EventEmitter)}q=ca.Buffer;N.inherits=fa;var t;t=$a&&$a.debuglog?$a.debuglog("stream"):function(){};var w;N.inherits(a,v);var F;a.prototype.push=function(a,d){var c=this._readableState;c.objectMode||"string"!==typeof a||
(d=d||c.defaultEncoding,d!==c.encoding&&(a=new q(a,d),d=""));return b(this,c,a,d,!1)};a.prototype.unshift=function(a){return b(this,this._readableState,a,"",!0)};a.prototype.isPaused=function(){return!1===this._readableState.flowing};a.prototype.setEncoding=function(a){w||(w=ib.StringDecoder);this._readableState.decoder=new w(a);this._readableState.encoding=a;return this};a.prototype.read=function(a){t("read",a);var b=this._readableState,c=a;if("number"!==typeof a||0<a)b.emittedReadable=!1;if(0===
a&&b.needReadable&&(b.length>=b.highWaterMark||b.ended))return t("read: emitReadable",b.length,b.ended),0===b.length&&b.ended?x(this):n(this),null;a=d(a,b);if(0===a&&b.ended)return 0===b.length&&x(this),null;var e=b.needReadable;t("need readable",e);if(0===b.length||b.length-a<b.highWaterMark)e=!0,t("length less than watermark",e);if(b.ended||b.reading)e=!1,t("reading or ended",e);e&&(t("do read"),b.reading=!0,b.sync=!0,0===b.length&&(b.needReadable=!0),this._read(b.highWaterMark),b.sync=!1);e&&!b.reading&&
(a=d(c,b));e=0<a?p(a,b):null;null===e&&(b.needReadable=!0,a=0);b.length-=a;0!==b.length||b.ended||(b.needReadable=!0);c!==a&&b.ended&&0===b.length&&x(this);null!==e&&this.emit("data",e);return e};a.prototype._read=function(a){this.emit("error",Error("not implemented"))};a.prototype.pipe=function(a,b){function d(a){t("onunpipe");a===h&&e()}function c(){t("onend");a.end()}function e(){t("cleanup");a.removeListener("close",w);a.removeListener("finish",q);a.removeListener("drain",p);a.removeListener("error",
n);a.removeListener("unpipe",d);h.removeListener("end",c);h.removeListener("end",e);h.removeListener("data",f);m=!0;!k.awaitDrain||a._writableState&&!a._writableState.needDrain||p()}function f(b){t("ondata");!1===a.write(b)&&(1!==k.pipesCount||k.pipes[0]!==a||1!==h.listenerCount("data")||m||(t("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++),h.pause())}function n(b){t("onerror",b);v();a.removeListener("error",n);0===a.listeners("error").length&&a.emit("error",
b)}function w(){a.removeListener("finish",q);v()}function q(){t("onfinish");a.removeListener("close",w);v()}function v(){t("unpipe");h.unpipe(a)}var h=this,k=this._readableState;switch(k.pipesCount){case 0:k.pipes=a;break;case 1:k.pipes=[k.pipes,a];break;default:k.pipes.push(a)}k.pipesCount+=1;t("pipe count=%d opts=%j",k.pipesCount,b);var F=b&&!1===b.end||a===I.stdout||a===I.stderr?e:c;if(k.endEmitted)C(F);else h.once("end",F);a.on("unpipe",d);var p=g(h);a.on("drain",p);var m=!1;h.on("data",f);if(a._events&&
a._events.error)Db(a._events.error)?a._events.error.unshift(n):a._events.error=[n,a._events.error];else a.on("error",n);a.once("close",w);a.once("finish",q);a.emit("pipe",h);k.flowing||(t("pipe resume"),h.resume());return a};a.prototype.unpipe=function(a){var b=this._readableState;if(0===b.pipesCount)return this;if(1===b.pipesCount){if(a&&a!==b.pipes)return this;a||(a=b.pipes);b.pipes=null;b.pipesCount=0;b.flowing=!1;a&&a.emit("unpipe",this);return this}if(!a){a=b.pipes;var d=b.pipesCount;b.pipes=
null;b.pipesCount=0;b.flowing=!1;for(var c=0;c<d;c++)a[c].emit("unpipe",this);return this}a:{for(var c=b.pipes,d=0,e=c.length;d<e;d++)if(c[d]===a){c=d;break a}c=-1}if(-1===c)return this;b.pipes.splice(c,1);--b.pipesCount;1===b.pipesCount&&(b.pipes=b.pipes[0]);a.emit("unpipe",this);return this};a.prototype.on=function(a,b){var d=v.prototype.on.call(this,a,b);"data"===a&&!1!==this._readableState.flowing&&this.resume();if("readable"===a&&this.readable){var c=this._readableState;c.readableListening||
(c.readableListening=!0,c.emittedReadable=!1,c.needReadable=!0,c.reading?c.length&&n(this,c):C(h,this))}return d};a.prototype.addListener=a.prototype.on;a.prototype.resume=function(){var a=this._readableState;a.flowing||(t("resume"),a.flowing=!0,a.resumeScheduled||(a.resumeScheduled=!0,C(m,this,a)));return this};a.prototype.pause=function(){t("call pause flowing=%j",this._readableState.flowing);!1!==this._readableState.flowing&&(t("pause"),this._readableState.flowing=!1,this.emit("pause"));return this};
a.prototype.wrap=function(a){var b=this._readableState,d=!1,c=this;a.on("end",function(){t("wrapped end");if(b.decoder&&!b.ended){var a=b.decoder.end();a&&a.length&&c.push(a)}c.push(null)});a.on("data",function(e){t("wrapped data");b.decoder&&(e=b.decoder.write(e));b.objectMode&&(null===e||void 0===e)||!(b.objectMode||e&&e.length)||c.push(e)||(d=!0,a.pause())});for(var e in a)void 0===this[e]&&"function"===typeof a[e]&&(this[e]=function(b){return function(){return a[b].apply(a,arguments)}}(e));u(["error",
"close","destroy","pause","resume"],function(b){a.on(b,c.emit.bind(c,b))});c._read=function(b){t("wrapped _read",b);d&&(d=!1,a.resume())};return c};a._fromList=p}),jb=na&&"object"===("undefined"===typeof na?"undefined":u(na))&&"default"in na?na["default"]:na,oa=B(function(e){function c(b){if(!(this instanceof c))return new c(b);k.call(this,b);f.call(this,b);b&&!1===b.readable&&(this.readable=!1);b&&!1===b.writable&&(this.writable=!1);this.allowHalfOpen=!0;b&&!1===b.allowHalfOpen&&(this.allowHalfOpen=
!1);this.once("end",a)}function a(){this.allowHalfOpen||this._writableState.ended||n(b,this)}function b(a){a.end()}var d=Object.keys||function(a){var b=[],d;for(d in a)b.push(d);return b};e.exports=c;var n=Ya;N.inherits=fa;var k=jb,f=Za;N.inherits(c,k);e=d(f.prototype);for(d=0;d<e.length;d++){var g=e[d];c.prototype[g]||(c.prototype[g]=f.prototype[g])}}),V=oa&&"object"===("undefined"===typeof oa?"undefined":u(oa))&&"default"in oa?oa["default"]:oa,pa=B(function(e){function c(a){this.afterTransform=
function(b,d){var c;c=a._transformState;c.transforming=!1;var e=c.writecb;e?(c.writechunk=null,c.writecb=null,null!==d&&void 0!==d&&a.push(d),e&&e(b),c=a._readableState,c.reading=!1,(c.needReadable||c.length<c.highWaterMark)&&a._read(c.highWaterMark),c=void 0):c=a.emit("error",Error("no writecb in Transform class"));return c};this.transforming=this.needTransform=!1;this.writechunk=this.writecb=null}function a(e){if(!(this instanceof a))return new a(e);d.call(this,e);this._transformState=new c(this);
var k=this;this._readableState.needReadable=!0;this._readableState.sync=!1;e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush));this.once("prefinish",function(){"function"===typeof this._flush?this._flush(function(a){b(k,a)}):b(k)})}function b(a,b){if(b)return a.emit("error",b);var d=a._transformState;if(a._writableState.length)throw Error("calling transform done when ws.length != 0");if(d.transforming)throw Error("calling transform done when still transforming");
return a.push(null)}e.exports=a;var d=V;N.inherits=fa;N.inherits(a,d);a.prototype.push=function(a,b){this._transformState.needTransform=!1;return d.prototype.push.call(this,a,b)};a.prototype._transform=function(a,b,d){throw Error("not implemented");};a.prototype._write=function(a,b,d){var c=this._transformState;c.writecb=d;c.writechunk=a;c.writeencoding=b;c.transforming||(a=this._readableState,(c.needTransform||a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark))};a.prototype._read=
function(a){a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0}}),ab=pa&&"object"===("undefined"===typeof pa?"undefined":u(pa))&&"default"in pa?pa["default"]:pa,qa=B(function(e){function c(b){if(!(this instanceof c))return new c(b);a.call(this,b)}e.exports=c;var a=ab;N.inherits=fa;N.inherits(c,a);c.prototype._transform=function(a,d,c){c(null,a)}}),kb=qa&&"object"===("undefined"===
typeof qa?"undefined":u(qa))&&"default"in qa?qa["default"]:qa,ra=B(function(e){e.exports=kb}),Eb=ra&&"object"===("undefined"===typeof ra?"undefined":u(ra))&&"default"in ra?ra["default"]:ra,sa=B(function(e){e.exports=ab}),Fb=sa&&"object"===("undefined"===typeof sa?"undefined":u(sa))&&"default"in sa?sa["default"]:sa,ta=B(function(e){e.exports=V}),Gb=ta&&"object"===("undefined"===typeof ta?"undefined":u(ta))&&"default"in ta?ta["default"]:ta,ua=B(function(e){e.exports=Za}),Hb=ua&&"object"===("undefined"===
typeof ua?"undefined":u(ua))&&"default"in ua?ua["default"]:ua,va=B(function(e,c){var a;a:{try{a=require("stream");break a}catch(b){}a=void 0}c=e.exports=jb;c.Stream=a||c;c.Readable=c;c.Writable=Za;c.Duplex=V;c.Transform=ab;c.PassThrough=kb}),Ib=va&&"object"===("undefined"===typeof va?"undefined":u(va))&&"default"in va?va["default"]:va,wa=B(function(e){function c(){a.call(this)}e.exports=c;var a=Xa.EventEmitter;fa(c,a);c.Readable=Ib;c.Writable=Hb;c.Duplex=Gb;c.Transform=Fb;c.PassThrough=Eb;c.Stream=
c;c.prototype.pipe=function(b,d){function c(a){b.writable&&!1===b.write(a)&&r.pause&&r.pause()}function e(){r.readable&&r.resume&&r.resume()}function f(){p||(p=!0,b.end())}function g(){p||(p=!0,"function"===typeof b.destroy&&b.destroy())}function h(b){m();if(0===a.listenerCount(this,"error"))throw b;}function m(){r.removeListener("data",c);b.removeListener("drain",e);r.removeListener("end",f);r.removeListener("close",g);r.removeListener("error",h);b.removeListener("error",h);r.removeListener("end",
m);r.removeListener("close",m);b.removeListener("close",m)}var r=this;r.on("data",c);b.on("drain",e);b._isStdio||d&&!1===d.end||(r.on("end",f),r.on("close",g));var p=!1;r.on("error",h);b.on("error",h);r.on("end",m);r.on("close",m);b.on("close",m);b.emit("pipe",r);return b}}),X=wa&&"object"===("undefined"===typeof wa?"undefined":u(wa))&&"default"in wa?wa["default"]:wa;D.log={trace:K,debug:K,info:K,warn:K,error:K};var P=0;D.withCredentials=!1;D.DEFAULT_TIMEOUT=18E4;D.defaults=function(e,c){var a=function(a){return function(b,
c){b="string"===typeof b?{uri:b}:JSON.parse(JSON.stringify(b));for(var f in e)void 0===b[f]&&(b[f]=e[f]);return a(b,c)}},b=a(D);b.get=a(D.get);b.post=a(D.post);b.put=a(D.put);b.head=a(D.head);return b};["get","put","post","head"].forEach(function(e){var c=e.toUpperCase();e=e.toLowerCase();D[e]=function(a){"string"===typeof a?a={method:c,uri:a}:(a=JSON.parse(JSON.stringify(a)),a.method=c);var b=[a].concat(Array.prototype.slice.apply(arguments,[1]));return D.apply(this,b)}});var xa=B(function(e){var c=
function(a){switch("undefined"===typeof a?"undefined":u(a)){case "string":return a;case "boolean":return a?"true":"false";case "number":return isFinite(a)?a:"";default:return""}};e.exports=function(a,b,d,e){b=b||"&";d=d||"=";null===a&&(a=void 0);return"object"===("undefined"===typeof a?"undefined":u(a))?Object.keys(a).map(function(e){var f=encodeURIComponent(c(e))+d;return Array.isArray(a[e])?a[e].map(function(a){return f+encodeURIComponent(c(a))}).join(b):f+encodeURIComponent(c(a[e]))}).join(b):
e?encodeURIComponent(c(e))+d+encodeURIComponent(c(a)):""}}),Jb=xa&&"object"===("undefined"===typeof xa?"undefined":u(xa))&&"default"in xa?xa["default"]:xa,ya=B(function(e){e.exports=function(c,a,b,d){b=b||"=";var e={};if("string"!==typeof c||0===c.length)return e;var k=/\+/g;c=c.split(a||"&");a=1E3;d&&"number"===typeof d.maxKeys&&(a=d.maxKeys);d=c.length;0<a&&d>a&&(d=a);for(a=0;a<d;++a){var f=c[a].replace(k,"%20"),g=f.indexOf(b),h;0<=g?(h=f.substr(0,g),f=f.substr(g+1)):(h=f,f="");h=decodeURIComponent(h);
f=decodeURIComponent(f);Object.prototype.hasOwnProperty.call(e,h)?Array.isArray(e[h])?e[h].push(f):e[h]=[e[h],f]:e[h]=f}return e}}),Kb=ya&&"object"===("undefined"===typeof ya?"undefined":u(ya))&&"default"in ya?ya["default"]:ya,za=B(function(e,c){c.decode=c.parse=Kb;c.encode=c.stringify=Jb}),Ua=za&&"object"===("undefined"===typeof za?"undefined":u(za))&&"default"in za?za["default"]:za,Aa=B(function(e){e.exports="function"===typeof Object.create?function(c,a){c.super_=a;c.prototype=Object.create(a.prototype,
{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}})}:function(c,a){c.super_=a;var b=function(){};b.prototype=a.prototype;c.prototype=new b;c.prototype.constructor=c}}),Lb=Aa&&"object"===("undefined"===typeof Aa?"undefined":u(Aa))&&"default"in Aa?Aa["default"]:Aa,Ba=B(function(e){e.exports=function(c){return c&&"object"===("undefined"===typeof c?"undefined":u(c))&&"function"===typeof c.copy&&"function"===typeof c.fill&&"function"===typeof c.readUInt8}}),Mb=Ba&&"object"===("undefined"===
typeof Ba?"undefined":u(Ba))&&"default"in Ba?Ba["default"]:Ba,Ca=B(function(e,c,a){function b(a,b){var e={seen:[],stylize:n};3<=arguments.length&&(e.depth=arguments[2]);4<=arguments.length&&(e.colors=arguments[3]);z(b)?e.showHidden=b:b&&c._extend(e,b);q(e.showHidden)&&(e.showHidden=!1);q(e.depth)&&(e.depth=2);q(e.colors)&&(e.colors=!1);q(e.customInspect)&&(e.customInspect=!0);e.colors&&(e.stylize=d);return f(e,a,e.depth)}function d(a,d){var c=b.styles[d];return c?"\u001b["+b.colors[c][0]+"m"+a+"\u001b["+
b.colors[c][1]+"m":a}function n(a,b){return a}function k(a){var b={};a.forEach(function(a,d){b[a]=!0});return b}function f(a,b,d){if(a.customInspect&&b&&l(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);C(e)||(e=f(a,e,d));return e}if(e=g(a,b))return e;var t=Object.keys(b),q=k(t);a.showHidden&&(t=Object.getOwnPropertyNames(b));if(F(b)&&(0<=t.indexOf("message")||0<=t.indexOf("description")))return h(b);if(0===t.length){if(l(b))return a.stylize("[Function"+
(b.name?": "+b.name:"")+"]","special");if(v(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(w(b))return a.stylize(Date.prototype.toString.call(b),"date");if(F(b))return h(b)}var e="",A=!1,n=["{","}"];x(b)&&(A=!0,n=["[","]"]);l(b)&&(e=" [Function"+(b.name?": "+b.name:"")+"]");v(b)&&(e=" "+RegExp.prototype.toString.call(b));w(b)&&(e=" "+Date.prototype.toUTCString.call(b));F(b)&&(e=" "+h(b));if(0===t.length&&(!A||0==b.length))return n[0]+e+n[1];if(0>d)return v(b)?a.stylize(RegExp.prototype.toString.call(b),
"regexp"):a.stylize("[Object]","special");a.seen.push(b);t=A?m(a,b,d,q,t):t.map(function(c){return r(a,b,d,q,c,A)});a.seen.pop();return p(t,e,n)}function g(a,b){if(q(b))return a.stylize("undefined","undefined");if(C(b)){var d="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(d,"string")}if(M(b))return a.stylize(""+b,"number");if(z(b))return a.stylize(""+b,"boolean");if(null===b)return a.stylize("null","null")}function h(a){return"["+Error.prototype.toString.call(a)+
"]"}function m(a,b,d,c,e){for(var f=[],w=0,l=b.length;w<l;++w)Object.prototype.hasOwnProperty.call(b,String(w))?f.push(r(a,b,d,c,String(w),!0)):f.push("");e.forEach(function(e){e.match(/^\d+$/)||f.push(r(a,b,d,c,e,!0))});return f}function r(a,b,d,c,e,w){var l,t;b=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]};b.get?t=b.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):b.set&&(t=a.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(c,e)||(l="["+e+"]");t||
(0>a.seen.indexOf(b.value)?(t=null===d?f(a,b.value,null):f(a,b.value,d-1),-1<t.indexOf("\n")&&(t=w?t.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+t.split("\n").map(function(a){return"   "+a}).join("\n"))):t=a.stylize("[Circular]","special"));if(q(l)){if(w&&e.match(/^\d+$/))return t;l=JSON.stringify(""+e);l.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(l=l.substr(1,l.length-2),l=a.stylize(l,"name")):(l=l.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),l=a.stylize(l,
"string"))}return l+": "+t}function p(a,b,d){var c=0;return 60<a.reduce(function(a,b){c++;0<=b.indexOf("\n")&&c++;return a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0)?d[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+d[1]:d[0]+b+" "+a.join(", ")+" "+d[1]}function x(a){return Array.isArray(a)}function z(a){return"boolean"===typeof a}function M(a){return"number"===typeof a}function C(a){return"string"===typeof a}function q(a){return void 0===a}function v(a){return t(a)&&"[object RegExp]"===Object.prototype.toString.call(a)}
function t(a){return"object"===("undefined"===typeof a?"undefined":u(a))&&null!==a}function w(a){return t(a)&&"[object Date]"===Object.prototype.toString.call(a)}function F(a){return t(a)&&("[object Error]"===Object.prototype.toString.call(a)||a instanceof Error)}function l(a){return"function"===typeof a}function G(a){return 10>a?"0"+a.toString(10):a.toString(10)}function A(){var a=new Date,b=[G(a.getHours()),G(a.getMinutes()),G(a.getSeconds())].join(":");return[a.getDate(),Ra[a.getMonth()],b].join(" ")}
var Q=/%[sdj%]/g;c.format=function(a){if(!C(a)){for(var d=[],c=0;c<arguments.length;c++)d.push(b(arguments[c]));return d.join(" ")}for(var c=1,e=arguments,f=e.length,d=String(a).replace(Q,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case "%s":return String(e[c++]);case "%d":return Number(e[c++]);case "%j":try{return JSON.stringify(e[c++])}catch(b){return"[Circular]"}default:return a}}),l=e[c];c<f;l=e[++c])d=null!==l&&t(l)?d+(" "+b(l)):d+(" "+l);return d};c.deprecate=function(b,d){if(q(a.process))return function(){return c.deprecate(b,
d).apply(this,arguments)};if(!0===I.noDeprecation)return b;var e=!1;return function(){if(!e){if(I.throwDeprecation)throw Error(d);I.traceDeprecation?console.trace(d):console.error(d);e=!0}return b.apply(this,arguments)}};var J={},Oa;c.debuglog=function(a){q(Oa)&&(Oa=I.env.NODE_DEBUG||"");a=a.toUpperCase();if(!J[a])if((new RegExp("\\b"+a+"\\b","i")).test(Oa)){var b=I.pid;J[a]=function(){var d=c.format.apply(c,arguments);console.error("%s %d: %s",a,b,d)}}else J[a]=function(){};return J[a]};c.inspect=
b;b.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};b.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};c.isArray=x;c.isBoolean=z;c.isNull=function(a){return null===a};c.isNullOrUndefined=function(a){return null==a};c.isNumber=M;c.isString=C;c.isSymbol=function(a){return"symbol"===
("undefined"===typeof a?"undefined":u(a))};c.isUndefined=q;c.isRegExp=v;c.isObject=t;c.isDate=w;c.isError=F;c.isFunction=l;c.isPrimitive=function(a){return null===a||"boolean"===typeof a||"number"===typeof a||"string"===typeof a||"symbol"===("undefined"===typeof a?"undefined":u(a))||"undefined"===typeof a};c.isBuffer=Mb;var Ra="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");c.log=function(){console.log("%s - %s",A(),c.format.apply(c,arguments))};c.inherits=Lb;c._extend=function(a,b){if(!b||
!t(b))return a;for(var d=Object.keys(b),c=d.length;c--;)a[d[c]]=b[d[c]];return a}}),lb=Ca&&"object"===("undefined"===typeof Ca?"undefined":u(Ca))&&"default"in Ca?Ca["default"]:Ca,mb={1:"EINTERNAL (-1): An internal error has occurred. Please submit a bug report, detailing the exact circumstances in which this error occurred.",2:"EARGS (-2): You have passed invalid arguments to this command.",3:"EAGAIN (-3): A temporary congestion or server malfunction prevented your request from being processed. No data was altered. Retried 4 times.",
4:"ERATELIMIT (-4): You have exceeded your command weight per time quota. Please wait a few seconds, then try again (this should never happen in sane real-life applications).",5:"EFAILED (-5): The upload failed. Please restart it from scratch.",6:"ETOOMANY (-6): Too many concurrent IP addresses are accessing this upload target URL.",7:"ERANGE (-7): The upload file packet is out of range or not starting and ending on a chunk boundary.",8:"EEXPIRED (-8): The upload target URL you are trying to access has expired. Please request a fresh one.",
9:"ENOENT (-9): Object (typically, node or user) not found. Wrong password?",10:"ECIRCULAR (-10): Circular linkage attempted",11:"EACCESS (-11): Access violation (e.g., trying to write to a read-only share)",12:"EEXIST (-12): Trying to create an object that already exists",13:"EINCOMPLETE (-13): Trying to access an incomplete resource",14:"EKEY (-14): A decryption operation failed (never returned by the API)",15:"ESID (-15): Invalid or expired user session, please relogin",16:"EBLOCKED (-16): User blocked",
17:"EOVERQUOTA (-17): Request over quota",18:"ETEMPUNAVAIL (-18): Resource temporarily not available, please try again later"},bb=function(e){function c(a){Ma(this,c);var b=Qa(this,Object.getPrototypeOf(c).call(this));b.keepalive=a;b.counterId=Math.random().toString().substr(2,10);return b}Pa(c,e);Na(c,[{key:"request",value:function(a,b){var d=this,e=2>=arguments.length||void 0===arguments[2]?0:arguments[2],k={id:(this.counterId++).toString()};this.sid&&(k.sid=this.sid);D({uri:c.gateway+"cs",qs:k,
method:"POST",json:[a]},function(c,g,h){if(c)return b(c);if(!h)return b(Error("Empty response"));h.length&&(h=h[0]);if(!c&&"number"==typeof h&&0>h){if(-3===h&&4>e)return setTimeout(function(){d.request(a,b,e+1)},1E3*Math.pow(2,e+1));c=Error(mb[-h])}else d.keepalive&&h&&h.sn&&d.pull(h.sn);b(c,h)})}},{key:"pull",value:function(a){var b=this,d=1>=arguments.length||void 0===arguments[1]?0:arguments[1];this.sn=D({uri:c.gateway+"sc",qs:{sn:a,sid:this.sid},method:"POST",json:!0,body:"sc?"+Ua.stringify({sn:a})},
function(c,e,f){b.sn=void 0;if(!c&&"number"==typeof f&&0>f){if(-3===f&&4>d)return setTimeout(function(){b.pull(a,d+1)},1E3*Math.pow(2,d+1));c=Error(mb[-f])}if(c)throw c;f.w?b.wait(f.w,a):f.sn&&(f.a&&b.emit("sc",f.a),b.pull(f.sn))})}},{key:"wait",value:function(a,b){var d=this;this.sn=D({uri:a,method:"POST"},function(a,c,e){d.sn=void 0;if(a)throw Error("mega server wait req failed");d.pull(b)})}},{key:"close",value:function(){this.sn&&this.sn.abort()}}]);return c}(Sa);bb.gateway="https://g.api.mega.co.nz/";
var Da=B(function(e,c){function a(a,c,e){function f(){for(;m.length&&!p.paused;){var a=m.shift();if(null===a)return p.emit("end");p.emit("data",a)}}a=a||function(a){this.queue(a)};c=c||function(){this.queue(null)};var g=!1,h=!1,m=[],r=!1,p=new b;p.readable=p.writable=!0;p.paused=!1;p.autoDestroy=!(e&&!1===e.autoDestroy);p.write=function(b){a.call(this,b);return!p.paused};p.queue=p.push=function(a){if(r)return p;null===a&&(r=!0);m.push(a);f();return p};p.on("end",function(){p.readable=!1;!p.writable&&
p.autoDestroy&&I.nextTick(function(){p.destroy()})});p.end=function(a){if(!g)return g=!0,arguments.length&&p.write(a),p.writable=!1,c.call(p),!p.readable&&p.autoDestroy&&p.destroy(),p};p.destroy=function(){if(!h)return g=h=!0,m.length=0,p.writable=p.readable=!1,p.emit("close"),p};p.pause=function(){if(!p.paused)return p.paused=!0,p};p.resume=function(){p.paused&&(p.paused=!1,p.emit("resume"));f();p.paused||p.emit("drain");return p};return p}var b=X;e.exports=a;a.through=a}),Y=Da&&"object"===("undefined"===
typeof Da?"undefined":u(Da))&&"default"in Da?Da["default"]:Da,Ea=B(function(e){function c(){this.source=null;this.dataSize=0;this.maxDataSize=1048576;this.pauseStream=!0;this._released=this._maxDataSizeExceeded=!1;this._bufferedEvents=[]}var a=X.Stream;e.exports=c;lb.inherits(c,a);c.create=function(a,d){var c=new this;d=d||{};for(var e in d)c[e]=d[e];c.source=a;var f=a.emit;a.emit=function(){c._handleEmit(arguments);return f.apply(a,arguments)};a.on("error",function(){});c.pauseStream&&a.pause();
return c};Object.defineProperty(c.prototype,"readable",{configurable:!0,enumerable:!0,get:function(){return this.source.readable}});c.prototype.setEncoding=function(){return this.source.setEncoding.apply(this.source,arguments)};c.prototype.resume=function(){this._released||this.release();this.source.resume()};c.prototype.pause=function(){this.source.pause()};c.prototype.release=function(){this._released=!0;this._bufferedEvents.forEach(function(a){this.emit.apply(this,a)}.bind(this));this._bufferedEvents=
[]};c.prototype.pipe=function(){var b=a.prototype.pipe.apply(this,arguments);this.resume();return b};c.prototype._handleEmit=function(a){this._released?this.emit.apply(this,a):("data"===a[0]&&(this.dataSize+=a[1].length,this._checkIfMaxDataSizeExceeded()),this._bufferedEvents.push(a))};c.prototype._checkIfMaxDataSizeExceeded=function(){this._maxDataSizeExceeded||this.dataSize<=this.maxDataSize||(this._maxDataSizeExceeded=!0,this.emit("error",Error("DelayedStream#maxDataSize of "+this.maxDataSize+
" bytes exceeded.")))}}),nb=Ea&&"object"===("undefined"===typeof Ea?"undefined":u(Ea))&&"default"in Ea?Ea["default"]:Ea,Fa=B(function(e){function c(){this.writable=!1;this.readable=!0;this.dataSize=0;this.maxDataSize=2097152;this.pauseStreams=!0;this._released=!1;this._streams=[];this._currentStream=null}var a=X.Stream;e.exports=c;lb.inherits(c,a);c.create=function(a){var d=new this;a=a||{};for(var c in a)d[c]=a[c];return d};c.isStreamLike=function(a){return"function"!==typeof a&&"string"!==typeof a&&
"boolean"!==typeof a&&"number"!==typeof a&&!H.isBuffer(a)};c.prototype.append=function(a){if(c.isStreamLike(a)){if(!(a instanceof nb)){var d=nb.create(a,{maxDataSize:Infinity,pauseStream:this.pauseStreams});a.on("data",this._checkDataSize.bind(this));a=d}this._handleErrors(a);this.pauseStreams&&a.pause()}this._streams.push(a);return this};c.prototype.pipe=function(b,d){a.prototype.pipe.call(this,b,d);this.resume();return b};c.prototype._getNext=function(){this._currentStream=null;var a=this._streams.shift();
"undefined"==typeof a?this.end():"function"!==typeof a?this._pipeNext(a):a(function(a){c.isStreamLike(a)&&(a.on("data",this._checkDataSize.bind(this)),this._handleErrors(a));this._pipeNext(a)}.bind(this))};c.prototype._pipeNext=function(a){this._currentStream=a;c.isStreamLike(a)?(a.on("end",this._getNext.bind(this)),a.pipe(this,{end:!1})):(this.write(a),this._getNext())};c.prototype._handleErrors=function(a){var d=this;a.on("error",function(a){d._emitError(a)})};c.prototype.write=function(a){this.emit("data",
a)};c.prototype.pause=function(){this.pauseStreams&&(this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.pause&&this._currentStream.pause(),this.emit("pause"))};c.prototype.resume=function(){this._released||(this.writable=this._released=!0,this._getNext());this.pauseStreams&&this._currentStream&&"function"==typeof this._currentStream.resume&&this._currentStream.resume();this.emit("resume")};c.prototype.end=function(){this._reset();this.emit("end")};c.prototype.destroy=function(){this._reset();
this.emit("close")};c.prototype._reset=function(){this.writable=!1;this._streams=[];this._currentStream=null};c.prototype._checkDataSize=function(){this._updateDataSize();this.dataSize<=this.maxDataSize||this._emitError(Error("DelayedStream#maxDataSize of "+this.maxDataSize+" bytes exceeded."))};c.prototype._updateDataSize=function(){this.dataSize=0;var a=this;this._streams.forEach(function(d){d.dataSize&&(a.dataSize+=d.dataSize)});this._currentStream&&this._currentStream.dataSize&&(this.dataSize+=
this._currentStream.dataSize)};c.prototype._emitError=function(a){this._reset();this.emit("error",a)}}),Nb=Fa&&"object"===("undefined"===typeof Fa?"undefined":u(Fa))&&"default"in Fa?Fa["default"]:Fa,ob=new bb(!1),O=function(e){function c(a,b){Ma(this,c);var d=Qa(this,Object.getPrototypeOf(c).call(this));d.downloadId=a.downloadId;d.key=R(a.key);if(b&&a.h&&(d.api=b.api,d.nodeId=a.h,d.timestamp=a.ts,d.type=a.t,d.directory=!!d.type,a.k)){var e=a.k.split(":");d.key=R(e[e.length-1]);b.aes.decryptKey(d.key);
d.size=a.s||0;a.a?d._setAttributes(a.a,function(){}):d.name=""}return d}Pa(c,e);Na(c,[{key:"_setAttributes",value:function(a,b){a=cb(a);c.getCipher(this.key).decryptCBC(a);try{a=c.unpackAttributes(a)}catch(d){return b(d)}this.attributes=a;this.name=a.n;b(null,this)}},{key:"loadAttributes",value:function(a){var b=this;ob.request({a:"g",p:this.downloadId},function(d,c){if(d)return a(d);b.size=c.s;b._setAttributes(c.at,a)})}},{key:"download",value:function(a){var b={a:"g",g:1,ssl:2};this.nodeId?b.n=
this.nodeId:b.p=this.downloadId;var d=L.decrypt(this.key);(this.api||ob).request(b,function(a,b){function c(){var a=Math.max(b.s-1,h+m);if(!(a<=h)){var d=D(b.g+"/"+h+"-"+a);d.on("end",c);r.append(d,{contentLength:a-h});h=a;m=Math.max(m+131072,1048576);4>++e&&setTimeout(c,1E3)}}if(a)return d.emit("error",a);var e=0,h=0,m=131072,r=Nb.create();c();r.pipe(d);var p=0;d.on("data",function(a){p+=a.length;d.emit("progress",{bytesLoaded:p,bytesTotal:b.s})})});a&&fb(d,a);return d}},{key:"delete",value:function(a){if(!this.nodeId)return I.nextTick(function(){a(Error("delete is only supported on files with node ID-s"))});
this.api.request({a:"d",n:this.nodeId},a)}},{key:"link",value:function(a,b){1===arguments.length&&"function"===typeof a&&(b=a,a=!1);if(!this.nodeId)return I.nextTick(function(){b(Error("delete is only supported on files with node ID-s"))});var d=this;this.api.request({a:"l",n:this.nodeId},function(c,e){if(c)return b(c);var f="https://mega.nz/#!"+e;a||(f+="!"+S(d.key));b(null,f)})}}]);return c}(Sa);O.getCipher=function(e){for(var c=new H(16),a=0;16>a;a++)c.writeUInt8(e.readUInt8(a)^e.readUInt8(a+16,
!0),a);return new Ta(c)};O.packAttributes=function(e){e=JSON.stringify(e);e=new H("MEGA"+e);var c=new H(16*Math.ceil(e.length/16));c.fill(0);e.copy(c);return c};O.unpackAttributes=function(e){for(var c=e.length;!e.readUInt8(c-1);)c--;e=e.slice(0,c).toString();if('MEGA{"'!==e.substr(0,6))throw Error("Attributes could not be decrypted with provided key.");return JSON.parse(e.substring(4))};var Ga=B(function(e){function c(a,b){if(a.forEach)return a.forEach(b);for(var d=0;d<a.length;d++)b(a[d],d)}var a=
X,b=["write","end","destroy"],d=["resume","pause"],n=["data","close"],k=Array.prototype.slice;e.exports=function(e,g){function h(a){m.emit("error",a)}var m=new a,r=!1;c(b,function(a){m[a]=function(){return e[a].apply(e,arguments)}});c(d,function(a){m[a]=function(){m.emit(a);var b=g[a];if(b)return b.apply(g,arguments);g.emit(a)}});c(n,function(a){g.on(a,function(){var b=k.call(arguments);b.unshift(a);m.emit.apply(m,b)})});g.on("end",function(){if(!r){r=!0;var a=k.call(arguments);a.unshift("end");m.emit.apply(m,
a)}});e.on("drain",function(){m.emit("drain")});e.on("error",h);g.on("error",h);m.writable=e.writable;m.readable=g.readable;return m}}),Ob=Ga&&"object"===("undefined"===typeof Ga?"undefined":u(Ga))&&"default"in Ga?Ga["default"]:Ga,Ha=B(function(e){var c=Y;e.exports=function(){function a(b){2>b.length||(b[0].pipe(b[1]),a(b.slice(1)))}function b(){var a=[].slice.call(arguments);a.unshift("error");e.emit.apply(e,a)}var d;d=1==arguments.length&&Array.isArray(arguments[0])?arguments[0]:[].slice.call(arguments);
if(0==d.length)return c();if(1==d.length)return d[0];var e=Ob(d[0],d[d.length-1]);a(d);for(var k=1;k<d.length-1;k++)d[k].on("error",b);return e}}),Va=Ha&&"object"===("undefined"===typeof Ha?"undefined":u(Ha))&&"default"in Ha?Ha["default"]:Ha,Ia=B(function(e,c){function a(a){for(var b=Array(a);0<a--;)b[a]=0;return b}function b(a){var b=a.length;if(a[b-1])return a;for(;1<b&&0==a[b-1];)b--;return a.slice(0,b)}function d(a,b){var c=a.length,e=b.length;if(c<e)return d(b,a);for(var f=Array(c),q=0,v=0;v<
e;v++)q+=a[v]+b[v],f[v]=q&u,q>>>=x;for(;v<c;v++)q+=a[v],f[v]=q&u,q>>>=x;q&&(f[v]=q);return f}function n(a,d){var c=a.length,e=d.length;if(e>c)return[];if(e==c){if(d[e-1]>a[e-1])return[];if(1==e)return[a[0]-d[0]]}for(var f=Array(c),q=0,v=0;v<e;v++)q+=a[v]-d[v],f[v]=q&u,q>>=x;for(;v<c;v++)q+=a[v],f[v]=q&u,q>>=x;return q?[]:b(f)}function k(a,b,d,c,e){var f=d&q;d>>=C;var v=c&q;c>>=C;var g=d*v+c*f;e=f*v+((g&q)<<C)+a[b]+e;a[b]=e&u;return e=d*c+(g>>C)+(e>>x)}function f(d,c){var e=d.length,f=c.length,q=a(e+
f-1),v,g,h;for(g=0;g<f;g++){for(h=v=0;h<e;h++)v=k(q,g+h,d[h],c[g],v);q[g+e]=v}return b(q)}function g(a,b,d){for(var c=0;0<=b&&0<d--;)c=c*z+a[b--];return c}function h(d,c){var e=d.length-1,q=c.length-1,h=e-q;if(e<q||e==q&&(d[e]<c[e]||0<e&&d[e]==c[e]&&d[e-1]<c[e-1]))return this.q=[0],this.mod=d,this;if(e==q&&4>g(d,q,2)/g(c,q,2)){for(var A=d.concat(),q=0,k;;){k=n(A,c);if(0==k.length)break;A=k;q++}this.q=[q];this.mod=A;return this}k=Math.floor(Math.log(c[q])/v)+1;var m=x-k,A=d.concat(),p=c.concat();if(m){for(r=
q;0<r;r--)p[r]=p[r]<<m&u|p[r-1]>>k;p[0]=p[0]<<m&u;A[e]&u<<k&u&&(A[++e]=0,h++);for(r=e;0<r;r--)A[r]=A[r]<<m&u|A[r-1]>>k;A[0]=A[0]<<m&u}for(var r,y,z=a(h+1),E=a(h).concat(p);;){y=n(A,E);if(0==y.length)break;z[h]++;A=y}h=p[q];p=g(p,q,2);for(r=e;r>q;r--){e=r-q-1;z[e]=r>=A.length?1:A[r]==h?u:Math.floor(g(A,r,2)/h);for(y=g(A,r,3);z[e]*p>y;)z[e]--;E=E.slice(1);y=n(A,f([z[e]],E));0==y.length&&(z[e]--,y=n(A,f([z[e]],E)));A=y}if(m){for(r=0;r<A.length-1;r++)A[r]=A[r]>>m|A[r+1]<<k&u;A[A.length-1]>>=m}this.q=
b(z);this.mod=b(A);return this}function m(a,b){if(1==b.length){if(1==a.length)return[a[0]%b[0]];if(b[0]<q){for(var d=b[0],c=0,e,f=a.length-1;0<=f;f--)e=a[f],c=((e>>C)+(c<<C))%d,c=((e&q)+(c<<C))%d;return[c]}}return h(a,b).mod}function r(a,b,d){var c=a.length-(b.length<<1);if(0<c)return r(a.slice(0,c).concat(r(a.slice(c),b,d)),b,d);var c=b.length+1,e=f(a.slice(b.length-1),d).slice(c),q=a.slice(0,c),e=f(e,b).slice(0,c);a=n(q,e);0==a.length&&(q[c]=1,a=n(q,e));for(q=0;;q++){c=n(a,b);if(0==c.length)break;
a=c;if(3<=q)return r(a,b,d)}return a}function p(d,c,e){var q=d.concat(),v=c.length-1,g=2*e.length,n=a(g+1);n[g]=1;var n=h(n,e).q,g=c[v],m=1,p;0!=(p=g>>>16)&&(g=p,m+=16);0!=(p=g>>8)&&(g=p,m+=8);0!=(p=g>>4)&&(g=p,m+=4);0!=(p=g>>2)&&(g=p,m+=2);0!=g>>1&&(m+=1);for(g=m-2;0<=v;v--){for(;0<=g;--g){m=q.length;p=a(2*m);for(var u=0,y=void 0,z=void 0,y=0;y<m;y++){u=k(p,2*y,q[y],q[y],0);for(z=y+1;z<m;z++)u=k(p,y+z,2*q[z],q[y],u);p[y+m]=u}q=b(p);q=r(q,e,n);c[v]&1<<g&&(q=r(f(q,d),e,n))}g=x-1}return q}c.RSAdecrypt=
function(a,b,c,e,q){var v=p(m(a,c),m(b,n(c,[1])),c);a=p(m(a,e),m(b,n(e,[1])),e);b=n(a,v);0==b.length?(b=n(v,a),b=m(f(b,q),e),b=n(e,b)):b=m(f(b,q),e);return d(f(b,c),v)};c.mpi2b=function(a){var b=1,d=[0],c=0,e=256,f,q=a.length;if(2>q)return 0;var v=8*(q-2),g=256*a.charCodeAt(0)+a.charCodeAt(1);if(g>v||g<v-8)return 0;for(g=0;g<v;g++)255<(e<<=1)&&(e=1,f=a.charCodeAt(--q)),b>u&&(b=1,d[++c]=0),f&e&&(d[c]|=b),b<<=1;return d};c.b2s=function(a){var b=1,d=0,c=[0],e=1,f=0,q=a.length*x,v,g="";for(v=0;v<q;v++)a[d]&
b&&(c[f]|=e),255<(e<<=1)&&(e=1,c[++f]=0),(b<<=1)>u&&(b=1,d++);for(;0<=f&&0==c[f];)f--;for(v=0;v<=f;v++)g=String.fromCharCode(c[v])+g;return g};var x=28,z=1<<x,u=z-1,C=x>>1,q=(1<<C)-1,v=Math.log(2)}),Wa=Ia&&"object"===("undefined"===typeof Ia?"undefined":u(Ia))&&"default"in Ia?Ia["default"]:Ia,Ja=function(e){function c(a,b){function d(){f.status="ready";b();f.emit("ready",f)}function e(b){f.api.request({a:"ug"},function(c,e){if(c)return b(c);f.name=e.name;f.user=e.u;a.autoload?f.reload(function(a){if(a)return b(a);
d()},!0):d()})}Ma(this,c);var k=Qa(this,Object.getPrototypeOf(c).call(this));1===arguments.length&&"function"===typeof a&&(b=a,a={});b||(b=function(a){if(a)throw a;});a.keepalive=void 0===a.keepalive?!0:!!a.keepalive;a.autoload=void 0===a.autoload?!0:!!a.autoload;k.api=new bb(a.keepalive);k.files={};var f=k;if(a.email)(function(){k.email=a.email;var d=rb(new H(a.password)),c=new Ta(d),d=c.stringhash(new H(a.email));k.api.request({a:"us",user:a.email,uh:d},function(a,d){if(a)return b(a);f.key=R(d.k);
c.decryptKey(f.key);f.aes=new Ta(f.key);for(var g=Wa.mpi2b(R(d.csid).toString("binary")),k=f.aes.decryptKey(R(d.privk)).toString("binary"),u=Array(4),B=0;4>B;B++){var C=(256*k.charCodeAt(0)+k.charCodeAt(1)+7>>3)+2;u[B]=Wa.mpi2b(k.substr(0,C));if("number"==typeof u[B])break;k=k.substr(C)}g=new H(Wa.b2s(Wa.RSAdecrypt(g,u[2],u[0],u[1],u[3])).substr(0,43),"binary");g=S(g);f.api.sid=f.sid=g;f.RSAPrivateKey=u;e(b)})})();else throw Error("no credentials");k.status="connecting";return k}Pa(c,e);Na(c,[{key:"reload",
value:function(a,b){if("connecting"===this.status&&!b)return this.once("ready",this.reload.bind(this,a));var d=this;this.mounts=[];this.api.request({a:"f",c:1},function(b,c){if(b)return a(b);c.f.forEach(d._importFile.bind(d));a(null,d.mounts)});this.api.on("sc",function(a){var b={};a.forEach(function(a){if("u"===a.a){var c=d.files[a.n];c&&(c.timestamp=a.ts,c._setAttributes(a.at,function(){}),c.emit("update"),d.emit("update",c))}else"d"===a.a?b[a.n]=!0:"t"===a.a&&a.t.f.forEach(function(a){var c=void 0;
if(c=d.files[a.h]){delete b[a.h];var e=c.parent;e.nodeId!==a.p&&(e.children.splice(e.children.indexOf(c),1),c.parent=d.files[a.p],c.parent.children||(c.parent.children=[]),c.parent.children.push(c),c.emit("move",e),d.emit("move",c,e))}else d.emit("add",d._importFile(a))})});Object.keys(b).forEach(function(a){a=d.files[a];var b=a.parent;b.children.splice(b.children.indexOf(a),1);d.emit("delete",a);a.emit("delete")})})}},{key:"_importFile",value:function(a){if(!this.files[a.h]){var b=this.files[a.h]=
new O(a,this);a.t===c.NODE_TYPE_DRIVE&&(this.root=b,b.name="Cloud Drive");a.t===c.NODE_TYPE_RUBBISH_BIN&&(this.trash=b,b.name="Rubbish Bin");a.t===c.NODE_TYPE_INBOX&&(this.inbox=b,b.name="Inbox");1<a.t&&this.mounts.push(b);if(a.p){var d=this.files[a.p];d.children||(d.children=[]);d.children.push(b);b.parent=d}}return this.files[a.h]}},{key:"mkdir",value:function(a,b){"string"===typeof a&&(a={name:a});a.attributes||(a.attributes={});a.name&&(a.attributes.n=a.name);if(!a.attributes.n)return I.nextTick(function(){b(Error("File name is required."))});
if("connecting"===this.status)return this.on("ready",this.mkdir.bind(this,a,b));a.target||(a.target=this.root);if(!a.key)throw Error("key not defined");var d=a.key,c=O.packAttributes(a.attributes),e=this;O.getCipher(d).encryptCBC(c);this.aes.encryptKey(d);this.api.request({a:"p",t:a.target.nodeId?a.target.nodeId:a.target,n:[{h:"xxxxxxxx",t:1,a:S(c),k:S(d)}]},function(a,d){if(a)return returnError(a);var c=e._importFile(d.f[0]);e.emit("add",c);b&&b(null,c)})}},{key:"upload",value:function(a,b,d){function c(a){d?
d(a):m.emit("error",a)}function e(b){a.target||(a.target=f.root);f.api.request({a:"u",ssl:0,ms:"-1",s:b,r:0,e:0},function(e,k){if(e)return c(e);var r=D({uri:k.p,headers:{"Content-Length":b},method:"POST"});fb(r,function(b,e){if(b)return c(b);var h=g.key,w=O.packAttributes(a.attributes);O.getCipher(h).encryptCBC(w);f.aes.encryptKey(h);f.api.request({a:"p",t:a.target.nodeId?a.target.nodeId:a.target,n:[{h:e.toString(),t:0,a:S(w),k:S(h)}]},function(a,b){if(a)return c(a);var e=f._importFile(b.f[0]);f.emit("add",
e);m.emit("complete",e);d&&d(null,e)})});var u=0;g.on("data",function(a){u+=a.length;m.emit("progress",{bytesLoaded:u,bytesTotal:b})});g.on("end",function(){if(b&&u!=b)return m.emit("error",Error("Specified data size does not match."))});g.pipe(r);h.resume()})}2===arguments.length&&"function"===typeof b&&(d=b,b=null);"string"===typeof a&&(a={name:a});a.attributes||(a.attributes={});a.name&&(a.attributes.n=a.name);if(!a.attributes.n)throw Error("File name is required.");var f=this,g=L.encrypt(),h=
Y().pause(),m=Va(h,g),r=a.size;b&&(r=b.length,m.write(b),m.end());"connecting"===this.status&&function(){var a=e;e=function(b){f.on("ready",function(){a(b)})}}();r?e(r):m=Va(xb(e),m);return m}},{key:"close",value:function(){this.status="closed";this.api.close()}}]);return c}(Sa);Ja.NODE_TYPE_FILE=0;Ja.NODE_TYPE_DIR=1;Ja.NODE_TYPE_DRIVE=2;Ja.NODE_TYPE_INBOX=3;Ja.NODE_TYPE_RUBBISH_BIN=4;var Ka=B(function(e){e.exports={isString:function(c){return"string"===typeof c},isObject:function(c){return"object"===
("undefined"===typeof c?"undefined":u(c))&&null!==c},isNull:function(c){return null===c},isNullOrUndefined:function(c){return null==c}}}),Pb=Ka&&"object"===("undefined"===typeof Ka?"undefined":u(Ka))&&"default"in Ka?Ka["default"]:Ka,La=B(function(e,c,a){(function(b){function d(a){throw RangeError(w[a]);}function n(a,b){for(var d=a.length,c=[];d--;)c[d]=b(a[d]);return c}function k(a,b){var d=a.split("@"),c="";1<d.length&&(c=d[0]+"@",a=d[1]);a=a.replace(t,".");d=a.split(".");d=n(d,b).join(".");return c+
d}function f(a){for(var b=[],d=0,c=a.length,e,f;d<c;)e=a.charCodeAt(d++),55296<=e&&56319>=e&&d<c?(f=a.charCodeAt(d++),56320==(f&64512)?b.push(((e&1023)<<10)+(f&1023)+65536):(b.push(e),d--)):b.push(e);return b}function g(a){return n(a,function(a){var b="";65535<a&&(a-=65536,b+=l(a>>>10&1023|55296),a=56320|a&1023);return b+=l(a)}).join("")}function h(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function m(a,b,d){var c=0;a=d?F(a/700):a>>1;for(a+=F(a/b);455<a;c+=36)a=F(a/35);return F(c+36*a/(a+38))}function r(a){var b=
[],c=a.length,e,f=0,q=128,v=72,h,w,l,t,k;h=a.lastIndexOf("-");0>h&&(h=0);for(w=0;w<h;++w)128<=a.charCodeAt(w)&&d("not-basic"),b.push(a.charCodeAt(w));for(h=0<h?h+1:0;h<c;){w=f;e=1;for(l=36;;l+=36){h>=c&&d("invalid-input");t=a.charCodeAt(h++);t=10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:36;(36<=t||t>F((2147483647-f)/e))&&d("overflow");f+=t*e;k=l<=v?1:l>=v+26?26:l-v;if(t<k)break;t=36-k;e>F(2147483647/t)&&d("overflow");e*=t}e=b.length+1;v=m(f-w,e,0==w);F(f/e)>2147483647-q&&d("overflow");q+=F(f/e);f%=e;b.splice(f++,
0,q)}return g(b)}function p(a){var b,c,e,q,v,g,w,t,k,n=[],p,r,u;a=f(a);p=a.length;b=128;c=0;v=72;for(g=0;g<p;++g)k=a[g],128>k&&n.push(l(k));for((e=q=n.length)&&n.push("-");e<p;){w=2147483647;for(g=0;g<p;++g)k=a[g],k>=b&&k<w&&(w=k);r=e+1;w-b>F((2147483647-c)/r)&&d("overflow");c+=(w-b)*r;b=w;for(g=0;g<p;++g)if(k=a[g],k<b&&2147483647<++c&&d("overflow"),k==b){t=c;for(w=36;;w+=36){k=w<=v?1:w>=v+26?26:w-v;if(t<k)break;u=t-k;t=36-k;n.push(l(h(k+u%t,0)));t=F(u/t)}n.push(l(h(t,0)));v=m(c,r,e==q);c=0;++e}++c;
++b}return n.join("")}var x="object"==("undefined"===typeof c?"undefined":u(c))&&c&&!c.nodeType&&c,z="object"==("undefined"===typeof e?"undefined":u(e))&&e&&!e.nodeType&&e,B="object"==("undefined"===typeof a?"undefined":u(a))&&a;if(B.global===B||B.window===B||B.self===B)b=B;var C,q=/^xn--/,v=/[^\x20-\x7E]/,t=/[\x2E\u3002\uFF0E\uFF61]/g,w={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},F=Math.floor,
l=String.fromCharCode,G;C={version:"1.3.2",ucs2:{decode:f,encode:g},decode:r,encode:p,toASCII:function(a){return k(a,function(a){return v.test(a)?"xn--"+p(a):a})},toUnicode:function(a){return k(a,function(a){return q.test(a)?r(a.slice(4).toLowerCase()):a})}};if("function"==typeof define&&"object"==u(define.amd)&&define.amd)define("punycode",function(){return C});else if(x&&z)if(e.exports==x)z.exports=C;else for(G in C)C.hasOwnProperty(G)&&(x[G]=C[G]);else b.punycode=C})(this)}),Qb=La&&"object"===
("undefined"===typeof La?"undefined":u(La))&&"default"in La?La["default"]:La,W=B(function(e,c){function a(){this.href=this.path=this.pathname=this.query=this.search=this.hash=this.hostname=this.port=this.host=this.auth=this.slashes=this.protocol=null}function b(b,c,e){if(b&&d.isObject(b)&&b instanceof a)return b;var f=new a;f.parse(b,c,e);return f}var d=Pb;c.parse=b;c.resolve=function(a,d){return b(a,!1,!0).resolve(d)};c.resolveObject=function(a,d){return a?b(a,!1,!0).resolveObject(d):d};c.format=
function(c){d.isString(c)&&(c=b(c));return c instanceof a?c.format():a.prototype.format.call(c)};c.Url=a;var n=/^([a-z0-9.+-]+:)/i,k=/:[0-9]*$/,f=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,g="{}|\\^`".split("").concat('<>"` \r\n\t'.split("")),h=["'"].concat(g),m=["%","/","?",";","#"].concat(h),r=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,z={javascript:!0,"javascript:":!0},B={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,
"ftp:":!0,"gopher:":!0,"file:":!0};a.prototype.parse=function(a,b,c){if(!d.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+("undefined"===typeof a?"undefined":u(a)));var e=a.indexOf("?"),e=-1!==e&&e<a.indexOf("#")?"?":"#";a=a.split(e);a[0]=a[0].replace(/\\/g,"/");a=a.join(e);e=a.trim();if(!c&&1===a.split("#").length&&(a=f.exec(e)))return this.href=this.path=e,this.pathname=a[1],a[2]?(this.search=a[2],this.query=b?Ua.parse(this.search.substr(1)):this.search.substr(1)):b&&(this.search=
"",this.query={}),this;if(a=n.exec(e)){a=a[0];var g=a.toLowerCase();this.protocol=g;e=e.substr(a.length)}if(c||a||e.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===e.substr(0,2);!l||a&&B[a]||(e=e.substr(2),this.slashes=!0)}if(!B[a]&&(l||a&&!C[a])){l=-1;for(c=0;c<r.length;c++)a=e.indexOf(r[c]),-1!==a&&(-1===l||a<l)&&(l=a);l=-1===l?e.lastIndexOf("@"):e.lastIndexOf("@",l);-1!==l&&(c=e.slice(0,l),e=e.slice(l+1),this.auth=decodeURIComponent(c));l=-1;for(c=0;c<m.length;c++)a=e.indexOf(m[c]),-1!==a&&(-1===l||
a<l)&&(l=a);-1===l&&(l=e.length);this.host=e.slice(0,l);e=e.slice(l);this.parseHost();this.hostname=this.hostname||"";l="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!l){var k=this.hostname.split(/\./);c=0;for(a=k.length;c<a;c++){var A=k[c];if(A&&!A.match(p)){for(var D="",J=0,H=A.length;J<H;J++)D=127<A.charCodeAt(J)?D+"x":D+A[J];if(!D.match(p)){a=k.slice(0,c);c=k.slice(c+1);if(A=A.match(x))a.push(A[1]),c.unshift(A[2]);c.length&&(e="/"+c.join(".")+e);this.hostname=a.join(".");
break}}}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase();l||(this.hostname=Qb.toASCII(this.hostname));c=this.port?":"+this.port:"";this.host=(this.hostname||"")+c;this.href+=this.host;l&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==e[0]&&(e="/"+e))}if(!z[g])for(c=0,a=h.length;c<a;c++)l=h[c],-1!==e.indexOf(l)&&(A=encodeURIComponent(l),A===l&&(A=escape(l)),e=e.split(l).join(A));c=e.indexOf("#");-1!==c&&(this.hash=e.substr(c),e=e.slice(0,c));c=e.indexOf("?");
-1!==c?(this.search=e.substr(c),this.query=e.substr(c+1),b&&(this.query=Ua.parse(this.query)),e=e.slice(0,c)):b&&(this.search="",this.query={});e&&(this.pathname=e);C[g]&&this.hostname&&!this.pathname&&(this.pathname="/");if(this.pathname||this.search)c=this.pathname||"",this.path=c+(this.search||"");this.href=this.format();return this};a.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",e=this.hash||
"",f=!1,g="";this.host?f=a+this.host:this.hostname&&(f=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(f+=":"+this.port));this.query&&d.isObject(this.query)&&Object.keys(this.query).length&&(g=Ua.stringify(this.query));a=this.search||g&&"?"+g||"";b&&":"!==b.substr(-1)&&(b+=":");this.slashes||(!b||C[b])&&!1!==f?(f="//"+(f||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):f||(f="");e&&"#"!==e.charAt(0)&&(e="#"+e);a&&"?"!==a.charAt(0)&&(a="?"+a);c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)});
a=a.replace("#","%23");return b+f+c+a+e};a.prototype.resolve=function(a){return this.resolveObject(b(a,!1,!0)).format()};a.prototype.resolveObject=function(b){if(d.isString(b)){var c=new a;c.parse(b,!1,!0);b=c}for(var c=new a,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}c.hash=b.hash;if(""===b.href)return c.href=c.format(),c;if(b.slashes&&!b.protocol){e=Object.keys(b);for(f=0;f<e.length;f++)g=e[f],"protocol"!==g&&(c[g]=b[g]);C[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname=
"/");c.href=c.format();return c}if(b.protocol&&b.protocol!==c.protocol){if(!C[b.protocol]){e=Object.keys(b);for(f=0;f<e.length;f++)g=e[f],c[g]=b[g];c.href=c.format();return c}c.protocol=b.protocol;if(b.host||B[b.protocol])c.pathname=b.pathname;else{for(var h=(b.pathname||"").split("/");h.length&&!(b.host=h.shift()););b.host||(b.host="");b.hostname||(b.hostname="");""!==h[0]&&h.unshift("");2>h.length&&h.unshift("");c.pathname=h.join("/")}c.search=b.search;c.query=b.query;c.host=b.host||"";c.auth=b.auth;
c.hostname=b.hostname||b.host;c.port=b.port;if(c.pathname||c.search)c.path=(c.pathname||"")+(c.search||"");c.slashes=c.slashes||b.slashes;c.href=c.format();return c}var e=c.pathname&&"/"===c.pathname.charAt(0),k=b.host||b.pathname&&"/"===b.pathname.charAt(0),n=e=k||e||c.host&&b.pathname,f=c.pathname&&c.pathname.split("/")||[],h=b.pathname&&b.pathname.split("/")||[];if(g=c.protocol&&!C[c.protocol])c.hostname="",c.port=null,c.host&&(""===f[0]?f[0]=c.host:f.unshift(c.host)),c.host="",b.protocol&&(b.hostname=
null,b.port=null,b.host&&(""===h[0]?h[0]=b.host:h.unshift(b.host)),b.host=null),e=e&&(""===h[0]||""===f[0]);if(k)c.host=b.host||""===b.host?b.host:c.host,c.hostname=b.hostname||""===b.hostname?b.hostname:c.hostname,c.search=b.search,c.query=b.query,f=h;else if(h.length)f||(f=[]),f.pop(),f=f.concat(h),c.search=b.search,c.query=b.query;else if(!d.isNullOrUndefined(b.search))return g&&(c.hostname=c.host=f.shift(),g=c.host&&0<c.host.indexOf("@")?c.host.split("@"):!1)&&(c.auth=g.shift(),c.host=c.hostname=
g.shift()),c.search=b.search,c.query=b.query,d.isNull(c.pathname)&&d.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c;if(!f.length)return c.pathname=null,c.path=c.search?"/"+c.search:null,c.href=c.format(),c;for(var k=f.slice(-1)[0],h=(c.host||b.host||1<f.length)&&("."===k||".."===k)||""===k,m=0,p=f.length;0<=p;p--)k=f[p],"."===k?f.splice(p,1):".."===k?(f.splice(p,1),m++):m&&(f.splice(p,1),m--);if(!e&&!n)for(;m--;m)f.unshift("..");!e||""===f[0]||f[0]&&
"/"===f[0].charAt(0)||f.unshift("");h&&"/"!==f.join("/").substr(-1)&&f.push("");n=""===f[0]||f[0]&&"/"===f[0].charAt(0);g&&(c.hostname=c.host=n?"":f.length?f.shift():"",g=c.host&&0<c.host.indexOf("@")?c.host.split("@"):!1)&&(c.auth=g.shift(),c.host=c.hostname=g.shift());(e=e||c.host&&f.length)&&!n&&f.unshift("");f.length?c.pathname=f.join("/"):(c.pathname=null,c.path=null);d.isNull(c.pathname)&&d.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:""));c.auth=b.auth||c.auth;c.slashes=
c.slashes||b.slashes;c.href=c.format();return c};a.prototype.parseHost=function(){var a=this.host,b=k.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length));a&&(this.hostname=a)}});W&&"object"===("undefined"===typeof W?"undefined":u(W))&&"default"in W?W["default"]:W;var pb=W.parse;L.file=function(e){if("string"===typeof e){e=pb(e);var c=e.hash.split("!");if("mega.nz"!==e.hostname&&"mega.co.nz"!==e.hostname||!e.hash||3!==c.length)throw"Wrong URL supplied";e={downloadId:c[1],
key:c[2]}}return new L.File(e)};L.encrypt=function(e){e=R(e);if(!e)throw Error("key not defined");e instanceof H||(e=new H(e));var c=Y(function(a){b.encrypt(a);this.emit("data",a)},function(){var a=b.condensedMac(),n=new H(32);e.copy(n);n.writeInt32BE(a[0]^a[1],24);n.writeInt32BE(a[2]^a[3],28);for(a=0;16>a;a++)n.writeUInt8(n.readUInt8(a)^n.readUInt8(16+a),a);c.key=n;this.emit("end")});if(24!==e.length)return I.nextTick(function(){c.emit("error",Error("Wrong key length. Key must be 192bit."))});var a=
new Ta(e.slice(0,16)),b=new hb(a,[e.readInt32BE(16),e.readInt32BE(20)]);return c=Va(gb(16),c)};L.decrypt=function(e){e=R(e);var c=Y(function(a){b.decrypt(a);this.emit("data",a)},function(){var a=b.condensedMac();if((a[0]^a[1])!==e.readInt32BE(24)||(a[2]^a[3])!==e.readInt32BE(28))return this.emit("error",Error("MAC verification failed"));this.emit("end")}),a=L.File.getCipher(e),b=new hb(a,[e.readInt32BE(16),e.readInt32BE(20)]);return Va(gb(16),c)};L.Storage=Ja;L.File=O;self.addEventListener("install",
function(e){new ReadableStream;e.waitUntil(self.skipWaiting())});self.addEventListener("activate",function(e){e.waitUntil(self.clients.claim())});self.addEventListener("fetch",function(e){var c=(pb(e.request.url).search||"").substr(1),a="!"===c.charAt(0)?"https://mega.nz/#"+c:null;a&&(c=new Promise(function(b,c){var e=L.file(a);e.loadAttributes(function(a,f){if(a)return c(a);b(new Response(new ReadableStream({start:function(a){var b=e.download();b.on("data",function(b){return a.enqueue(new Uint8Array(b))});
b.on("end",function(){return a.close()})}}),{headers:{"Content-Length":f.size,"Content-Type":"application/octet-stream; charset=utf-8","Content-Disposition":"attachment; filename="+f.name}}))})}),e.respondWith(c["catch"](function(a){setTimeout(function(){fetch("https://api.rollbar.com/api/1/item/",{body:JSON.stringify({access_token:"e7dce51c0e174102bad8179a5c5680ac",data:{environment:"production",platform:"browser",body:{message:{body:a.stack}}}})})},100);return new Response(new Blob(["Unknown error!\n",
a.stack,"\n\nReport issue here: https://github.com/qgustavor/direct-mega/issues/new"]))})))})})();